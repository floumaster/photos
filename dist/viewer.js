import{a as H}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-LV3RNLOD.js";import{a as x}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-X4SQQSY3.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-VH5I2SNB.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-ONY6DFZ2.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-N57YM3IQ.js";import{a as k,b as A,c as G,d as z,e as q,f as J,g as K,h as Q}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-RX6OPZM5.js";import{b as _,d as m,e as $}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EF6ORQX2.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-W62RTK6M.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-C4KA27LO.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-QWRTI5K5.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-JKZMXHUJ.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-GZ34U2QP.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-COTTNMHG.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-TRWPMHA6.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-HUZQZGHK.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-PYWTQ4GF.js";import{a as W,b as ge}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-L7FXRVQ6.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XILO45LX.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-UW3KMVZH.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-CMF2TVF5.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-42ORVUCX.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-MREJ2LLE.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-K77K2XK5.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-2PHOMKUV.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-5HALNFMW.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XKBN7ZTX.js";import{a as X}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-LMJQ63Q6.js";import{a as R}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-7MEJQ3KY.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-7BFDDJ2T.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-24BWI6ZJ.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XEMK2H2Z.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-LVGGQSSR.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-CRTDZU4B.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-ZWVDMWEG.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-5AF5YDG4.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-QWYAB3BW.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-R6DDBZXF.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-3RMCA3Q2.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-35GZEIOR.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-NYJ7EJQO.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EYOAEBCS.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-U5MTH4YD.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-57UKIP6Y.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-AJNNHNLI.js";import{s as L,u as ue}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-SRD6FLX5.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-YMBEYHON.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-25PQJ4BC.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-SXDE6LPI.js";import{n as N,p as se}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XQWHE6DK.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-NITTXA45.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-APCDIJXF.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-6AOSDK7X.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-RLC4WUAA.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-Y4VJV6XC.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-7YPD37VS.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XWTIS2UH.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-JLJ2LMZB.js";import{a as F,b as me}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-WJXTK5TD.js";import{a as O}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-FIQI6ZL6.js";import{a as I,b as ce}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-IBIGO3MQ.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-5HM4RUO2.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EOPRVOQF.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-B7HN33R3.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-OA3LBRTV.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-PQZRGIDY.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-PB3LNYHC.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-NJZ5TINA.js";import{c as j,d as ne}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-UTJYRZ65.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-QBTNKWH5.js";import{a as re}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-F52NNDBE.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-BDXPEG65.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-NQCAM6CZ.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-B55HAWCE.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-UXT6OYZY.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-HYCG5F7A.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-5WOA3OAL.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-ADJ32KKN.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-OEHWGD2O.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-7IBOYLB2.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-HTXVD7MD.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EODFKDYT.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-BNGRKVMI.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-JLPSXSRU.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-LYOOAS6V.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-DYOKURAB.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-F2MIOWIS.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-VMBUSVOY.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-WW3GLCLT.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-AXLQ465R.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-WCMTVICX.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-SJ5UICXK.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-FP7NHLRT.js";import{a as E,b as ae}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-QZRXCNII.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-ZYAM3SU3.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-NWGYC5MB.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-7BYIK4MN.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EA6Q4NDH.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-FP7CEQ5S.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-SEX4KNLV.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-2744DW3M.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-IF76ESV6.js";import{B,C as s,E as y}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-B5SOAUQH.js";import{a as U}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-R5L6UBQG.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-TNXMQHOU.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-XPZGRGRJ.js";import{b as l,c as ie}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-GF2LBU4E.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-E7ABLFAT.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-R5DRPSFA.js";import{a as oe}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-LVFA7HAI.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-4VWUTGLK.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-VINZ7W46.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-EOLHP4MS.js";import"https://st-p.rmcdn.net/c9a51d26/dist/c/c-6GAXQ3MM.js";import{d as P}from"https://st-p.rmcdn.net/c9a51d26/dist/c/c-2LNZKOQK.js";var te=P(re());ce();ge();var v=P(U());ae();var d=P(U());var h=P(oe());me();se();ie();ne();ue();y();function pe(t){if(!l.isScreenshot){if(!window.RM.common.isDownloadedSource){let i=window.RM?.common?.isDomainViewer===!0;l.isProd&&!i&&import("https://st-p.rmcdn.net/c9a51d26/dist/c/c-FVT4OBRB.js").then(({getWebVitals:p})=>{p()}),N(t.num_id)}let o=new x;window.RM.analytics=o,window.RM.analytics&&(window.RM.analytics._triggerProjectView=!0)}}function b(t,o){let i=o?o.replace(/^\//,"")+(/\/$/.test(o)?"":"/"):"";return typeof t=="string"?t.replace(i,""):t}function de({location:t,history:o,isDomainForUser:i,isDomainViewer:p,isDownloadedSource:c,isHomepage:w,exportBasePath:u}){let g={environment:l.environment.viewer,navigate:(a,n)=>{n.replace?o.replace(a):o.push(a)},setUrlString:(a={})=>{let n=r.currentPage,e;if(p&&!i||c?e="":e=g.getMagUri(),n&&n.num!==1&&(e+=(n.pagePath||n.uri||n.num.toString())+"/"),e===o.location.pathname)return;let f=(parseInt(h.default.last(o.location.pathname.split("/"))||"",10)||1)===n.num||a.replace;c&&u&&!e.startsWith(u)&&(e=u+(/\/$/.test(u)?"":"/")+e.replace(/^\//,"")),c&&h.default.last(e)!=="/"&&(e+="/"),!w&&g.navigate(`${e[0]!=="/"?"/":""}${e}${t.search}`,{replace:f})},setTitle:()=>{if(!r||!r.currentPage)return;let a=F.getFinalSEO(r.currentPage,r,{customDomain:!!p});document.title=a.title||""},getMagUri:()=>i?(r.uri||r.num_id)+"/":p?"":h.default.isEmpty(r.user)?`${r.num_id}/`:`${r.user.uri}/${r.uri||r.num_id}/`,goBack:()=>{o.goBack()},go:(a=1,n)=>{if(n.isPageNum){r.showPage(a,n);return}let e=c?r.getPageByPath(b(a,u))||{}:r.getPageByPath(a)||{};r.showPage(e.num||a,n)},restartMag:()=>{window.location.reload()},onError:()=>{r&&g.go(1,{animation:!1})}},r=new $(window.ServerData.mags.mag,g);return r}function we({pageUri:t}){let{isDomainViewer:o,domainForUser:i,project:p,isDownloadedSource:c,homepageRewrite:w,exportBasePath:u}=(0,d.useContext)(R),[g,r]=(0,d.useState)(null),a=q(),n=z();return(0,d.useEffect)(()=>{if(g){let e=c?g.getPageByPath(b(t,u)||"1"):g.getPageByPath(t||"1");e&&g.currentPage!==e&&g.showPage(e.num)}},[t]),(0,d.useEffect)(()=>{if(p){m.setTiming("mag_loaded",Date.now());let e=de({location:a,history:n,isDomainViewer:o,isDownloadedSource:c,isDomainForUser:i,isHomepage:w,exportBasePath:u});r(e),window.RM.viewerRouter={mag:e,environment:l.environment.viewer,createMagFromTemplate:async(D,M)=>{let{default:V}=await import("https://st-p.rmcdn.net/c9a51d26/dist/c/c-YGMFL4KT.js");new V({router:window.RM.viewerRouter,me:window.RM?.data?.usersLoader?.me,tp:D,templateID:M})}},pe(e),e.hasNewTextWidgets()&&L("viewer");let S=c&&t?b(t,u):t||"1",f=e.getPageByPath(S)||e.getPage(S)||{},T=e.model?.attributes?.usedWidgetTypes;_(T?.length?T:j.usedWidgets(e.pages||[],e.aboveGlobalWidgetsData)).finally(()=>{e.render(),e.showPage(f?f.num:1),m.setTiming("mag_rendered",Date.now());let D=e.currentPage.num,M=e.pages.reduce((V,C)=>V+(C.widgets?C.widgets.length:0),0)+e.aboveGlobalWidgets.length;setTimeout(()=>{m.setTiming("dom_complete",window.performance.timing.domComplete),m.sendTimings({projectNumId:e.num_id,userNumId:e.user.num_id,viewport:e.viewport,startPage:D,widgetsCount:M})},1e4)})}},[]),s(B,{})}function le(){let{pageUri:t}=J();return s(we,{pageUri:t})}var Z=le;y();function fe(t){let o=[];if(t.isDomainViewer?t.isDomainForUser?o.push("/:mag/:pageUri*"):o.push("/:pageUri*"):(o.push("/:user/:project/num/:pageNum"),o.push("/:user/:project/:pageUri*")),t.isDownloadedSource&&(o.push("/:pageUri*"),/msie [6-9]/i.test(navigator.userAgent)&&typeof window<"u"))throw window.location.href="sorry.html",new Error("Readymag does not support IE");return o}function Pe({ssr:t,location:o,children:i}){return t?s(A,{location:o,children:i}):s(K,{children:i})}function ye({location:t,ssr:o,...i}){let[p,c]=(0,v.useState)([]);(0,v.useEffect)(()=>{let u=fe({isDomainViewer:i.isDomainViewer,isDomainForUser:i.domainForUser,isDownloadedSource:i.isDownloadedSource});c(u),m.setTiming("dom_loaded",window.performance.timing.domLoading),m.setTiming("scripts_loaded",window.performance.timing.domContentLoadedEventEnd),m.setTiming("router_init",Date.now())},[]);let w=i.errorPage?s(X,{type:i.errorPage}):s(Pe,{ssr:o,location:t,children:s(G,{children:s(k,{path:p,children:s(Z,{})})})});return s(R.Provider,{value:i,children:s(E,{children:w})})}function ee(){Q(ye)}RM.common={...RM.common,...window.viewerConfig};I.setSupportedFormats();window.onload=()=>{document.querySelector("html").classList.add("page-loaded")};m.setTiming("viewer_start",Date.now());O();window.Backbone=H(te.default);m.setTiming("router_create",Date.now());W.init(window.ServerData&&window.ServerData.userPermissions);ee();
