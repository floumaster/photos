import{d as b,h as I}from"https://st-p.rmcdn.net/670469db/dist/c/c-ECLTHKUW.js";import{a as y}from"https://st-p.rmcdn.net/670469db/dist/c/c-43CRZFF7.js";var p,Y,P=y(()=>{"use strict";I();p={setVideoPosition:function(e){if(!e.aspect_poster||!e.$media||!e.$media.length)return;let o=e.$container.css("width"),i=e.$container.css("height");if(/px/.test(o+i))o=parseInt(o),i=parseInt(i);else{if(!e.mag)return;let u=e.mag.getContainerSizeCached();o=u.width,i=u.height}let t=e.aspect_poster,s=e.aspect_real||t,d=e.controls_remove?5:0,c=o+d*2,l=i+d*2,r=c,n=l;if(t){let u,h;c/l>s?(u=c,h=u/s):(h=l,u=h*s),t<s?(r=u,n=r/t):(n=h,r=n*t)}if(e.provider.toLowerCase()=="vimeo"&&e.controls_remove){var m=(n-l)/2,U=(r-c)/2,f=50,V=46,v=f-m,w=V-U;if(v>0||w>0){let u=(n+v*2)/n,h=(r+w*2)/r,_=Math.max(u,h);r*=_,n*=_}}if(e.provider.toLowerCase()=="youtube"&&e.controls_remove){var m=(n-l)/2,f=103,g=f-m;g>0&&(n+=g*2,r=n*t)}let $=-d-(r-c)/2,x=-d-(n-l)/2;e.$media.css({left:$,top:x,width:r,height:n})},getHighResVideoThumbnail:function(e){if(!e.provider||!e.thumbnail_url)return Promise.resolve(e.thumbnail_url||"");function o(i,t){return i.replace(/(\/)(\w*default)(\.\w+$)/i,"$1"+t+"$3")}switch(e.provider.toLowerCase()){case"vimeo":return Promise.resolve(e.thumbnail_url);case"youtube":return Promise.resolve(typeof e.video_url=="string"&&e.video_url.includes("shorts")?e.thumbnail_url:o(e.thumbnail_url,"maxresdefault"));default:return Promise.resolve(e.thumbnail_url)}},getEmbedData:async function(e,o,i){fetch(/oembed/i.test(e)?e:this.getEmbedUrl(e)).then(t=>t.json()).then(t=>{t.url=t.url&&b(t.url),t.thumbnail_url=t.thumbnail_url&&b(t.thumbnail_url),typeof o=="function"&&o(t)}).catch(t=>{i(t)})},getEmbedUrl:function(e){if(this.isVimeo(e))return"https://vimeo.com/api/oembed.json?url="+encodeURIComponent(e)+"&width=1280";{let o=p.getYoutubeIdFromUrl(e);if(o)return"https://www.youtube.com/oembed?format=json&url="+encodeURIComponent("https://www.youtube.com/watch?v="+o)}return""},getYoutubeIdFromUrl:function(e){let o=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|shorts\/|watch\?v=)([^#\&\?]*).*/,i=e.match(o);if(i&&i[2].length===11)return i[2];let t=/.*(youtu.*\&v=)([^#\&\?]*).*/;return i=e.match(t),i&&i[2].length===11?i[2]:null},getVimeoIdFromUrl:function(e){let o=e.match(/(video\/)(\w+)(_\d+x\d+|_\d+)(\.\w+$)/i);return o&&o[2]?o[2]:null},getVideoProvider:function(e){return this.isVimeo(e)?"Vimeo":this.isYoutube(e)?"YouTube":""},isVimeo:function(e){return/vimeo\.com\/.+/.test(e)},isYoutube:function(e){return e&&!!this.getYoutubeIdFromUrl(e)},brokenVimeoThumbnailRegexp:/\/\d+_[\dx]+(\.\w+)?$/},Y=p});export{Y as a,P as b};
