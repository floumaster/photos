import{a as I,b as _e}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-WO7XZULW.js";import{a as U,b as Pe}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-7ZGGP2E5.js";import{d as D,e as we}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-L7WWO6M6.js";import{b as G,e as ge}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-TQQQHF5S.js";import{a as S,b as be}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RAXBYKBX.js";import{a as Z,b as ve}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RDXJA4GA.js";import{c as X,d as ye}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-ESZBX7KW.js";import{a as me}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-7E6CHA26.js";import{b as de}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-6ZBEBUM2.js";import{a as J,b as pe}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-2DOLZMQC.js";import{a as Y,d as B}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";function Ee(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function K(r,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(r,i.key,i)}}function Te(r,e,t){return e&&K(r.prototype,e),t&&K(r,t),r}function ee(r,e){return r.indexOf(e.toLowerCase())===0?r:"".concat(e.toLowerCase()).concat(r.substr(0,1).toUpperCase()).concat(r.substr(1))}function ke(r){return!!(r&&r.nodeType===1&&"nodeName"in r&&r.ownerDocument&&r.ownerDocument.defaultView)}function Ce(r){return!isNaN(parseFloat(r))&&isFinite(r)&&Math.floor(r)==r}function M(r){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(r)}function re(r){var e=/^https:\/\/player\.vimeo\.com\/video\/\d+/;return e.test(r)}function ie(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.id,t=r.url,i=e||t;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(Ce(i))return"https://vimeo.com/".concat(i);if(M(i))return i.replace("http:","https:");throw e?new TypeError("\u201C".concat(e,"\u201D is not a valid video id.")):new TypeError("\u201C".concat(i,"\u201D is not a vimeo.com url."))}function Ie(r,e){return e={exports:{}},r(e,e.exports),e.exports}function x(r,e,t){var i=T.get(r.element)||{};e in i||(i[e]=[]),i[e].push(t),T.set(r.element,i)}function L(r,e){var t=T.get(r.element)||{};return t[e]||[]}function z(r,e,t){var i=T.get(r.element)||{};if(!i[e])return!0;if(!t)return i[e]=[],T.set(r.element,i),!0;var n=i[e].indexOf(t);return n!==-1&&i[e].splice(n,1),T.set(r.element,i),i[e]&&i[e].length===0}function Fe(r,e){var t=L(r,e);if(t.length<1)return!1;var i=t.shift();return z(r,e,i),i}function Ve(r,e){var t=T.get(r);T.set(e,t),T.delete(r)}function j(r){if(typeof r=="string")try{r=JSON.parse(r)}catch(e){return console.warn(e),{}}return r}function R(r,e,t){if(!(!r.element.contentWindow||!r.element.contentWindow.postMessage)){var i={method:e};t!==void 0&&(i.value=t);var n=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));n>=8&&n<10&&(i=JSON.stringify(i)),r.element.contentWindow.postMessage(i,r.origin)}}function Se(r,e){e=j(e);var t=[],i;if(e.event){if(e.event==="error"){var n=L(r,e.data.method);n.forEach(function(s){var l=new Error(e.data.message);l.name=e.data.name,s.reject(l),z(r,e.data.method,s)})}t=L(r,"event:".concat(e.event)),i=e.data}else if(e.method){var o=Fe(r,e.method);o&&(t.push(o),i=e.value)}t.forEach(function(s){try{if(typeof s=="function"){s.call(r,i);return}s.resolve(i)}catch{}})}function ne(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe.reduce(function(t,i){var n=r.getAttribute("data-vimeo-".concat(i));return(n||n==="")&&(t[i]=n===""?1:n),t},e)}function Q(r,e){var t=r.html;if(!e)throw new TypeError("An element must be provided");if(e.getAttribute("data-vimeo-initialized")!==null)return e.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=t,e.appendChild(i.firstChild),e.setAttribute("data-vimeo-initialized","true"),e.querySelector("iframe")}function oe(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,n){if(!M(r))throw new TypeError("\u201C".concat(r,"\u201D is not a vimeo.com url."));var o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(r));for(var s in e)e.hasOwnProperty(s)&&(o+="&".concat(s,"=").concat(encodeURIComponent(e[s])));var l="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;l.open("GET",o,!0),l.onload=function(){if(l.status===404){n(new Error("\u201C".concat(r,"\u201D was not found.")));return}if(l.status===403){n(new Error("\u201C".concat(r,"\u201D is not embeddable.")));return}try{var p=JSON.parse(l.responseText);if(p.domain_status_code===403){Q(p,t),n(new Error("\u201C".concat(r,"\u201D is not embeddable.")));return}i(p)}catch(c){n(c)}},l.onerror=function(){var p=l.status?" (".concat(l.status,")"):"";n(new Error("There was an error fetching the embed code from Vimeo".concat(p,".")))},l.send()})}function Re(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,e=[].slice.call(r.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),t=function(n){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(n))};e.forEach(function(i){try{if(i.getAttribute("data-vimeo-defer")!==null)return;var n=ne(i),o=ie(n);oe(o,n,i).then(function(s){return Q(s,i)}).catch(t)}catch(s){t(s)}})}function Ae(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var e=function(i){if(M(i.origin)&&!(!i.data||i.data.event!=="spacechange")){for(var n=r.querySelectorAll("iframe"),o=0;o<n.length;o++)if(n[o].contentWindow===i.source){var s=n[o].parentElement;s.style.paddingBottom="".concat(i.data.data[0].bottom,"px");break}}};window.addEventListener("message",e)}}function qe(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoSeoMetadataAppended){window.VimeoSeoMetadataAppended=!0;var e=function(i){if(M(i.origin)){var n=j(i.data);if(!(!n||n.event!=="ready"))for(var o=r.querySelectorAll("iframe"),s=0;s<o.length;s++){var l=o[s],p=l.contentWindow===i.source;if(re(l.src)&&p){var c=new H(l);c.callMethod("appendVideoMetadata",window.location.href)}}}};window.addEventListener("message",e)}}function Ne(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;if(!window.VimeoCheckedUrlTimeParam){window.VimeoCheckedUrlTimeParam=!0;var e=function(n){"console"in window&&console.error&&console.error("There was an error getting video Id: ".concat(n))},t=function(n){if(M(n.origin)){var o=j(n.data);if(!(!o||o.event!=="ready"))for(var s=r.querySelectorAll("iframe"),l=0;l<s.length;l++){var p=s[l],c=p.contentWindow===n.source;re(p.src)&&c&&function(){var g=new H(p);g.getVideoId().then(function(b){var m=new RegExp("[?&]vimeo_t_".concat(b,"=([^&#]*)")).exec(window.location.href);if(m&&m[1]){var $=decodeURI(m[1]);g.setCurrentTime($)}}).catch(e)}()}}};window.addEventListener("message",t)}}function Oe(){var r=function(){for(var i,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],o=0,s=n.length,l={};o<s;o++)if(i=n[o],i&&i[1]in document){for(o=0;o<i.length;o++)l[n[0][o]]=i[o];return l}return!1}(),e={fullscreenchange:r.fullscreenchange,fullscreenerror:r.fullscreenerror},t={request:function(n){return new Promise(function(o,s){var l=function c(){t.off("fullscreenchange",c),o()};t.on("fullscreenchange",l),n=n||document.documentElement;var p=n[r.requestFullscreen]();p instanceof Promise&&p.then(l).catch(s)})},exit:function(){return new Promise(function(n,o){if(!t.isFullscreen){n();return}var s=function p(){t.off("fullscreenchange",p),n()};t.on("fullscreenchange",s);var l=document[r.exitFullscreen]();l instanceof Promise&&l.then(s).catch(o)})},on:function(n,o){var s=e[n];s&&document.addEventListener(s,o)},off:function(n,o){var s=e[n];s&&document.removeEventListener(s,o)}};return Object.defineProperties(t,{isFullscreen:{get:function(){return!!document[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!document[r.fullscreenEnabled]}}}),t}var te,Me,$e,V,C,T,xe,F,W,P,H,se,ae=Y(()=>{"use strict";te=typeof window<"u"&&{}.toString.call(window)==="[object global]";Me=typeof Array.prototype.indexOf<"u",$e=typeof window<"u"&&typeof window.postMessage<"u";if(!te&&(!Me||!$e))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");V=typeof globalThis<"u"?globalThis:typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:{};(function(r){if(r.WeakMap)return;var e=Object.prototype.hasOwnProperty,t=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{value:1}).x===1}catch{}}(),i=function(o,s,l){t?Object.defineProperty(o,s,{configurable:!0,writable:!0,value:l}):o[s]=l};r.WeakMap=function(){function o(){if(this===void 0)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id",l("_WeakMap")),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}i(o.prototype,"delete",function(c){if(s(this,"delete"),!n(c))return!1;var g=c[this._id];return g&&g[0]===c?(delete c[this._id],!0):!1}),i(o.prototype,"get",function(c){if(s(this,"get"),!!n(c)){var g=c[this._id];if(g&&g[0]===c)return g[1]}}),i(o.prototype,"has",function(c){if(s(this,"has"),!n(c))return!1;var g=c[this._id];return!!(g&&g[0]===c)}),i(o.prototype,"set",function(c,g){if(s(this,"set"),!n(c))throw new TypeError("Invalid value used as weak map key");var b=c[this._id];return b&&b[0]===c?(b[1]=g,this):(i(c,this._id,[c,g]),this)});function s(c,g){if(!n(c)||!e.call(c,"_id"))throw new TypeError(g+" method called on incompatible receiver "+typeof c)}function l(c){return c+"_"+p()+"."+p()}function p(){return Math.random().toString().substring(2)}return i(o,"_polyfill",!0),o}();function n(o){return Object(o)===o}})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:V);C=Ie(function(r){(function(t,i,n){i[t]=i[t]||n(),r.exports&&(r.exports=i[t])})("Promise",V,function(){var t,i,n,o=Object.prototype.toString,s=typeof setImmediate<"u"?function(a){return setImmediate(a)}:setTimeout;try{Object.defineProperty({},"x",{}),t=function(a,u,f,d){return Object.defineProperty(a,u,{value:f,writable:!0,configurable:d!==!1})}}catch{t=function(u,f,d){return u[f]=d,u}}n=function(){var a,u,f;function d(v,w){this.fn=v,this.self=w,this.next=void 0}return{add:function(w,E){f=new d(w,E),u?u.next=f:a=f,u=f,f=void 0},drain:function(){var w=a;for(a=u=i=void 0;w;)w.fn.call(w.self),w=w.next}}}();function l(h,a){n.add(h,a),i||(i=s(n.drain))}function p(h){var a,u=typeof h;return h!=null&&(u=="object"||u=="function")&&(a=h.then),typeof a=="function"?a:!1}function c(){for(var h=0;h<this.chain.length;h++)g(this,this.state===1?this.chain[h].success:this.chain[h].failure,this.chain[h]);this.chain.length=0}function g(h,a,u){var f,d;try{a===!1?u.reject(h.msg):(a===!0?f=h.msg:f=a.call(void 0,h.msg),f===u.promise?u.reject(TypeError("Promise-chain cycle")):(d=p(f))?d.call(f,u.resolve,u.reject):u.resolve(f))}catch(v){u.reject(v)}}function b(h){var a,u=this;if(!u.triggered){u.triggered=!0,u.def&&(u=u.def);try{(a=p(h))?l(function(){var f=new q(u);try{a.call(h,function(){b.apply(f,arguments)},function(){m.apply(f,arguments)})}catch(d){m.call(f,d)}}):(u.msg=h,u.state=1,u.chain.length>0&&l(c,u))}catch(f){m.call(new q(u),f)}}}function m(h){var a=this;a.triggered||(a.triggered=!0,a.def&&(a=a.def),a.msg=h,a.state=2,a.chain.length>0&&l(c,a))}function $(h,a,u,f){for(var d=0;d<a.length;d++)(function(w){h.resolve(a[w]).then(function(k){u(w,k)},f)})(d)}function q(h){this.def=h,this.triggered=!1}function N(h){this.promise=h,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function _(h){if(typeof h!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var a=new N(this);this.then=function(f,d){var v={success:typeof f=="function"?f:!0,failure:typeof d=="function"?d:!1};return v.promise=new this.constructor(function(E,k){if(typeof E!="function"||typeof k!="function")throw TypeError("Not a function");v.resolve=E,v.reject=k}),a.chain.push(v),a.state!==0&&l(c,a),v.promise},this.catch=function(f){return this.then(void 0,f)};try{h.call(void 0,function(f){b.call(a,f)},function(f){m.call(a,f)})}catch(u){m.call(a,u)}}var O=t({},"constructor",_,!1);return _.prototype=O,t(O,"__NPO__",0,!1),t(_,"resolve",function(a){var u=this;return a&&typeof a=="object"&&a.__NPO__===1?a:new u(function(d,v){if(typeof d!="function"||typeof v!="function")throw TypeError("Not a function");d(a)})}),t(_,"reject",function(a){return new this(function(f,d){if(typeof f!="function"||typeof d!="function")throw TypeError("Not a function");d(a)})}),t(_,"all",function(a){var u=this;return o.call(a)!="[object Array]"?u.reject(TypeError("Not an array")):a.length===0?u.resolve([]):new u(function(d,v){if(typeof d!="function"||typeof v!="function")throw TypeError("Not a function");var w=a.length,E=Array(w),k=0;$(u,a,function(he,fe){E[he]=fe,++k===w&&d(E)},v)})}),t(_,"race",function(a){var u=this;return o.call(a)!="[object Array]"?u.reject(TypeError("Not an array")):new u(function(d,v){if(typeof d!="function"||typeof v!="function")throw TypeError("Not a function");$(u,a,function(E,k){d(k)},v)})}),_})}),T=new WeakMap;xe=["autopause","autoplay","background","byline","color","controls","dnt","height","id","interactive_params","keyboard","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];F=new WeakMap,W=new WeakMap,P={},H=function(){function r(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ee(this,r),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),e=e[0]),typeof document<"u"&&typeof e=="string"&&(e=document.getElementById(e)),!ke(e))throw new TypeError("You must pass either a valid element or a valid id.");if(e.nodeName!=="IFRAME"){var n=e.querySelector("iframe");n&&(e=n)}if(e.nodeName==="IFRAME"&&!M(e.getAttribute("src")||""))throw new Error("The player element passed isn\u2019t a Vimeo embed.");if(F.has(e))return F.get(e);this._window=e.ownerDocument.defaultView,this.element=e,this.origin="*";var o=new C(function(l,p){if(t._onMessage=function(b){if(!(!M(b.origin)||t.element.contentWindow!==b.source)){t.origin==="*"&&(t.origin=b.origin);var m=j(b.data),$=m&&m.event==="error",q=$&&m.data&&m.data.method==="ready";if(q){var N=new Error(m.data.message);N.name=m.data.name,p(N);return}var _=m&&m.event==="ready",O=m&&m.method==="ping";if(_||O){t.element.setAttribute("data-ready","true"),l();return}Se(t,m)}},t._window.addEventListener("message",t._onMessage),t.element.nodeName!=="IFRAME"){var c=ne(e,i),g=ie(c);oe(g,c,e).then(function(b){var m=Q(b,e);return t.element=m,t._originalElement=e,Ve(e,m),F.set(t.element,t),b}).catch(p)}});if(W.set(this,o),F.set(this.element,this),this.element.nodeName==="IFRAME"&&R(this,"ping"),P.isEnabled){var s=function(){return P.exit()};this.fullscreenchangeHandler=function(){P.isFullscreen?x(t,"event:exitFullscreen",s):z(t,"event:exitFullscreen",s),t.ready().then(function(){R(t,"fullscreenchange",P.isFullscreen)})},P.on("fullscreenchange",this.fullscreenchangeHandler)}return this}return Te(r,[{key:"callMethod",value:function(t){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new C(function(o,s){return i.ready().then(function(){x(i,t,{resolve:o,reject:s}),R(i,t,n)}).catch(s)})}},{key:"get",value:function(t){var i=this;return new C(function(n,o){return t=ee(t,"get"),i.ready().then(function(){x(i,t,{resolve:n,reject:o}),R(i,t)}).catch(o)})}},{key:"set",value:function(t,i){var n=this;return new C(function(o,s){if(t=ee(t,"set"),i==null)throw new TypeError("There must be a value to set.");return n.ready().then(function(){x(n,t,{resolve:o,reject:s}),R(n,t,i)}).catch(s)})}},{key:"on",value:function(t,i){if(!t)throw new TypeError("You must pass an event name.");if(!i)throw new TypeError("You must pass a callback function.");if(typeof i!="function")throw new TypeError("The callback must be a function.");var n=L(this,"event:".concat(t));n.length===0&&this.callMethod("addEventListener",t).catch(function(){}),x(this,"event:".concat(t),i)}},{key:"off",value:function(t,i){if(!t)throw new TypeError("You must pass an event name.");if(i&&typeof i!="function")throw new TypeError("The callback must be a function.");var n=z(this,"event:".concat(t),i);n&&this.callMethod("removeEventListener",t).catch(function(o){})}},{key:"loadVideo",value:function(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function(){var t=W.get(this)||new C(function(i,n){n(new Error("Unknown player. Probably unloaded."))});return C.resolve(t)}},{key:"addCuePoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:i})}},{key:"removeCuePoint",value:function(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function(t,i){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:i})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return P.isEnabled?P.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return P.isEnabled?P.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return P.isEnabled?C.resolve(P.isFullscreen):this.get("fullscreen")}},{key:"requestPictureInPicture",value:function(){return this.callMethod("requestPictureInPicture")}},{key:"exitPictureInPicture",value:function(){return this.callMethod("exitPictureInPicture")}},{key:"getPictureInPicture",value:function(){return this.get("pictureInPicture")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var t=this;return new C(function(i){if(W.delete(t),F.delete(t.element),t._originalElement&&(F.delete(t._originalElement),t._originalElement.removeAttribute("data-vimeo-initialized")),t.element&&t.element.nodeName==="IFRAME"&&t.element.parentNode&&(t.element.parentNode.parentNode&&t._originalElement&&t._originalElement!==t.element.parentNode?t.element.parentNode.parentNode.removeChild(t.element.parentNode):t.element.parentNode.removeChild(t.element)),t.element&&t.element.nodeName==="DIV"&&t.element.parentNode){t.element.removeAttribute("data-vimeo-initialized");var n=t.element.querySelector("iframe");n&&n.parentNode&&(n.parentNode.parentNode&&t._originalElement&&t._originalElement!==n.parentNode?n.parentNode.parentNode.removeChild(n.parentNode):n.parentNode.removeChild(n))}t._window.removeEventListener("message",t._onMessage),P.isEnabled&&P.off("fullscreenchange",t.fullscreenchangeHandler),i()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(t){return this.set("autopause",t)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getCameraProps",value:function(){return this.get("cameraProps")}},{key:"setCameraProps",value:function(t){return this.set("cameraProps",t)}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(t){return this.set("color",t)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(t){return this.set("currentTime",t)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(t){return this.set("loop",t)}},{key:"setMuted",value:function(t){return this.set("muted",t)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getQualities",value:function(){return this.get("qualities")}},{key:"getQuality",value:function(){return this.get("quality")}},{key:"setQuality",value:function(t){return this.set("quality",t)}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(t){return this.set("volume",t)}}]),r}();te||(P=Oe(),Re(),Ae(),qe(),Ne());se=H});var A,y,Le,le,ce,ue,ze,Ke,je=Y(()=>{A=B(me()),y=B(de());ae();_e();Pe();ye();pe();be();we();ve();ge();Le=function(r,e){let t=y.default.bind(r,e);if(window.youTubeApiIsReady)return t();window.ytQueue.push({cb:t,context:e})},le=function(r,e){this.playerIsReady=!1,this.queue=[],Le(function(){this.yt=new window.YT.Player(r.id,{events:{onReady:y.default.bind(function(){this.destroyed||(this.playerIsReady=!0,y.default.each(this.queue,function(t){y.default.isFunction(t.cb)&&t.cb()}))},this)}})},this),this.start_time=e&&e.start_time};le.prototype={addToQueue:function(r,e){let t=y.default.bind(r,e);if(this.playerIsReady)return t();this.queue.push({cb:t,context:e})},on:function(r,e,t){let i=y.default.bind(e,t||window),n={finish:0,play:1,pause:2};if(r==="ready"){this.addToQueue(i,this);return}this.addToQueue(function(){this.yt.addEventListener("onStateChange",function(o){n[r]===Number(o.data)&&i()})},this)},mute:function(){this.addToQueue(function(){this.yt.mute()},this)},unMute:function(){this.addToQueue(function(){this.yt.unMute()},this)},pause:function(){this.addToQueue(function(){this.yt&&this.yt.pauseVideo&&this.yt.pauseVideo()},this)},play:function(){this.addToQueue(function(){this.yt.playVideo()},this)},rewind:function(r){this.addToQueue(function(){this.yt.seekTo(r||0)},this)},loop:function(){this.rewind(this.start_time||.01)},getDuration:function(){return this.duration||(this.duration=this.yt.getDuration()),this.duration},getCurrentTime:function(){return this.yt.getCurrentTime&&this.yt.getCurrentTime()||0},checkLoop:function(){if(this.getDuration()-this.yt.getCurrentTime()<.5)return this.loop(),!0},destroy:function(){window.ytQueue=y.default.reject(window.ytQueue,function(r){return r.context===this}),delete this.yt,delete this.queue,this.destroyed=!0}};ce=function(r,e){this.player=new se(r),y.default.bindAll(this),this.id=r.id,this.start_time=e&&e.start_time};ce.prototype={on:function(r,e){switch(r){case"ready":this.player.ready().then(e);break;case"finish":this.player.on("ended",e);break;case"playProgress":this.player.on("timeupdate",e);break;case"loadProgress":this.player.on("progress",e);break;default:this.player.on(r,e)}},mute:function(){this.player.setMuted(!0)},unMute:function(){this.player.setMuted(!1)},pause:function(){this.player.pause().catch(r=>{console.error("error vimeo pause video",r.name)})},play:function(){this.player.play().catch(r=>{console.error("error vimeo play video",r.name)})},rewind:function(r){this.player.setCurrentTime(r||0).catch(e=>{console.error(`error vimeo setting current time ${r}`,e.name)})},loop:function(){this.start_time&&this.rewind(this.start_time)},getCurrentTime:function(r){this.player.getCurrentTime().then(r).catch(e=>{console.error("error vimeo getting current time",e.name)})},setColor:function(r){this.player.setColor(r).catch(e=>{console.error("error vimeo setting color:",e.name)})},destroy:function(){this.player&&this.player.destroy()}};ue={Vimeo:y.default.template('<iframe src="https://player.vimeo.com/video/<%=video_id%>?wmode=opaque&api=1&autopause=0&loop=<%=(loop)?1:0%>&muted=<%=(mute)?1:0%>&player_id=video_<%=id%><%=(!real)?"_c":""%>&title=<%=info?1:0%>&byline=<%=info?1:0%>&portrait=<%=info?1:0%>&color=<%=color%>" id="video_<%=id%><%=(!real)?"_c":""%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>'),YouTube:y.default.template('<iframe <% if (real) {%>id="yt_<%=video_id%>"<%}%> src="https://www.youtube.com/embed/<%=video_id%>?&wmode=opaque&enablejsapi=1&autohide=1&loop=<%=(loop)?1:0%>&showinfo=<%=info?1:0%>&theme=<%=theme%>&controls=<%=controls? 1: 0%><%=html5 ? "&html5=1" : ""%>&rel=0&vq=hd1080&playsinline=<%=(autoplay)?1:0%>" width="<%=w%>" height="<%=h%>" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen; encrypted-media"></iframe>')},ze=I.extend({RESTART_TIMEOUT:5e3,isPlaying:!1,initialize:function(r,e,t){return I.prototype.initialize.apply(this,arguments),this.$container=t,delete this.real,this},render:function(){return(this.provider_name||"").toLowerCase()==="vimeo"&&U.brokenVimeoThumbnailRegexp.test(this.thumbnail_url)&&(this.thumbnail_url=void 0),this.$container?this.setElement(this.$container):this.makeBox("video"),this.rendered=!0,this.setPosterInsteadOfVideo(),this},isValid:function(){return this.video_id&&this.provider_name},_needAutoStart:function(){return this.autoplay&&!X.PageVisibilityManager.isPageHidden()},start:function(){return I.prototype.start.call(this),this.onPlayFired=!1,RM.screenshot||!this.rendered||this.destroyed?this:(this.playerInitialized||(this.$el.append(this.getEmbed()),this.$iframe=this.$el.find("iframe"),this.$iframe.attr("id","video_"+this.id),this.player=this.createPlayer(this.provider_name,this.$iframe,{start_time:this.start_time,autoplay:this._needAutoStart()}),this.player&&this.player.on("ready",this.onPlayerReady),this.playerInitialized=!0),this.player&&this._needAutoStart()&&this.player.play(),this)},stop:function(){return I.prototype.stop.call(this),clearInterval(this.loopInterval),!RM.screenshot&&!this.destroyed&&this.player&&this.rendered&&(this.provider_name.toLowerCase()==="youtube"?(this._needAutoStart()&&this.player.pause(),!this._needAutoStart()&&this.onPlayFired&&this.player.pause()):this.player.pause()),this},destroy:function(){return clearInterval(this.loopInterval),this.player&&this.player.destroy(),this.player=null,I.prototype.destroy.apply(this,arguments)},setPosterInsteadOfVideo:function(){if(!this.custom_thumbnail&&!this.thumbnail_url){this.widgetIsLoaded();return}let r=this.getCustomThumbnail(this);this.custom_thumbnail&&r.url?this.setCustomPosterInsteadOfVideo():this.setEmbeddedPosterInsteadOfVideo()},setEmbeddedPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=(0,A.default)("<img/>").addClass("poster").css("opacity",0).appendTo(this.$el),this.$poster.on("load",y.default.bind(function(){this.$poster.css({width:"",height:""}).css("opacity",1);let r=this.$poster[0].width,e=this.$poster[0].height;this.aspect_poster||(this.aspect_poster=r/e),U.setVideoPosition({mag:this.page.mag,$container:this.$el,$media:this.$poster,provider:this.provider_name,aspect_poster:this.aspect_poster,aspect_real:this.aspect_real,controls_remove:!!this.$container}),setTimeout(this.widgetIsLoaded,100)},this)).on("error",y.default.bind(function(){if(this.oldUrl=this.thumbnail_url,this.thumbnail_url=this.thumbnail_url.replace("https://","http://"),this.oldUrl===this.thumbnail_url){this.widgetIsLoaded();return}this.setEmbeddedPosterInsteadOfVideo()},this)).attr("src",this.thumbnail_url)},setCustomPosterInsteadOfVideo:function(){this.$poster&&this.$poster.remove(),this.$poster&&this.$poster.off(),this.$poster=this.getCustomVideoPoster(this),this.$poster.css({visibility:"hidden",cursor:"pointer"}),this.$poster.on("click",()=>{this.player.play()}),this.$poster.appendTo(this.$el),setTimeout(this.widgetIsLoaded,100)},getCustomVideoPoster:function(r){let e=G("./common/video-player/play.svg"),t=(0,A.default)("<div/>").addClass("poster poster-custom"),i=this.getCustomThumbnail(r),n=i.unscaledOptimizedUrl||i.url;if(S.useLambdaUrl(i)||S.useLambdaUrlOldProjects(i,"video")){let s={width:r.w};i.originalW&&(s.originalW=i.originalW),i.originalH&&(s.originalH=i.originalH);let p=D.normalizeAnimations(r.animation).reduce((c,g)=>Math.max(c,D.maxScaleAnimation(g)),0);s.animationScale=p&&p/100,this.page?s.scale=Z.isOnForRatio(this.page.pageViewport,this.page.scale,this.mag.viewOpts)?this.page.scale:1:s.scale=RM.constructorRouter.zoom.getZoom(),n=S.getLambdaUrl(i,s)}t.css({width:r.w,height:r.h}),this.mag?.viewOpts?.lqip&&(this.$lqipImg=(0,A.default)("<div/>").addClass("lqip").css({"background-image":`url(${S.getLqipUrl(i)})`,width:this.w,height:this.h}).appendTo(this.$el));let o=new Image;return o.onload=function(){this.$poster&&this.$poster.css({"background-image":`url(${e}), url(${n})`,visibility:""}),this.$iframe&&this.$iframe.addClass("fade-out"),this.$lqipImg&&this.$lqipImg.css("opacity",0),setTimeout(()=>{this.$lqipImg&&this.$lqipImg.remove()},200)}.bind(this),o.src=n,t},getCustomThumbnail:function(r){let e=r.custom_thumbnail_url||"";return r.picture||{url:e,type:y.default.last(e.split("."))}},createPlayer:function(r,e,t){return r.toLowerCase()==="vimeo"?new ce(e[0],t):r.toLowerCase()==="youtube"?new le(e[0],t):null},getEmbed:function(r){if(r=r||this,y.default.defaults(r,{real:!0,w:640,h:320,theme:"dark",color:"3ab9ff",info:!1,controls:!0,id:y.default.uniqueId("video_"),origin:encodeURIComponent(window.location.protocol+"//"+window.location.hostname)}),Modernizr.safari&&(r.html5=!0),!r.video_id)return null;let e=ue[r.provider_name](r),t=this.getCustomThumbnail(r);if(!r.real&&r.custom_thumbnail&&t.url){let i=(0,A.default)(e).css("visibility","hidden");return this.getCustomVideoPoster(r).add(i)}return ue[r.provider_name](r)},onPlayerReady:function(){if(!(this.destroyed||!this.player)){if(this.$container&&(this.mute=!0),this.mute?this.player.mute():this.player.unMute(),!this.$container){let r=this.getCustomThumbnail(this);(!this.custom_thumbnail||!r.url)&&(this.$iframe&&this.$iframe.addClass("fade-out"),y.default.delay(y.default.bind(function(){this.$poster&&this.$poster.css("opacity",0)},this),125),y.default.delay(y.default.bind(function(){this.$poster&&(this.$poster.off(),this.$poster.remove())},this),250))}this.player.on("pause",this.onPause),this.player.on("play",this.onPlay),this.player.on("finish",this.onFinish),this.start_time&&(this.player.rewind(this.start_time),this.player.pause()),J.isDesktop()&&this.provider_name.toLowerCase()==="vimeo"&&this.player.on("playProgress",this.onProgress),this.started&&this._needAutoStart()&&this.player.play(),this.player.setColor&&this.player.setColor(this.color)}},onPlay:function(){this.isPlaying=!0,!this.$container&&RM.analytics&&RM.analytics.sendEvent("video_start",this.title+" / "+this.url),this.$iframe&&!this.$iframe.hasClass("fade-out")&&(this.$iframe.addClass("fade-out"),this.trigger("playStarted")),clearInterval(this.loopInterval),this.loop&&this.player.checkLoop&&(this.loopInterval=setInterval(y.default.bind(function(){this.player.checkLoop()&&(clearInterval(this.loopInterval),Modernizr.safari&&y.default.delay(function(){this.onPlay()}.bind(this),200))},this),100)),this.$poster&&(this.$poster.off(),this.$poster.remove()),this.onPlayFired=!0},onPause:function(){if(this.isPlaying=!1,this.provider_name==="Vimeo")this.player.getCurrentTime(y.default.bind(function(r){r=Math.round(r),!this.$container&&RM.analytics&&RM.analytics.sendEvent("video_complete",this.title+" / "+this.url+" / "+r+" sec.")},this));else if(this.provider_name==="YouTube"){let r=Math.round(this.player.getCurrentTime());!this.$container&&RM.analytics&&RM.analytics.sendEvent("video_complete",this.title+" / "+this.url+" / "+r+" sec.")}},onFinish(){this.isPlaying=!1},onProgress:function(r){this.onPlayFired||this.onPlay(),r.percent===1&&this.loop&&this.player.loop&&this.player.loop(),parseFloat(r.seconds)===0?this.restartTimeout||(this.restartTimeout=setTimeout(y.default.bind(function(){clearInterval(this.loopInterval),this.playerInitialized=!1,this.player&&this.player.destroy(),this.player=null,this.$iframe&&this.$iframe.remove(),!this.destroyed&&this.started&&this.start(),delete this.restartTimeout},this),this.RESTART_TIMEOUT)):(clearTimeout(this.restartTimeout),delete this.restartTimeout)},updateVideoFrameSize:function(r,e){this.$iframe&&this.$iframe.attr("width",r).attr("height",e),this.$poster&&this.$poster.css({width:r,height:e})}}),Ke=ze});export{se as a,ae as b,Ke as c,je as d};
