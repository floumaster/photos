import{a as ot}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-XCS4VYNL.js";import{c as Vo,e as et}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-25E2ZWGC.js";import{a as ko,b as st}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-EA6NQKZH.js";import{a as oo,b as Qo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-7ZGGP2E5.js";import{a as bo,g as qo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-W4T5AHCB.js";import{d as $o,e as rt}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-IZR32LLC.js";import{d as So,e as tt}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RP4BFHXR.js";import{h as go,j as Xo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-3NPNCLFW.js";import{c as vo,d as Zo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-MJAH2RAZ.js";import{a as xo,b as Ko}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RAXBYKBX.js";import{d as po,g as Do}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-EYCFSEYW.js";import{h as mo,s as X,w as fo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-3GVO5LHG.js";import{a as _o,b as Jo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-N5BFY7TV.js";import{a as Po,b as Co,k as Go}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-UKEV2NXO.js";import{a as v,d as Q}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-JIZBLOSS.js";import{b as uo,e as Lo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-HRLBPHLY.js";import{a as J,b as K,e as Yo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-G2NIBBXQ.js";import{d as yo,e as No}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-H4ZSG3VH.js";import{r as Z,s as Ho}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-E6LIND4G.js";import{a as G,h as Uo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-H5KNJBLH.js";import{a as h,d as ho}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-A6ELDBP5.js";import{B as j,C as s,D as $,E as R}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-OM2EU7QX.js";import{a as Y}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RQHQGLHW.js";import{b as q,c as Ao}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-XISRCAED.js";import{a as U,c as jo}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RFIBFC7T.js";import{a as F,d as O,f as N}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";function Ro({isMobile:o,children:i,isViewerNext:p,pageScale:g}){let c=(0,M.useRef)(null),u=0,t=0;if(p){let e=go(P=>P.meta.state);u=e.zoom,t=e.transform}else u=window.RM.constructorRouter?.zoom?.getZoom()||g||1,t=1;let{isRenderedOnClient:f}=yo(),[{top:r,left:y,isVisible:m},a]=(0,M.useState)({top:0,left:0,isVisible:!1});So(({x:e,y:P})=>{if(c.current){let l=Vo({slideshowBox:c.current,transform:t,zoom:u,pageX:e,pageY:P});l?a({...l.cursorPositionInElement,isVisible:!0}):m&&a({top:0,left:0,isVisible:!1})}},[c.current,u,t,m]);let b=(0,M.useMemo)(()=>({display:m?"block":"none",transform:`translate(${J`calc(${K(y)} / ${e=>p?e.pageScale:u.toString()})`}, ${J`calc(${K(r)} / ${e=>p?e.pageScale:u.toString()})`})`}),[p,m,y,r,u]);return o?null:s(v,{ref:c,width:"100%",height:"100%",position:"absolute",top:0,left:0,cursor:"none",overflow:"auto",zIndex:10,children:f?s(v,{position:"absolute",style:b,children:i}):null})}var M,Mo=F(()=>{"use strict";M=O(Y());Xo();No();Yo();Q();et();tt();R()});var nt,it,lt,to,kt,Rt,To=F(()=>{"use strict";nt={h:0,s:0,v:100,a:1},it=["Click","Hover","None"],lt=["Text","Icon"],to=78,kt={color:"2C0FB1",borders:0,opacity:100,radius:0,radius_rect_tl:0,radius_rect_tr:0,radius_rect_bl:0,radius_rect_br:0,radius_rect_independent:!1,video_opacity:100},Rt={position:"e",floating:!1,type:lt[0],playbackType:it[0],size:to,letterSpacing:0,controlColor:nt,fontWeight:400,fontStyle:"normal"}});function eo({isPlaying:o,inViewer:i=!1,dataModel:p,progress:g=100,onClick:c}){let{model:u}=(0,d.useContext)(bo),t=i&&p?p:u,f=t?.["font-family"]||po.fontFamily,r=(0,d.useMemo)(()=>t.custom_controls?.size||to,[t.custom_controls?.size]),y=(0,d.useMemo)(()=>{if(t?.custom_controls?.controlColor){let{r:W,g:_,b:k,a:C}=X(t.custom_controls.controlColor);return`rgba(${W}, ${_}, ${k}, ${C})`}return G.black},[t?.custom_controls?.controlColor]),m=(0,d.useMemo)(()=>{if(t?.custom_controls?.size&&t?.custom_controls?.fontWeight&&t?.custom_controls?.fontStyle&&f){let{fontStyle:W,size:_,fontWeight:k,letterSpacing:C,controlColor:z}=t.custom_controls;return{fontFamily:f,fontStyle:W,fontWeight:k,fontSize:_,letterSpacing:C===0?null:h(C),color:z}}},[f,t?.custom_controls?.size,t?.custom_controls?.letterSpacing,t?.custom_controls?.fontWeight,t?.custom_controls?.fontStyle,y]),a=(0,d.useMemo)(()=>{switch(t?.custom_controls?.position){case"nw":return{top:"1%",left:"1%"};case"n":return{top:"1%",left:"50%",transform:"translate(-50%, 0)"};case"ne":return{top:"1%",right:"1%"};case"w":return{top:"50%",left:"1%",transform:"translate(0, -50%)"};case"c":return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};case"e":return{top:"50%",right:"1%",transform:"translate(0, -50%)"};case"sw":return{bottom:"1%",left:"1%"};case"s":return{bottom:"1%",left:"50%",transform:"translate(-50%, 0)"};case"se":return{bottom:"1%",right:"1%"};default:return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}},[t?.custom_controls?.position]),b=(0,d.useMemo)(()=>t?.custom_controls?.type,[t?.custom_controls?.type]),e=r/2-10,P=3.14*e*2,l=h(Math.round(P*((100-Math.min(g<=0?100:g,100))/100))),{r:T,g:S,b:A}=(0,d.useMemo)(()=>X(t?.custom_controls?.controlColor||G.black),[t?.custom_controls?.controlColor]),V=(0,d.useMemo)(()=>i?t?.custom_controls?.floating?"none":"pointer":"default",[i,t?.custom_controls?.floating]);return $(v,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",left:a.left,top:a.top,right:a.right,bottom:a.bottom,transform:a.transform,onClick:c&&c,overflow:"auto",zIndex:10,children:[b==="Icon"&&$(j,{children:[$("svg",{width:r,height:r,viewBox:`-${r*.125} -${r*.125} ${r*1.25} ${r*1.25}`,version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(-90deg)",cursor:V,pointerEvents:"all"},children:[s("circle",{r:e,cx:`${r/2}`,cy:`${r/2}`,fill:"transparent",stroke:`rgba(${T}, ${S}, ${A}, 0.5)`,strokeWidth:`${Math.round(r/23)}`,strokeDasharray:P,style:{transition:"stroke-dashoffset 1s linear",strokeDashoffset:0}}),s("circle",{r:e,cx:`${r/2}`,cy:`${r/2}`,fill:"transparent",stroke:y,strokeWidth:`${Math.round(r/23)}`,strokeDasharray:P,style:{transition:"stroke-dashoffset 1s linear",strokeDashoffset:l}})]}),o?s(v,{display:"flex",position:"absolute",marginLeft:"-1px",children:s(ct,{color:y,size:r})}):s(v,{display:"flex",position:"absolute",marginTop:r<=40?"1px":"3px",marginLeft:r<=40?"2px":"4px",children:s(at,{color:y,size:r})})]}),b==="Text"&&s(uo,{pointerEvents:"all",padding:"16px",fontSize:m?.fontSize,letterSpacing:m?.letterSpacing,color:y,fontFamily:f,fontWeight:m?.fontWeight,fontStyle:m?.fontStyle,cursor:V,children:o?"Pause":"Play"})]})}var d,at,ct,Wo=F(()=>{"use strict";Q();Lo();Uo();d=O(Y());fo();qo();To();ho();Do();R();at=(0,d.memo)(({color:o,size:i})=>s("svg",{width:`${i/3.8}`,height:`${i/3.8}`,viewBox:"0 0 12 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{d:"M1 10.8294V3.17058C1 1.83807 2.45367 1.01502 3.59628 1.70059L9.97859 5.52998C11.0883 6.19581 11.0883 7.80412 9.97859 8.46995L3.59628 12.2993C2.45366 12.9849 1 12.1619 1 10.8294Z",fill:o,stroke:o})})),ct=(0,d.memo)(({color:o,size:i})=>s("svg",{width:`${i/3.5}`,height:`${i/3.5}`,viewBox:"0 0 12 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 1C2 0.447715 1.55228 0 1 0C0.447715 0 0 0.447715 0 1V17C0 17.5523 0.447715 18 1 18C1.55228 18 2 17.5523 2 17V1ZM12 1C12 0.447715 11.5523 0 11 0C10.4477 0 10 0.447715 10 1V17C10 17.5523 10.4477 18 11 18C11.5523 18 12 17.5523 12 17V1Z",fill:o})}))});function ft(o,i){return o.split(" ").map(c=>{let u=parseInt(c);return Math.max(0,u-i)+"px"}).join(" ")}function yt(o,i){let p={};if(o.video_styles){let{color:g,borders:c,opacity:u,radius:t,radius_rect_tl:f,radius_rect_tr:r,radius_rect_br:y,radius_rect_bl:m,radius_rect_independent:a,video_opacity:b}=o.video_styles,e=mo(g,u);Object.assign(p,{display:"flex",justifyContent:"center",alignItems:"center",borderRadius:a?`${h(f)} ${h(r)} ${h(y)} ${h(m)}`:h(t),boxShadow:`0px 0px 0px ${h(c)} rgba(${e.r}, ${e.g}, ${e.b}, ${e.a}) inset`,opacity:i?b?b/100:1:0,overflow:"hidden",boxSizing:"border-box"})}return p}var Bo,n,ut,pt,mt,dt,ro,ie,ht=F(()=>{"use strict";Q();Go();Jo();jo();Bo=O(ot()),n=O(Y());fo();Ao();Mo();Wo();Qo();ho();Zo();rt();st();Ho();Ko();R();ut=Po(v),pt=Z(ko,{excludeProps:["providerName"]})`
  object-fit: cover;
  width: 100%;
  height: 100%;
  scale: ${o=>o.providerName==="YouTube"?"1.35":"unset"};
`,mt=Z(v,{excludeProps:["providerName","width","height","borderRadius"]})`
  div:has(> video) {
    position: absolute;
  }
  video {
    object-fit: ${o=>o.providerName==="File"?"cover":"contain"};
    width: ${o=>h(o.width)};
    height: ${o=>h(o.height)};
    border-radius: ${o=>o.borderRadius};
  }
`,dt=(0,n.forwardRef)(({widget:o,isVisible:i=!1,useLqip:p=!1,isTabVisible:g,isViewerNext:c=!1,playerRef:u,width:t,height:f,autoplay:r,pageScale:y},m)=>{let a=o.provider_name==="File"?`${q.readymag_video_files_bucket}/${o.url}`:o.url,b=o.custom_controls?.playbackType,e=o.controls&&o.controls_type==="custom",P=o.url&&oo.isYoutube(a)?oo.getYoutubeIdFromUrl(o.url):"",[l]=(0,n.useState)(()=>new ro),{isPlaying:T}=l.useSnapshot(),[S,A]=(0,n.useState)(!1),[V,W]=(0,n.useState)(),[_,k]=(0,n.useState)(()=>o.w),[C,z]=(0,n.useState)(()=>o.h),H=yt(o,S),so=ft(H.borderRadius,o.video_styles?.borders),w=(0,n.useMemo)(()=>!!((typeof r<"u"?r:o.autoplay)&&g),[r,g,o.autoplay]);(0,n.useEffect)(()=>{typeof t=="number"&&k(t),typeof f=="number"&&z(f)},[t,f]),(0,n.useEffect)(()=>{k(o.w),z(o.h)},[o.w,o.h]),(0,n.useImperativeHandle)(u,()=>l,[l]),(0,n.useEffect)(()=>{w&&i&&l.play(),!i&&l.stop()},[i,w]);let{isCustomThumbnail:x,thumbnail:B}=(0,n.useMemo)(()=>o.picture&&o.custom_thumbnail?{isCustomThumbnail:!0,thumbnail:o.picture}:{isCustomThumbnail:!1,thumbnail:{url:o.provider_name==="File"?`${q.readymag_video_files_bucket}/${o.thumbnail_url}`:o.thumbnail_url,type:"jpg"}},[o.picture,o.custom_thumbnail,o.provider_name,o.thumbnail_url]),[no,io]=(0,n.useState)(!1),Io=(0,n.useMemo)(()=>S?x?w?!1:!no:!1:!0,[x,S,no,w]),lo=c?!1:window.RM.constructorRouter&&!window.RM.constructorRouter.preview;function zo(){!e&&io(!0),L()}let L=(0,n.useCallback)(()=>{l.play(),l.events.dispatchEvent(new CustomEvent("start",{detail:`${o.title} / ${a}`}))},[a,o.title,l]),ao=(0,n.useCallback)(()=>{l.stop(),l.events.dispatchEvent(new CustomEvent("stop",{detail:`${o.title} / ${a}`}))},[a,o.title,l]),D=()=>{lo||(l.toggle(),io(!0))};function wo(){A(!0),l.events.dispatchEvent(new Event("ready"))}function Eo(){return e&&o?.custom_controls?.floating?s(Ro,{isViewerNext:c,pageScale:y,children:s(eo,{isPlaying:T,dataModel:o,inViewer:!0,progress:V?.played&&V.played*100,onClick:D})}):s(eo,{isPlaying:T,dataModel:o,inViewer:!0,progress:V?.played&&V.played*100,onClick:D})}let Fo=(0,n.useMemo)(()=>({pointerEvents:e?"none":"all",position:"relative",...H}),[H,e]),co=(0,n.useMemo)(()=>B.lambdaUrl||B.url||xo.getLqipUrl(B),[B]),Oo=(0,n.useMemo)(()=>typeof o.color=="string"?o.color.slice(1,-2):"000",[o.color]),E=(0,n.useMemo)(()=>{let I=o.video_styles?.borders?2*o.video_styles?.borders:0;return{width:Math.round(_-I+1),height:Math.round(C-I+1)}},[o.video_styles?.borders,_,C]);return $(mt,{ref:m,onMouseOver:()=>b==="Hover"&&!e&&L(),onMouseLeave:()=>b==="Hover"&&!e&&ao(),onClick:()=>b==="Click"&&!o.controls&&!e&&D(),providerName:o.provider_name,style:Fo,width:Math.round(_),height:Math.round(C),borderRadius:so,children:[s(Co,{children:Io&&s(ut,{width:E.width,height:E.height,borderRadius:so,overflow:"hidden",top:0,left:0,zIndex:10,pointerEvents:lo?"none":"all",objectFit:"cover",initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},role:x?"button":void 0,cursor:x?"pointer":void 0,onClick:x?zo:void 0,children:(x||!S)&&$(j,{children:[x&&!e&&s(v,{position:"absolute",top:"50%",left:"50%",zIndex:10,transform:"translate(-50%, -50%)",children:s(_o,{width:65,height:65,color:"white"})}),c?s($o,{isVisible:i,data:{_id:o._id,w:_,h:C,picture:B,size:"cover"},useLqip:p,pointerEvents:"none"}):s(pt,{providerName:o.provider_name,src:co,alt:"video custom thumbnail"})]})})}),!U()&&s(Bo.default,{width:E.width,height:E.height,url:a,muted:o.mute,loop:o.loop,onReady:wo,onPlay:L,onPause:ao,playing:T,controls:o.controls&&o.controls_type==="default",onProgress:I=>W(I),playsinline:!0,config:{youtube:{playerVars:{wmode:"opaque",enablejsapi:1,autohide:1,showinfo:o.info,theme:o.theme,html5:1,rel:0,vq:"hd1080",controls:1},embedOptions:{videoId:P}},vimeo:{playerOptions:{wmode:"opaque",api:1,title:o.info,byline:o.info,portrait:o.info,color:Oo,controls:!0,muted:o.mute}},file:{attributes:{poster:x?null:co}}}}),!U()&&S&&e&&Eo()]})});ro=class extends vo{constructor(){super();N(this,"events");N(this,"isPlaying",!1);this.events=this.detach(new EventTarget)}play(){this.isPlaying=!0}stop(){this.isPlaying=!1}toggle(){this.isPlaying?this.stop():this.play()}},ie=dt});export{nt as a,it as b,lt as c,kt as d,Rt as e,To as f,ie as g,ht as h};
