import{b as j,e as ae}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-ZKNFSN7H.js";import{h as M,j as ce}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-3NPNCLFW.js";import{a as m,b as me}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RAXBYKBX.js";import{h as H,u as O,w as se}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-3GVO5LHG.js";import{a as K,b as x,k as T}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-UKEV2NXO.js";import{a as _,d as ue}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-JIZBLOSS.js";import{b as U,d as W,e as D}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-G2NIBBXQ.js";import{c as b,d as k}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-EEMRR3F6.js";import{a as B,b as le}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-HBHH3JOR.js";import{r as C,v as E}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-E6LIND4G.js";import{c as q}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-4BVKFQ7G.js";import{C as l,D as $,E as S}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-OM2EU7QX.js";import{a as g}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RQHQGLHW.js";import{A,l as L,z as v}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RWHY6I2B.js";import{a as h,c as pe}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RFIBFC7T.js";import{a,d as P}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";function w({children:e,withDelay:r,withTransition:o,...t}){return o?l(G,{...t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{delay:r?.1:0,opacity:{duration:.2}},children:e}):l(G,{...t,children:e})}var de,G,X=a(()=>{"use strict";E();T();S();de=C("div")({width:"100%",height:"100%",position:"absolute",top:0,left:0}),G=K(de)});function fe(e){let r=typeof e.opacity=="number"?e.opacity:1,o=e.border_radius_independent?[e.border_radius_tl,e.border_radius_tr,e.border_radius_br,e.border_radius_bl].map(s=>U(s||0)).join(" "):U(e.border_radius_max?9999:e.border_radius||0),t=O(H(e.border_color||"000000",typeof e.border_color_opacity>"u"?1:e.border_color_opacity/100)),c=typeof e.border_size=="number"&&e.border_size>0?`inset 0 0 0 ${e.border_size}px ${t}`:"none",n=e.is_full_height?e.fhpos?e.fhpos:50:void 0,u=e.is_full_width?e.fwpos?e.fwpos:50:void 0,i=n!==void 0||u!==void 0,p=i?`${n??50}% ${u??50}%`:void 0;return{boxShadow:c,opacity:r,borderRadius:o,backgroundSize:e.size||(i?"cover":"100% 100%"),...p?{backgroundPosition:p}:void 0}}function N(e){return(0,Y.useMemo)(()=>fe(e),[e])}var Y,Q=a(()=>{"use strict";Y=P(g());D();se()});function Pe(e){return{width:e.w,height:e.h,cropX:e.cropX,cropY:e.cropY,cropW:e.cropW,cropH:e.cropH,originalW:e.originalW,originalH:e.originalH,isStretched:e.is_full_width||e.is_full_height}}function F({data:e,scale:r,isExportedProject:o}){let t=e.picture;if(t.finalUrl?.split(".").pop()==="svg")return{url:t.finalUrl};if(!o&&(m.useLambdaUrl(t)||m.useLambdaUrlOldProjects(t))){let p={...Pe(e),scale:r},s=m.getSrcset(t,{...p,asArray:!0});return s?.length?{imgSet:s}:{url:m.getLambdaUrl(t,p)}}let c=t.finalUrl||t.unscaledOptimizedUrl||t.unscaledUrl,n=t.final2xUrl,u=t.final2xUrl&&(t.unscaledOptimizedUrl||t.final3xUrl),i=v([{url:c,dpr:1},{url:n,dpr:2},{url:u,dpr:3}],"url").filter(({url:p})=>!!p);return i.length?i.length===0?{url:i[0].url}:{imgSet:i}:{url:t.effectUrl||t.editedVectorUrl||t.unscaledOptimizedUrl||t.unscaledUrl||t.url}}function ge(e){return m.getLqipUrl(e.picture,{cropX:e.cropX,cropY:e.cropY,cropW:e.cropW,cropH:e.cropH,originalW:e.originalW,originalH:e.originalH})}function ye({useLqip:e,data:r,...o}){return e?r.blurHash&&r.w!==void 0&&r.h!==void 0?{url:m.decodeBlurHash(r.blurHash,r.w,r.h)}:{url:ge(r)}:F({...o,data:r,scale:1})}function J(e){let[r]=(0,z.useState)(()=>F(e)),[o]=(0,z.useState)(()=>ye(e));return b(()=>({originalImage:r,previewImage:o}),[r,o])}var z,V=a(()=>{"use strict";A();z=P(g());k();me()});function Z(e,r){let[o,t]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{(e||r)&&!o&&t(!0)},[e,r,o]),{bindLazyLoad:(0,d.useCallback)(n=>e||r||o?{style:{backgroundImage:`-webkit-image-set(${n.imageSet})`}}:{"data-lazy-image-set":n.imageSet},[e,r,o])}}var d,ee=a(()=>{"use strict";d=P(g())});function re(e){return h()?!1:window.rmLqipState?.get(e)||!1}function R(e,r){return{[`data-${Se}`]:e,[`data-${be}`]:r}}var Se,be,I=a(()=>{"use strict";pe();h()||(window.rmLqipState=window.rmLqipState||new Map);Se="preload-key",be="preload-id"});function oe(e){return{wasPreloaded:(0,te.useRef)(re(e)).current}}var te,ie=a(()=>{"use strict";te=P(g());I()});function ne({picture:e,style:r,lazyLoad:o,isVisible:t,...c}){let n=b(()=>e.imgSet?e.imgSet.map(({url:s,dpr:y})=>`${W(s)} ${y}x`).join(", "):e.url?W(e.url):"",[e]),{bindLazyLoad:u}=Z(!o,t),i=u({imageSet:n});return l(_,{role:"img",width:"100%",height:"100%",fetchpriority:"low",backgroundPosition:"center",backgroundRepeat:"no-repeat",...c,...i,css:q(r)})}function nr({data:e,useLqip:r,isVisible:o,pointerEvents:t}){let c=M(s=>s.meta.state.scale),n=j(s=>s.meta.isExportedProject),{previewImage:u,originalImage:i}=J({data:e,useLqip:r,scale:c,isExportedProject:n});if(!i.url&&!i.imgSet)return console.error(new B("Picture is broken",{id:e._id})),null;let p=N(e);return l(he,{data:e,style:p,useLqip:r,isVisible:o,pointerEvents:t,previewImage:u,originalImage:i})}var f,he,Le=a(()=>{"use strict";f=P(g());A();E();ue();T();k();D();ce();X();le();ae();Q();V();ee();ie();I();S();he=(0,f.memo)(function({data:r,useLqip:o,style:t,pointerEvents:c,originalImage:n,previewImage:u,isVisible:i}){let[p,s]=(0,f.useState)(!1);(0,f.useEffect)(()=>{s(!0)},[]);let{wasPreloaded:y}=oe(r._id);return $(_,{width:"100%",height:"100%",position:"relative",borderRadius:t.borderRadius,pointerEvents:c,children:[l(x,{initial:!1,children:!y&&o&&(!p||!i)?l(w,{withDelay:typeof r.opacity>"u"||r.opacity===1,withTransition:o,...R("preview",r._id),children:l(ne,{isVisible:i,"aria-label":r.alt?L(r.alt):void 0,picture:u,style:t,transition:"opacity .2s",filter:"blur(20px)",transform:"scale(1.05)",lazyLoad:!0})},"lqip"):null}),l(x,{children:l(w,{withTransition:y?!1:o,withDelay:!0,...o&&i?R("original",r._id):{},children:l(ne,{isVisible:i,"aria-label":r.alt?L(r.alt):void 0,picture:n,style:t,lazyLoad:!0})},"original")})]})})});export{F as a,V as b,ne as c,nr as d,Le as e};
