import{a as h,b as T}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-7ISZFS5L.js";import{a as i,b as g}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-ZER6KXXX.js";import{a as d,b as f}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-LNVSJQDA.js";import{a as l,b as p}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-BWWKPZRF.js";import{b as _}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-ZLNLFSQG.js";import{a as n,d as w}from"https://st-p.rmcdn.net/8e59565c/dist/c/c-AUVFGGVF.js";var m,c=n(()=>{"use strict";g();m={"template-constructor-block-twitter-type_tweet":i`
	<a href="https://twitter.com/share" class="twitter-share-button" data-url="<%-url%>" data-lang="en" data-size="<%=large_button ? 'large' : 'medium'%>" data-text="<%- typeof text !== 'undefined' ? text : ''%>">Tweet</a>
	<div class="overlay"></div>
`,"template-constructor-block-twitter-type_follow":i`
	<a href="https://twitter.com/<%-username ? username : 'Readymag'%>" class="twitter-follow-button" data-show-count="false" data-show-screen-name="<%=show_name ? 'true' : 'false'%>" data-lang="en" data-size="<%=large_button ? 'large' : 'medium'%>">Follow @<%-username%></a>
	<div class="overlay"></div>
`,"template-constructor-block-twitter-type_hashtag":i`
	<a href="https://twitter.com/intent/tweet?button_hashtag=<%-hash%>" class="twitter-hashtag-button" data-size="<%=large_button ? 'large' : 'medium'%>">Tweet #<%-hash%></a>
	<div class="overlay"></div>
`,"template-constructor-block-twitter-type_timeline":i`
	<%=code%>
	<div class="overlay"></div>
`,"template-constructor-block-twitter-type_embed":i`
	<%=code%>
	<div class="overlay"></div>
`}});var r,y,O,I=n(()=>{r=w(_());T();f();p();c();y=h.extend({CONTENT_WAIT_TICK:100,CONTENT_WAIT_MAX_TICKS:20,CONTENT_IMG_WAIT:1e3,DO_NOT_WAIT_FOR_PRELOAD:!0,render:function(){this.makeBox("widget-twitter"),this.rendered=!0;let e,t;return this.current_type?(t=this[this.current_type],t.use_own_url==="mag"?t.url=this.page.mag.getUrl():(t.use_own_url==="page"||!t.url)&&(t.url=this.page.getUrl()),RM.screenshot||(t.text=d.getFinalShare(this.page,r.default.extend(this.page.mag.model.toJSON(),{user:this.page.mag.user}),{forProject:t.use_own_url==="mag",customDomain:RM.common.isDomainViewer}).tweet),e=m["template-constructor-block-twitter-"+this.current_type],this.$el.html(e(t)),this.current_type==="type_timeline"&&this.$el.find("a").attr({width:this.w,height:this.h}),l.initTwitterAPI(function(){this.destroyed||(window.twttr&&window.twttr.widgets&&r.default.isFunction(window.twttr.widgets.load)&&window.twttr.widgets.load(),(0,r.default)(["type_timeline","type_embed"]).contains(this.current_type)?this.waitForTwitterContent():this.widgetIsLoaded())}.bind(this)),this):(this.widgetIsLoaded(),this)},waitForTwitterContent:function(){let e,t=0,a,s=!1,o,u={type_timeline:".timeline-Widget",type_embed:"blockquote.tweet"};clearInterval(e),e=setInterval(r.default.bind(function(){if(t++,this.destroyed){clearInterval(e);return}a=this.$el.find("iframe"),a.length==1&&(o=u[this.current_type],s=a.contents().find(o).length>0),(s||t>this.CONTENT_WAIT_MAX_TICKS)&&(this.current_type=="type_embed"&&a.css({margin:0,"max-width":"100%"}),this.current_type=="type_timeline"&&a.css({width:"100%",height:"100%!important","max-width":"100%"}),clearInterval(e),setTimeout(r.default.bind(function(){this.widgetIsLoaded()},this),this.CONTENT_IMG_WAIT))},this),this.CONTENT_WAIT_TICK)}}),O=y});export{m as a,c as b,O as c,I as d};
