import{b as mt,f as yt,g as hi}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-A73AYJN4.js";import{a as Is}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-RQHQGLHW.js";import{a as S,b as Ht,c as Ss,d as Xt}from"https://st-p.rmcdn.net/aab27dd3/dist/c/c-QHP3NFJY.js";var vi,gi,mi,Ar=S(()=>{"use strict";(function(t){t.Create="create",t.PageView="pageview",t.ProfileSettings="profileSettings",t.ProfileClick="profileClick",t.ProfileSettingsUsage="profileSettingsUsage",t.ProfileBanner="profileBanner"})(vi||(vi={}));(function(t){t.Publish="publish",t.Preview="preview",t.WidgetAdd="widgetAdd",t.WidgetTotal="widgetTotal",t.WidgetFeature="widgetFeature",t.WidgetMisc="widgetMisc",t.OpenProject="openProject",t.ViewportFeature="viewportFeature",t.SettingsProject="settingsProject",t.SettingsViewer="settingsViewer",t.SettingsGeneral="settingsGeneral",t.Template="template",t.MyTemplates="myTemplates",t.HelpTour="helpTour",t.HelpTourProgress="helpTourProgress",t.HelpTourLeave="helpTourLeave",t.EditorTips="editorTips",t.EditorTips2="editorTips2",t.EditorHelp="editorHelp",t.EditorActions="editorActions",t.ContentEditMode="contentEditMode",t.Zendesk="zendesk",t.BlocksMode="blocksMode",t.CommentsMode="commentsMode",t.CommentAdd="commentAdd",t.Popup="popup",t.SettingsLayers="settingsLayers",t.ActionsMade="actionsMade",t.AnimationAddStep="animationAddStep",t.AnimationAddTrigger="animationAddTrigger",t.AnimationLoad="animationLoad",t.AnimationSettings="animationSettings",t.AnimationPresetSelected="animationPresetSelected",t.SettingsPreviewViewer="settingsPreviewViewer",t.PresetAdd="presetAdd",t.PresetClick="presetClick",t.PresetMisc="presetMisc",t.PresetSave="presetSave",t.WidgetArrange="widgetArrange",t.WhatsNewPopup="whatsNewPopup",t.GroupEdit="groupEdit",t.ExamplesSubmit="examplesSubmit",t.WidgetLottie="widgetLottie"})(gi||(gi={}));(function(t){t.UpgradeBanner="upgradeBanner"})(mi||(mi={}))});var yi,_i=S(()=>{"use strict";(function(t){t[t.Registration=11192105]="Registration",t[t.FirstPurchase=11192113]="FirstPurchase",t[t.BookDemo=11192121]="BookDemo"})(yi||(yi={}))});var Ei=Ht((bi,wi)=>{"use strict";(function(t){var e;if(typeof define=="function"&&define.amd&&(define(t),e=!0),typeof bi=="object"&&(wi.exports=t(),e=!0),!e){var r=window.Cookies,n=window.Cookies=t();n.noConflict=function(){return window.Cookies=r,n}}})(function(){function t(){for(var n=0,i={};n<arguments.length;n++){var o=arguments[n];for(var a in o)i[a]=o[a]}return i}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}function r(n){function i(){}function o(c,f,s){if(!(typeof document>"u")){s=t({path:"/"},i.defaults,s),typeof s.expires=="number"&&(s.expires=new Date(new Date*1+s.expires*864e5)),s.expires=s.expires?s.expires.toUTCString():"";try{var u=JSON.stringify(f);/^[\{\[]/.test(u)&&(f=u)}catch{}f=n.write?n.write(f,c):encodeURIComponent(String(f)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),c=encodeURIComponent(String(c)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var d="";for(var l in s)s[l]&&(d+="; "+l,s[l]!==!0&&(d+="="+s[l].split(";")[0]));return document.cookie=c+"="+f+d}}function a(c,f){if(!(typeof document>"u")){for(var s={},u=document.cookie?document.cookie.split("; "):[],d=0;d<u.length;d++){var l=u[d].split("="),p=l.slice(1).join("=");!f&&p.charAt(0)==='"'&&(p=p.slice(1,-1));try{var h=e(l[0]);if(p=(n.read||n)(p,h)||e(p),f)try{p=JSON.parse(p)}catch{}if(s[h]=p,c===h)break}catch{}}return c?s[c]:s}}return i.set=o,i.get=function(c){return a(c,!1)},i.getJSON=function(c){return a(c,!0)},i.remove=function(c,f){o(c,"",t(f,{expires:-1}))},i.defaults={},i.withConverter=r,i}return r(function(){})})});var Nr,Dr,Ur,Si,Ii,zt=S(()=>{"use strict";(function(t){t.Joined="Joined",t.CancelledSubscription="Cancelled Subscription",t.UserFree="User (free)"})(Nr||(Nr={}));(function(t){t.WhatsNewImpression="whatsnew_impression",t.WhatsNewClick="whatsnew_click",t.WhatsNewClose="whatsnew_close"})(Dr||(Dr={}));(function(t){t.ProfileBannerImpression="profile_banner_impression",t.ProfileBannerClick="profile_banner_click",t.ProfileBannerClose="profile_banner_close",t.ChangePlanRequest="change_plan_request_click"})(Ur||(Ur={}));(function(t){t.PricingSubscribeClick="pricing_subscribe_click",t.ContactSalesClick="pricing_contact_sales_click",t.PricingGetStartedClick="pricing_free_get_started_click",t.PricingPersonalSubscribeClick="pricing_personal_subscribe_click",t.PricingFreelancerSubscribeClick="pricing_freelancer_subscribe_click",t.PricingStudioSubscribeClick="pricing_studio_subscribe_click",t.PricingBusinessSubscribeClick="pricing_business_subscribe_click"})(Si||(Si={}));Ii=t=>{if(Object.values(Nr).includes(t))return"Basic User Actions";if(Object.values(Dr).includes(t))return"Process Actions";if(Object.values(Ur).includes(t))return"Profile Actions"}});var Ti,Ts=S(()=>{"use strict";Ti=function(){return Ti=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ti.apply(this,arguments)}});function Ot(){return typeof window=="object"&&window?.document!==void 0}var kr,Oi=S(()=>{"use strict";kr=function(){var t;if(Ot()){var e=window,r=Array;if(e.Prototype!==void 0&&((t=r.prototype)===null||t===void 0?void 0:t.toJSON)!==void 0)return delete r.prototype.toJSON,!0}return!1}});var xi=S(()=>{"use strict";Oi()});var Ci=Ht((Pi,Yt)=>{"use strict";(function(t){"use strict";function e(v,O){var g=(v&65535)+(O&65535),A=(v>>16)+(O>>16)+(g>>16);return A<<16|g&65535}function r(v,O){return v<<O|v>>>32-O}function n(v,O,g,A,D,j){return e(r(e(e(O,v),e(A,j)),D),g)}function i(v,O,g,A,D,j,W){return n(O&g|~O&A,v,O,D,j,W)}function o(v,O,g,A,D,j,W){return n(O&A|g&~A,v,O,D,j,W)}function a(v,O,g,A,D,j,W){return n(O^g^A,v,O,D,j,W)}function c(v,O,g,A,D,j,W){return n(g^(O|~A),v,O,D,j,W)}function f(v,O){v[O>>5]|=128<<O%32,v[(O+64>>>9<<4)+14]=O;var g,A,D,j,W,y=1732584193,_=-271733879,w=-1732584194,b=271733878;for(g=0;g<v.length;g+=16)A=y,D=_,j=w,W=b,y=i(y,_,w,b,v[g],7,-680876936),b=i(b,y,_,w,v[g+1],12,-389564586),w=i(w,b,y,_,v[g+2],17,606105819),_=i(_,w,b,y,v[g+3],22,-1044525330),y=i(y,_,w,b,v[g+4],7,-176418897),b=i(b,y,_,w,v[g+5],12,1200080426),w=i(w,b,y,_,v[g+6],17,-1473231341),_=i(_,w,b,y,v[g+7],22,-45705983),y=i(y,_,w,b,v[g+8],7,1770035416),b=i(b,y,_,w,v[g+9],12,-1958414417),w=i(w,b,y,_,v[g+10],17,-42063),_=i(_,w,b,y,v[g+11],22,-1990404162),y=i(y,_,w,b,v[g+12],7,1804603682),b=i(b,y,_,w,v[g+13],12,-40341101),w=i(w,b,y,_,v[g+14],17,-1502002290),_=i(_,w,b,y,v[g+15],22,1236535329),y=o(y,_,w,b,v[g+1],5,-165796510),b=o(b,y,_,w,v[g+6],9,-1069501632),w=o(w,b,y,_,v[g+11],14,643717713),_=o(_,w,b,y,v[g],20,-373897302),y=o(y,_,w,b,v[g+5],5,-701558691),b=o(b,y,_,w,v[g+10],9,38016083),w=o(w,b,y,_,v[g+15],14,-660478335),_=o(_,w,b,y,v[g+4],20,-405537848),y=o(y,_,w,b,v[g+9],5,568446438),b=o(b,y,_,w,v[g+14],9,-1019803690),w=o(w,b,y,_,v[g+3],14,-187363961),_=o(_,w,b,y,v[g+8],20,1163531501),y=o(y,_,w,b,v[g+13],5,-1444681467),b=o(b,y,_,w,v[g+2],9,-51403784),w=o(w,b,y,_,v[g+7],14,1735328473),_=o(_,w,b,y,v[g+12],20,-1926607734),y=a(y,_,w,b,v[g+5],4,-378558),b=a(b,y,_,w,v[g+8],11,-2022574463),w=a(w,b,y,_,v[g+11],16,1839030562),_=a(_,w,b,y,v[g+14],23,-35309556),y=a(y,_,w,b,v[g+1],4,-1530992060),b=a(b,y,_,w,v[g+4],11,1272893353),w=a(w,b,y,_,v[g+7],16,-155497632),_=a(_,w,b,y,v[g+10],23,-1094730640),y=a(y,_,w,b,v[g+13],4,681279174),b=a(b,y,_,w,v[g],11,-358537222),w=a(w,b,y,_,v[g+3],16,-722521979),_=a(_,w,b,y,v[g+6],23,76029189),y=a(y,_,w,b,v[g+9],4,-640364487),b=a(b,y,_,w,v[g+12],11,-421815835),w=a(w,b,y,_,v[g+15],16,530742520),_=a(_,w,b,y,v[g+2],23,-995338651),y=c(y,_,w,b,v[g],6,-198630844),b=c(b,y,_,w,v[g+7],10,1126891415),w=c(w,b,y,_,v[g+14],15,-1416354905),_=c(_,w,b,y,v[g+5],21,-57434055),y=c(y,_,w,b,v[g+12],6,1700485571),b=c(b,y,_,w,v[g+3],10,-1894986606),w=c(w,b,y,_,v[g+10],15,-1051523),_=c(_,w,b,y,v[g+1],21,-2054922799),y=c(y,_,w,b,v[g+8],6,1873313359),b=c(b,y,_,w,v[g+15],10,-30611744),w=c(w,b,y,_,v[g+6],15,-1560198380),_=c(_,w,b,y,v[g+13],21,1309151649),y=c(y,_,w,b,v[g+4],6,-145523070),b=c(b,y,_,w,v[g+11],10,-1120210379),w=c(w,b,y,_,v[g+2],15,718787259),_=c(_,w,b,y,v[g+9],21,-343485551),y=e(y,A),_=e(_,D),w=e(w,j),b=e(b,W);return[y,_,w,b]}function s(v){var O,g="",A=v.length*32;for(O=0;O<A;O+=8)g+=String.fromCharCode(v[O>>5]>>>O%32&255);return g}function u(v){var O,g=[];for(g[(v.length>>2)-1]=void 0,O=0;O<g.length;O+=1)g[O]=0;var A=v.length*8;for(O=0;O<A;O+=8)g[O>>5]|=(v.charCodeAt(O/8)&255)<<O%32;return g}function d(v){return s(f(u(v),v.length*8))}function l(v,O){var g,A=u(v),D=[],j=[],W;for(D[15]=j[15]=void 0,A.length>16&&(A=f(A,v.length*8)),g=0;g<16;g+=1)D[g]=A[g]^909522486,j[g]=A[g]^1549556828;return W=f(D.concat(u(O)),512+O.length*8),s(f(j.concat(W),512+128))}function p(v){var O="0123456789abcdef",g="",A,D;for(D=0;D<v.length;D+=1)A=v.charCodeAt(D),g+=O.charAt(A>>>4&15)+O.charAt(A&15);return g}function h(v){return unescape(encodeURIComponent(v))}function C(v){return d(h(v))}function T(v){return p(C(v))}function E(v,O){return l(h(v),h(O))}function x(v,O){return p(E(v,O))}function R(v,O,g){return O?g?E(O,v):x(O,v):g?C(v):T(v)}typeof define=="function"&&define.amd?define(function(){return R}):typeof Yt=="object"&&Yt.exports?Yt.exports=R:t.md5=R})(Pi)});function jr(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;let r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],jr(r),jr(n))}function Os(t){try{return decodeURIComponent(t)}catch{let e=t.match(Ri)||[];for(let r=1;r<e.length;r++)t=jr(e,r).join(""),e=t.match(Ri)||[];return t}}function xs(t){let e={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=Ai.exec(t);for(;r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{let i=Os(r[0]);i!==r[0]&&(e[r[0]]=i)}r=Ai.exec(t)}e["%C2"]="\uFFFD";let n=Object.keys(e);for(let i of n)t=t.replace(new RegExp(i,"g"),e[i]);return t}function Mr(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return decodeURIComponent(t)}catch{return xs(t)}}var Ni,Ri,Ai,Di=S(()=>{"use strict";Ni="%[a-f0-9]{2}",Ri=new RegExp("("+Ni+")|([^%]+?)","gi"),Ai=new RegExp("("+Ni+")+","gi")});function Qt(t,e){if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t===""||e==="")return[];let r=t.indexOf(e);return r===-1?[]:[t.slice(0,r),t.slice(r+e.length)]}var Ui=S(()=>{"use strict"});function ki(t,e){let r={};if(Array.isArray(e))for(let n of e){let i=Object.getOwnPropertyDescriptor(t,n);i?.enumerable&&Object.defineProperty(r,n,i)}else for(let n of Reflect.ownKeys(t)){let i=Object.getOwnPropertyDescriptor(t,n);if(i.enumerable){let o=t[n];e(n,o,t)&&Object.defineProperty(r,n,i)}}return r}var ji=S(()=>{"use strict"});var Vr={};Ss(Vr,{exclude:()=>Ds,extract:()=>Fr,parse:()=>qr,parseUrl:()=>Gi,pick:()=>Wi,stringify:()=>Vi,stringifyUrl:()=>Bi});function Rs(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{let i=r.length;return n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[ie(e,t),"[",i,"]"].join("")]:[...r,[ie(e,t),"[",ie(i,t),"]=",ie(n,t)].join("")]};case"bracket":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[ie(e,t),"[]"].join("")]:[...r,[ie(e,t),"[]=",ie(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,[ie(e,t),":list="].join("")]:[...r,[ie(e,t),":list=",ie(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{let e=t.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,i)=>i===void 0||t.skipNull&&i===null||t.skipEmptyString&&i===""?n:(i=i===null?"":i,n.length===0?[[ie(r,t),e,ie(i,t)].join("")]:[[n,ie(i,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>n===void 0||t.skipNull&&n===null||t.skipEmptyString&&n===""?r:n===null?[...r,ie(e,t)]:[...r,[ie(e,t),"=",ie(n,t)].join("")]}}function As(t){let e;switch(t.arrayFormat){case"index":return(r,n,i)=>{if(e=/\[(\d*)]$/.exec(r),r=r.replace(/\[\d*]$/,""),!e){i[r]=n;return}i[r]===void 0&&(i[r]={}),i[r][e[1]]=n};case"bracket":return(r,n,i)=>{if(e=/(\[])$/.exec(r),r=r.replace(/\[]$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"colon-list-separator":return(r,n,i)=>{if(e=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!e){i[r]=n;return}if(i[r]===void 0){i[r]=[n];return}i[r]=[...i[r],n]};case"comma":case"separator":return(r,n,i)=>{let o=typeof n=="string"&&n.includes(t.arrayFormatSeparator),a=typeof n=="string"&&!o&&Me(n,t).includes(t.arrayFormatSeparator);n=a?Me(n,t):n;let c=o||a?n.split(t.arrayFormatSeparator).map(f=>Me(f,t)):n===null?n:Me(n,t);i[r]=c};case"bracket-separator":return(r,n,i)=>{let o=/(\[])$/.test(r);if(r=r.replace(/\[]$/,""),!o){i[r]=n&&Me(n,t);return}let a=n===null?[]:n.split(t.arrayFormatSeparator).map(c=>Me(c,t));if(i[r]===void 0){i[r]=a;return}i[r]=[...i[r],...a]};default:return(r,n,i)=>{if(i[r]===void 0){i[r]=n;return}i[r]=[...[i[r]].flat(),n]}}}function Li(t){if(typeof t!="string"||t.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function ie(t,e){return e.encode?e.strict?Cs(t):encodeURIComponent(t):t}function Me(t,e){return e.decode?Mr(t):t}function Fi(t){return Array.isArray(t)?t.sort():typeof t=="object"?Fi(Object.keys(t)).sort((e,r)=>Number(e)-Number(r)).map(e=>t[e]):t}function qi(t){let e=t.indexOf("#");return e!==-1&&(t=t.slice(0,e)),t}function Ns(t){let e="",r=t.indexOf("#");return r!==-1&&(e=t.slice(r)),e}function Mi(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&typeof t=="string"&&t.trim()!==""?t=Number(t):e.parseBooleans&&t!==null&&(t.toLowerCase()==="true"||t.toLowerCase()==="false")&&(t=t.toLowerCase()==="true"),t}function Fr(t){t=qi(t);let e=t.indexOf("?");return e===-1?"":t.slice(e+1)}function qr(t,e){e={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...e},Li(e.arrayFormatSeparator);let r=As(e),n=Object.create(null);if(typeof t!="string"||(t=t.trim().replace(/^[?#&]/,""),!t))return n;for(let i of t.split("&")){if(i==="")continue;let o=e.decode?i.replace(/\+/g," "):i,[a,c]=Qt(o,"=");a===void 0&&(a=o),c=c===void 0?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?c:Me(c,e),r(Me(a,e),c,n)}for(let[i,o]of Object.entries(n))if(typeof o=="object"&&o!==null)for(let[a,c]of Object.entries(o))o[a]=Mi(c,e);else n[i]=Mi(o,e);return e.sort===!1?n:(e.sort===!0?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce((i,o)=>{let a=n[o];return a&&typeof a=="object"&&!Array.isArray(a)?i[o]=Fi(a):i[o]=a,i},Object.create(null))}function Vi(t,e){if(!t)return"";e={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...e},Li(e.arrayFormatSeparator);let r=a=>e.skipNull&&Ps(t[a])||e.skipEmptyString&&t[a]==="",n=Rs(e),i={};for(let[a,c]of Object.entries(t))r(a)||(i[a]=c);let o=Object.keys(i);return e.sort!==!1&&o.sort(e.sort),o.map(a=>{let c=t[a];return c===void 0?"":c===null?ie(a,e):Array.isArray(c)?c.length===0&&e.arrayFormat==="bracket-separator"?ie(a,e)+"[]":c.reduce(n(a),[]).join("&"):ie(a,e)+"="+ie(c,e)}).filter(a=>a.length>0).join("&")}function Gi(t,e){e={decode:!0,...e};let[r,n]=Qt(t,"#");return r===void 0&&(r=t),{url:r?.split("?")?.[0]??"",query:qr(Fr(t),e),...e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:Me(n,e)}:{}}}function Bi(t,e){e={encode:!0,strict:!0,[Lr]:!0,...e};let r=qi(t.url).split("?")[0]||"",n=Fr(t.url),i={...qr(n,{sort:!1}),...t.query},o=Vi(i,e);o&&(o=`?${o}`);let a=Ns(t.url);if(t.fragmentIdentifier){let c=new URL(r);c.hash=t.fragmentIdentifier,a=e[Lr]?c.hash:`#${t.fragmentIdentifier}`}return`${r}${o}${a}`}function Wi(t,e,r){r={parseFragmentIdentifier:!0,[Lr]:!1,...r};let{url:n,query:i,fragmentIdentifier:o}=Gi(t,r);return Bi({url:n,query:ki(i,e),fragmentIdentifier:o},r)}function Ds(t,e,r){let n=Array.isArray(e)?i=>!e.includes(i):(i,o)=>!e(i,o);return Wi(t,n,r)}var Ps,Cs,Lr,Ki=S(()=>{"use strict";Di();Ui();ji();Ps=t=>t==null,Cs=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Lr=Symbol("encodeFragmentIdentifier")});var Zt,$i=S(()=>{"use strict";Ki();Zt=Vr});var Hi=Ht((xt,Jt)=>{"use strict";(function(t,e){"use strict";var r="0.7.33",n="",i="?",o="function",a="undefined",c="object",f="string",s="major",u="model",d="name",l="type",p="vendor",h="version",C="architecture",T="console",E="mobile",x="tablet",R="smarttv",v="wearable",O="embedded",g=350,A="Amazon",D="Apple",j="ASUS",W="BlackBerry",y="Browser",_="Chrome",w="Edge",b="Firefox",Ne="Google",We="Huawei",U="LG",et="Microsoft",pt="Motorola",Ke="Opera",tt="Samsung",ht="Sharp",$e="Sony",rt="Xiaomi",nt="Zebra",vt="Facebook",Et=function(M,G){var L={};for(var J in M)G[J]&&G[J].length%2===0?L[J]=G[J].concat(M[J]):L[J]=M[J];return L},xe=function(M){for(var G={},L=0;L<M.length;L++)G[M[L].toUpperCase()]=M[L];return G},ci=function(M,G){return typeof M===f?St(G).indexOf(St(M))!==-1:!1},St=function(M){return M.toLowerCase()},ws=function(M){return typeof M===f?M.replace(/[^\d\.]/g,n).split(".")[0]:e},Cr=function(M,G){if(typeof M===f)return M=M.replace(/^\s\s*/,n),typeof G===a?M:M.substring(0,g)},It=function(M,G){for(var L=0,J,F,$t,K,Tt,De;L<G.length&&!Tt;){var di=G[L],pi=G[L+1];for(J=F=0;J<di.length&&!Tt;)if(Tt=di[J++].exec(M),Tt)for($t=0;$t<pi.length;$t++)De=Tt[++F],K=pi[$t],typeof K===c&&K.length>0?K.length===2?typeof K[1]==o?this[K[0]]=K[1].call(this,De):this[K[0]]=K[1]:K.length===3?typeof K[1]===o&&!(K[1].exec&&K[1].test)?this[K[0]]=De?K[1].call(this,De,K[2]):e:this[K[0]]=De?De.replace(K[1],K[2]):e:K.length===4&&(this[K[0]]=De?K[3].call(this,De.replace(K[1],K[2])):e):this[K]=De||e;L+=2}},Rr=function(M,G){for(var L in G)if(typeof G[L]===c&&G[L].length>0){for(var J=0;J<G[L].length;J++)if(ci(G[L][J],M))return L===i?e:L}else if(ci(G[L],M))return L===i?e:L;return M},Es={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},fi={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},li={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,h],[/opios[\/ ]+([\w\.]+)/i],[h,[d,Ke+" Mini"]],[/\bopr\/([\w\.]+)/i],[h,[d,Ke]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[d,"UC"+y]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[h,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+y],h],[/\bfocus\/([\w\.]+)/i],[h,[d,b+" Focus"]],[/\bopt\/([\w\.]+)/i],[h,[d,Ke+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[d,Ke+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[d,"MIUI "+y]],[/fxios\/([-\w\.]+)/i],[h,[d,b]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+y]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+y],h],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,vt],h],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[d,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,_+" WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[d,"Android "+y]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,h],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[h,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[h,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[h,Rr,Es]],[/(webkit|khtml)\/([\w\.]+)/i],[d,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[d,b+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,h],[/(cobalt)\/([\w\.]+)/i],[d,[h,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[C,"amd64"]],[/(ia32(?=;))/i],[[C,St]],[/((?:i[346]|x)86)[;\)]/i],[[C,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[C,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[C,"armhf"]],[/windows (ce|mobile); ppc;/i],[[C,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[C,/ower/,n,St]],[/(sun4\w)[;\)]/i],[[C,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[C,St]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[p,tt],[l,x]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[p,tt],[l,E]],[/((ipod|iphone)\d+,\d+)/i],[u,[p,D],[l,E]],[/(ipad\d+,\d+)/i],[u,[p,D],[l,x]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[p,D],[l,E]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[p,D],[l,x]],[/(macintosh);/i],[u,[p,D]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[p,We],[l,x]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[p,We],[l,E]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[p,rt],[l,E]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[p,rt],[l,x]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[p,"OPPO"],[l,E]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[p,"Vivo"],[l,E]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[p,"Realme"],[l,E]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[p,pt],[l,E]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[p,pt],[l,x]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[p,U],[l,x]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[p,U],[l,E]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[p,"Lenovo"],[l,x]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[p,"Nokia"],[l,E]],[/(pixel c)\b/i],[u,[p,Ne],[l,x]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[p,Ne],[l,E]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[p,$e],[l,E]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[p,$e],[l,x]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[p,"OnePlus"],[l,E]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[p,A],[l,x]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[p,A],[l,E]],[/(playbook);[-\w\),; ]+(rim)/i],[u,p,[l,x]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[p,W],[l,E]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[p,j],[l,x]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[p,j],[l,E]],[/(nexus 9)/i],[u,[p,"HTC"],[l,x]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[u,/_/g," "],[l,E]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[p,"Acer"],[l,x]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[p,"Meizu"],[l,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[p,ht],[l,E]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,u,[l,E]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,u,[l,x]],[/(surface duo)/i],[u,[p,et],[l,x]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[p,"Fairphone"],[l,E]],[/(u304aa)/i],[u,[p,"AT&T"],[l,E]],[/\bsie-(\w*)/i],[u,[p,"Siemens"],[l,E]],[/\b(rct\w+) b/i],[u,[p,"RCA"],[l,x]],[/\b(venue[\d ]{2,7}) b/i],[u,[p,"Dell"],[l,x]],[/\b(q(?:mv|ta)\w+) b/i],[u,[p,"Verizon"],[l,x]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[p,"Barnes & Noble"],[l,x]],[/\b(tm\d{3}\w+) b/i],[u,[p,"NuVision"],[l,x]],[/\b(k88) b/i],[u,[p,"ZTE"],[l,x]],[/\b(nx\d{3}j) b/i],[u,[p,"ZTE"],[l,E]],[/\b(gen\d{3}) b.+49h/i],[u,[p,"Swiss"],[l,E]],[/\b(zur\d{3}) b/i],[u,[p,"Swiss"],[l,x]],[/\b((zeki)?tb.*\b) b/i],[u,[p,"Zeki"],[l,x]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],u,[l,x]],[/\b(ns-?\w{0,9}) b/i],[u,[p,"Insignia"],[l,x]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[p,"NextBook"],[l,x]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],u,[l,E]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],u,[l,E]],[/\b(ph-1) /i],[u,[p,"Essential"],[l,E]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[p,"Envizen"],[l,x]],[/\b(trio[-\w\. ]+) b/i],[u,[p,"MachSpeed"],[l,x]],[/\btu_(1491) b/i],[u,[p,"Rotor"],[l,x]],[/(shield[\w ]+) b/i],[u,[p,"Nvidia"],[l,x]],[/(sprint) (\w+)/i],[p,u,[l,E]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[p,et],[l,E]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[p,nt],[l,x]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[p,nt],[l,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,u,[l,T]],[/droid.+; (shield) bui/i],[u,[p,"Nvidia"],[l,T]],[/(playstation [345portablevi]+)/i],[u,[p,$e],[l,T]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[p,et],[l,T]],[/smart-tv.+(samsung)/i],[p,[l,R]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[p,tt],[l,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,U],[l,R]],[/(apple) ?tv/i],[p,[u,D+" TV"],[l,R]],[/crkey/i],[[u,_+"cast"],[p,Ne],[l,R]],[/droid.+aft(\w)( bui|\))/i],[u,[p,A],[l,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[p,ht],[l,R]],[/(bravia[\w ]+)( bui|\))/i],[u,[p,$e],[l,R]],[/(mitv-\w{5}) bui/i],[u,[p,rt],[l,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,Cr],[u,Cr],[l,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[l,R]],[/((pebble))app/i],[p,u,[l,v]],[/droid.+; (glass) \d/i],[u,[p,Ne],[l,v]],[/droid.+; (wt63?0{2,3})\)/i],[u,[p,nt],[l,v]],[/(quest( 2)?)/i],[u,[p,vt],[l,v]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[l,O]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[l,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[l,x]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[l,x]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[l,E]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[d,w+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[h,Rr,fi]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[h,Rr,fi]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[h,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,h],[/\(bb(10);/i],[h,[d,W]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[d,b+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[h,[d,_+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],h],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,h],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,h]]},be=function(M,G){if(typeof M===c&&(G=M,M=e),!(this instanceof be))return new be(M,G).getResult();var L=M||(typeof t!==a&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:n),J=G?Et(li,G):li;return this.getBrowser=function(){var F={};return F[d]=e,F[h]=e,It.call(F,L,J.browser),F.major=ws(F.version),F},this.getCPU=function(){var F={};return F[C]=e,It.call(F,L,J.cpu),F},this.getDevice=function(){var F={};return F[p]=e,F[u]=e,F[l]=e,It.call(F,L,J.device),F},this.getEngine=function(){var F={};return F[d]=e,F[h]=e,It.call(F,L,J.engine),F},this.getOS=function(){var F={};return F[d]=e,F[h]=e,It.call(F,L,J.os),F},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return L},this.setUA=function(F){return L=typeof F===f&&F.length>g?Cr(F,g):F,this},this.setUA(L),this};be.VERSION=r,be.BROWSER=xe([d,h,s]),be.CPU=xe([C]),be.DEVICE=xe([u,p,l,T,E,R,x,v,O]),be.ENGINE=be.OS=xe([d,h]),typeof xt!==a?(typeof Jt!==a&&Jt.exports&&(xt=Jt.exports=be),xt.UAParser=be):typeof define===o&&define.amd?define(function(){return be}):typeof t!==a&&(t.UAParser=be);var gt=typeof t!==a&&(t.jQuery||t.Zepto);if(gt&&!gt.ua){var Kt=new be;gt.ua=Kt.getResult(),gt.ua.get=function(){return Kt.getUA()},gt.ua.set=function(M){Kt.setUA(M);var G=Kt.getResult();for(var L in G)gt.ua[L]=G[L]}}})(typeof window=="object"?window:xt)});var Us,ks,js,He,er,Ms,Ls,Fs,qs,Pt,tr,Gr=S(()=>{"use strict";Us=function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:ks(),platform:"Web",os:void 0,deviceModel:void 0}},t}(),ks=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},js=function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t}(),He=function(){return He=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},He.apply(this,arguments)},er=function(t,e){var r=["string","number","boolean","undefined"],n=typeof t,i=typeof e;if(n!==i)return!1;for(var o=0,a=r;o<a.length;o++){var c=a[o];if(c===n)return t===e}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var f=Array.isArray(t),s=Array.isArray(e);if(f!==s)return!1;if(f&&s){for(var u=0;u<t.length;u++)if(!er(t[u],e[u]))return!1}else{var d=Object.keys(t).sort(),l=Object.keys(e).sort();if(!er(d,l))return!1;var p=!0;return Object.keys(t).forEach(function(h){er(t[h],e[h])||(p=!1)}),p}return!0},Ms="$set",Ls="$unset",Fs="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});qs=function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=He({},this.identity.userProperties),n=He(He({},this.identity),{userProperties:r});return{setUserId:function(i){return n.userId=i,this},setDeviceId:function(i){return n.deviceId=i,this},setUserProperties:function(i){return n.userProperties=i,this},setOptOut:function(i){return n.optOut=i,this},updateUserProperties:function(i){for(var o=n.userProperties||{},a=0,c=Object.entries(i);a<c.length;a++){var f=c[a],s=f[0],u=f[1];switch(s){case Ms:for(var d=0,l=Object.entries(u);d<l.length;d++){var p=l[d],h=p[0],C=p[1];o[h]=C}break;case Ls:for(var T=0,E=Object.keys(u);T<E.length;T++){var h=E[T];delete o[h]}break;case Fs:o={};break}}return n.userProperties=o,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return He({},this.identity)},t.prototype.setIdentity=function(e){var r=He({},this.identity);this.identity=He({},e),er(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t}(),Pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:self,tr=function(){function t(){this.identityStore=new qs,this.eventBridge=new js,this.applicationContextProvider=new Us}return t.getInstance=function(e){return Pt.analyticsConnectorInstances||(Pt.analyticsConnectorInstances={}),Pt.analyticsConnectorInstances[e]||(Pt.analyticsConnectorInstances[e]=new t),Pt.analyticsConnectorInstances[e]},t}()});function Xi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function fe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xi(Object(r),!0).forEach(function(n){bt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Wr(t){"@babel/helpers - typeof";return Wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wr(t)}function Qr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oo(n.key),n)}}function Zr(t,e,r){return e&&zi(t.prototype,e),r&&zi(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function bt(t,e,r){return e=oo(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vs(t){return Gs(t)||Bs(t)||io(t)||Ws()}function Gs(t){if(Array.isArray(t))return Kr(t)}function Bs(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function io(t,e){if(t){if(typeof t=="string")return Kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(t,e)}}function Kr(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ws(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ks(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=io(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(f){throw f},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=!0,a=!1,c;return{s:function(){r=r.call(t)},n:function(){var f=r.next();return o=f.done,f},e:function(f){a=!0,c=f},f:function(){try{!o&&r.return!=null&&r.return()}finally{if(a)throw c}}}}function $s(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function oo(t){var e=$s(t,"string");return typeof e=="symbol"?e:String(e)}function N(t){switch(Hs.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return t===null?"null":t===void 0?"undefined":t!==t?"nan":t&&t.nodeType===1?"element":typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(t)?"buffer":(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t),Wr(t))}function Uu(t,e){for(var r in e)r===Du&&!e[r]||t.setRequestHeader(r,e[r])}var ro,no,I,Yi,k,_e,Hs,ot,Ct,Xs,zs,se,Br,Ys,Qs,Zs,Js,ir,eu,tu,$r,ru,nu,iu,ou,au,su,uu,cu,fu,m,ao,lu,Hr,Xr,du,pu,oe,hu,Jr,so,ye,vu,gu,Rt,uo,co,mu,yu,fo,_u,bu,Xe,Qi,X,Ue,Pe,lo,_t,wu,Eu,Su,Iu,Tu,zr,Ou,xu,Pu,Cu,Ru,Au,Nu,z,po,Du,Ce,ku,ju,Mu,at,ho,Lu,vo,ze,Fu,Zi,P,Ji,qu,en,Vu,Yr,Le,or,tn,Gu,Bu,it,Wu,eo,ae,to,B,nr,st,rr,go=S(()=>{"use strict";xi();ro=Xt(Ci());$i();no=Xt(Hi());Gr();I={DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",EVENT_LOG_URL:"api.amplitude.com",EVENT_LOG_EU_URL:"api.eu.amplitude.com",DYNAMIC_CONFIG_URL:"regionconfig.amplitude.com",DYNAMIC_CONFIG_EU_URL:"regionconfig.eu.amplitude.com",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",DEVICE_ID_INDEX:0,USER_ID_INDEX:1,OPT_OUT_INDEX:2,SESSION_ID_INDEX:3,LAST_EVENT_TIME_INDEX:4,EVENT_ID_INDEX:5,IDENTIFY_ID_INDEX:6,SEQUENCE_NUMBER_INDEX:7,COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",AMP_REFERRER_PARAM:"amp_referrer",REFERRER:"referrer",REFERRING_DOMAIN:"referring_domain",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured",TRANSPORT_HTTP:"http",TRANSPORT_BEACON:"beacon"},Yi={encode:function(e){for(var r="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?r+=String.fromCharCode(i):i>127&&i<2048?(r+=String.fromCharCode(i>>6|192),r+=String.fromCharCode(i&63|128)):(r+=String.fromCharCode(i>>12|224),r+=String.fromCharCode(i>>6&63|128),r+=String.fromCharCode(i&63|128))}return r},decode:function(e){for(var r="",n=0,i=0,o=0,a=0;n<e.length;)i=e.charCodeAt(n),i<128?(r+=String.fromCharCode(i),n++):i>191&&i<224?(o=e.charCodeAt(n+1),r+=String.fromCharCode((i&31)<<6|o&63),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),r+=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63),n+=3);return r}},k=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof window<"u")return window}(),_e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){try{if(k.btoa&&k.atob)return k.btoa(unescape(encodeURIComponent(e)))}catch{}return _e._encode(e)},_encode:function(e){var r="",n,i,o,a,c,f,s,u=0;for(e=Yi.encode(e);u<e.length;)n=e.charCodeAt(u++),i=e.charCodeAt(u++),o=e.charCodeAt(u++),a=n>>2,c=(n&3)<<4|i>>4,f=(i&15)<<2|o>>6,s=o&63,isNaN(i)?f=s=64:isNaN(o)&&(s=64),r=r+_e._keyStr.charAt(a)+_e._keyStr.charAt(c)+_e._keyStr.charAt(f)+_e._keyStr.charAt(s);return r},decode:function(e){try{if(k.btoa&&k.atob)return decodeURIComponent(escape(k.atob(e)))}catch{}return _e._decode(e)},_decode:function(e){var r="",n,i,o,a,c,f,s,u=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");u<e.length;)a=_e._keyStr.indexOf(e.charAt(u++)),c=_e._keyStr.indexOf(e.charAt(u++)),f=_e._keyStr.indexOf(e.charAt(u++)),s=_e._keyStr.indexOf(e.charAt(u++)),n=a<<2|c>>4,i=(c&15)<<4|f>>2,o=(f&3)<<6|s,r=r+String.fromCharCode(n),f!==64&&(r=r+String.fromCharCode(i)),s!==64&&(r=r+String.fromCharCode(o));return r=Yi.decode(r),r}},Hs=Object.prototype.toString;ot={DISABLE:0,ERROR:1,WARN:2,INFO:3},Ct=ot.WARN,Xs=function(e){Object.prototype.hasOwnProperty.call(ot,e)&&(Ct=ot[e])},zs=function(){return Ct},se={error:function(e){Ct>=ot.ERROR&&Br(e)},warn:function(e){Ct>=ot.WARN&&Br(e)},info:function(e){Ct>=ot.INFO&&Br(e)}},Br=function(e){try{console.log("[Amplitude] "+e)}catch{}},Ys=function(e){return!e||e.length===0},Qs=function(){try{if(k.sessionStorage)return!0}catch{}return!1},Zs=function t(e){if(N(e)==="array")for(var r=0;r<e.length;r++)e[r]=t(e[r]);else if(N(e)==="object")for(var n in e)n in e&&(e[n]=t(e[n]));else e=Js(e);return e},Js=function(e){return N(e)==="string"&&e.length>I.MAX_STRING_LENGTH?e.substring(0,I.MAX_STRING_LENGTH):e},ir=function(e,r,n){return N(e)!==n?(se.error("Invalid "+r+" input type. Expected "+n+" but received "+N(e)),!1):!0},eu=function(e){return ir(e,"deviceId","string")?e.indexOf(".")>=0?(se.error(`Device IDs may not contain '.' characters. Value will be ignored: "`.concat(e,'"')),!1):!0:!1},tu=function(e){return ir(e,"transport","string")?e!==I.TRANSPORT_HTTP&&e!==I.TRANSPORT_BEACON?(se.error("transport value must be one of '".concat(I.TRANSPORT_BEACON,"' or '").concat(I.TRANSPORT_HTTP,"'")),!1):e!==I.TRANSPORT_HTTP&&typeof navigator<"u"&&!navigator.sendBeacon?(se.error("browser does not support sendBeacon, so transport must be HTTP"),!1):!0:!1},$r=function(e){var r=N(e);if(r!=="object")return se.error("Error: invalid properties format. Expecting Javascript object, received "+r+", ignoring"),{};if(Object.keys(e).length>I.MAX_PROPERTY_KEYS)return se.error("Error: too many properties (more than 1000), ignoring"),{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=i,a=N(o);a!=="string"&&(o=String(o),se.warn("WARNING: Non-string property key, received type "+a+', coercing to string "'+o+'"'));var c=nu(o,e[i]);c!==null&&(n[o]=c)}return n},ru=["nan","function","arguments","regexp","element"],nu=function t(e,r){var n=N(r);if(ru.indexOf(n)!==-1)se.warn('WARNING: Property key "'+e+'" with invalid value type '+n+", ignoring"),r=null;else if(n==="undefined")r=null;else if(n==="error")r=String(r),se.warn('WARNING: Property key "'+e+'" with value type error, coercing to '+r);else if(n==="array"){for(var i=[],o=0;o<r.length;o++){var a=r[o],c=N(a);if(c==="array"){se.warn("WARNING: Cannot have "+c+" nested in an array property value, skipping");continue}else c==="object"?i.push($r(a)):i.push(t(e,a))}r=i}else n==="object"&&(r=$r(r));return r},iu=function(e){var r=N(e);if(r!=="object")return se.error("Error: invalid groups format. Expecting Javascript object, received "+r+", ignoring"),{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=i,a=N(o);a!=="string"&&(o=String(o),se.warn("WARNING: Non-string groupType, received type "+a+', coercing to string "'+o+'"'));var c=ou(o,e[i]);c!==null&&(n[o]=c)}return n},ou=function(e,r){var n=N(r);if(n==="string")return r;if(n==="date"||n==="number"||n==="boolean")return r=String(r),se.warn("WARNING: Non-string groupName, received type "+n+', coercing to string "'+r+'"'),r;if(n==="array"){for(var i=[],o=0;o<r.length;o++){var a=r[o],c=N(a);if(c==="array"||c==="object"){se.warn("WARNING: Skipping nested "+c+" in array groupName");continue}else c==="string"?i.push(a):(c==="date"||c==="number"||c==="boolean")&&(a=String(a),se.warn("WARNING: Non-string groupName, received type "+c+', coercing to string "'+a+'"'),i.push(a))}return i}se.warn("WARNING: Non-string groupName, received type "+n+". Please use strings or array of strings for groupName")},au=function(e,r){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),i=n.exec(r);return i===null?void 0:decodeURIComponent(i[1].replace(/\+/g," "))},su=function(){return typeof WorkerGlobalScope<"u"},uu=function(e){return ir(e,"sessionId","number")&&new Date(e).getTime()>0?!0:(se.error("sessionId value must in milliseconds since epoch (Unix Timestamp)"),!1)},cu=function(){return k.location},fu=function(e){var r=k.location?k.location.hostname:"";if(e){if(typeof document<"u"){var n=document.createElement("a");return n.href=e,n.hostname||r}if(typeof URL=="function"){var i=new URL(e);return i.hostname||r}}return r},m={setLogLevel:Xs,getLogLevel:zs,logLevels:ot,log:se,isEmptyString:Ys,isWebWorkerEnvironment:su,getQueryParam:au,sessionStorageEnabled:Qs,truncate:Zs,validateGroups:iu,validateInput:ir,validateProperties:$r,validateDeviceId:eu,validateTransport:tu,validateSessionId:uu,getLocation:cu,getHost:fu},ao=function(e){try{for(var r=document.cookie.split(";"),n=null,i=0;i<r.length;i++){for(var o=r[i];o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0){n=o.substring(e.length,o.length);break}}return n}catch{return null}},lu=function(e){try{var r=document.cookie.split(";").map(function(c){return c.trimStart()}),n=[],i=Ks(r),o;try{for(i.s();!(o=i.n()).done;){for(var a=o.value;a.charAt(0)===" ";)a=a.substring(1);a.indexOf(e)===0&&n.push(a.substring(e.length))}}catch(c){i.e(c)}finally{i.f()}return n}catch{return[]}},Hr=function(e,r,n){var i=r!==null?n.expirationDays:-1;if(i){var o=new Date;o.setTime(o.getTime()+i*24*60*60*1e3),i=o}var a=e+"="+r;i&&(a+="; expires="+i.toUTCString()),a+="; path=/",n.domain&&(a+="; domain="+n.domain),n.secure&&(a+="; Secure"),n.sameSite&&(a+="; SameSite="+n.sameSite),document.cookie=a},Xr=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=e.split(".")[I.LAST_EVENT_TIME_INDEX],n;return r&&(n=parseInt(r,32)),n||(m.log.warn("unable to parse malformed cookie: ".concat(e)),0)},du=function(e){return Vs(e).sort(function(r,n){var i=Xr(r),o=Xr(n);return o-i})},pu=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=I.COOKIE_TEST_PREFIX;if(typeof document>"u")return!1;var n=!1;try{var i=String(Date.now());Hr(r,i,e),m.log.info("Testing if cookies available"),n=ao(r+"=")===i}catch(o){m.log.warn('Error thrown when checking for cookies. Reason: "'.concat(o,'"'))}finally{m.log.info("Cleaning up cookies availability test"),Hr(r,null,e)}return n},oe={set:Hr,get:ao,getAll:lu,getLastEventTime:Xr,sortByEventTime:du,areCookiesEnabled:pu},hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Jr=function(){for(var e="",r=0;r<22;++r)e+=hu.charAt(Math.floor(Math.random()*64));return e},so=function(e){var r=m.getHost(e),n=r.split("."),i=[],o="_tldtest_"+Jr();if(m.isWebWorkerEnvironment())return"";for(var a=n.length-2;a>=0;--a)i.push(n.slice(a).join("."));for(var c=0;c<i.length;++c){var f=i[c],s={domain:"."+f};if(oe.set(o,1,s),oe.get(o))return oe.set(o,null,s),f}return""},ye={expirationDays:void 0,domain:void 0},vu=function(){ye={expirationDays:void 0,domain:void 0}},gu=function(e){if(arguments.length===0)return ye;e=e||{},ye.expirationDays=e.expirationDays,ye.secure=e.secure,ye.sameSite=e.sameSite;var r=m.isEmptyString(e.domain)?"."+so(m.getLocation().href):e.domain,n=Math.random();ye.domain=r,co("amplitude_test",n);var i=uo("amplitude_test");return(!i||i!==n)&&(r=null),fo("amplitude_test"),ye.domain=r,ye},Rt=function(e){var r="";return ye.domain&&(r=ye.domain.charAt(0)==="."?ye.domain.substring(1):ye.domain),e+r},uo=function(e){var r=Rt(e)+"=",n=oe.get(r);try{if(n)return JSON.parse(_e.decode(n))}catch{return null}return null},co=function(e,r){try{return oe.set(Rt(e),_e.encode(JSON.stringify(r)),ye),!0}catch{return!1}},mu=function(e,r){try{return oe.set(Rt(e),r,ye),!0}catch{return!1}},yu=function(e){var r=Rt(e)+"=";return oe.get(r)},fo=function(e){try{return oe.set(Rt(e),null,ye),!0}catch{return!1}},_u={reset:vu,options:gu,get:uo,set:co,remove:fo,setRaw:mu,getRaw:yu},bu=function(){function t(){Qr(this,t),this.map=new Map,this.length=0}return Zr(t,[{key:"key",value:function(r){var n=Array.from(this.map.keys()),i=n[r];return this.map.get(i)}},{key:"getItem",value:function(r){return this.map.get(r)}},{key:"setItem",value:function(r,n){this.map.has(r)||(this.length+=1),this.map.set(r,n)}},{key:"removeItem",value:function(r){this.map.has(r)&&(this.length-=1,this.map.delete(r))}},{key:"clear",value:function(){this.map.clear(),this.length=0}}]),t}();{if(Qi=function(){var e=new Date,r;try{return k.localStorage.setItem(e,e),r=k.localStorage.getItem(e)===String(e),k.localStorage.removeItem(e),r}catch{}return!1},Qi())Xe=k.localStorage;else if(typeof k<"u"&&k.globalStorage)try{Xe=k.globalStorage[k.location.hostname]}catch{}else typeof document<"u"?(X=document.createElement("div"),Ue="localStorage",X.style.display="none",document.getElementsByTagName("head")[0].appendChild(X),X.addBehavior&&(X.addBehavior("#default#userdata"),Xe={length:0,setItem:function(e,r){X.load(Ue),X.getAttribute(e)||this.length++,X.setAttribute(e,r),X.save(Ue)},getItem:function(e){return X.load(Ue),X.getAttribute(e)},removeItem:function(e){X.load(Ue),X.getAttribute(e)&&this.length--,X.removeAttribute(e),X.save(Ue)},clear:function(){X.load(Ue);for(var e=0,r;r=X.XMLDocument.documentElement.attributes[e++];)X.removeAttribute(r.name);X.save(Ue),this.length=0},key:function(e){return X.load(Ue),X.XMLDocument.documentElement.attributes[e]}},X.load(Ue),Xe.length=X.XMLDocument.documentElement.attributes.length)):m.isWebWorkerEnvironment()&&(Xe=new bu);Xe||(Xe={length:0,setItem:function(e,r){},getItem:function(e){},removeItem:function(e){},clear:function(){},key:function(e){}})}Pe=Xe,lo=function(){this.storage=null};lo.prototype.getStorage=function(t){if(this.storage!==null)return this.storage;if(!t&&oe.areCookiesEnabled())this.storage=_u;else{var e="amp_cookiestore_";this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function(n){return arguments.length===0?this._options:(n=n||{},this._options.expirationDays=n.expirationDays||this._options.expirationDays,this._options.domain=n.domain||this._options.domain||k&&k.location&&k.location.hostname,this._options.secure=n.secure||!1)},get:function(n){try{return JSON.parse(Pe.getItem(e+n))}catch{}return null},set:function(n,i){try{return Pe.setItem(e+n,JSON.stringify(i)),!0}catch{}return!1},remove:function(n){try{Pe.removeItem(e+n)}catch{return!1}}}}return this.storage};wu=(_t={},bt(_t,I.STORAGE_COOKIES,!0),bt(_t,I.STORAGE_NONE,!0),bt(_t,I.STORAGE_LOCAL,!0),bt(_t,I.STORAGE_SESSION,!0),_t),Eu=function(){function t(e){var r=e.storageKey,n=e.disableCookies,i=e.domain,o=e.secure,a=e.sameSite,c=e.expirationDays,f=e.storage;Qr(this,t),this.storageKey=r,this.domain=i,this.secure=o,this.sameSite=a,this.expirationDays=c,this.cookieDomain="";var s=m.getLocation()?m.getLocation().href:void 0,u=n?"":so(s);if(this.cookieDomain=i||(u?"."+u:null),wu[f])this.storage=f;else{var d=n||!oe.areCookiesEnabled({domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays});d?this.storage=I.STORAGE_LOCAL:this.storage=I.STORAGE_COOKIES}}return Zr(t,[{key:"getCookieStorageKey",value:function(){if(!this.domain)return this.storageKey;var r=this.domain.charAt(0)==="."?this.domain.substring(1):this.domain;return"".concat(this.storageKey).concat(r?"_".concat(r):"")}},{key:"save",value:function(r){var n=r.deviceId,i=r.userId,o=r.optOut,a=r.sessionId,c=r.lastEventTime,f=r.eventId,s=r.identifyId,u=r.sequenceNumber;if(this.storage!==I.STORAGE_NONE){var d=[n,_e.encode(i||""),o?"1":"",a?a.toString(32):"0",c?c.toString(32):"0",f?f.toString(32):"0",s?s.toString(32):"0",u?u.toString(32):"0"].join(".");switch(this.storage){case I.STORAGE_SESSION:k.sessionStorage&&k.sessionStorage.setItem(this.storageKey,d);break;case I.STORAGE_LOCAL:Pe.setItem(this.storageKey,d);break;case I.STORAGE_COOKIES:this.saveCookie(d);break}}}},{key:"saveCookie",value:function(r){oe.set(this.getCookieStorageKey(),r,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays})}},{key:"load",value:function(){var r=this,n;if(this.storage===I.STORAGE_COOKIES){var i=this.getCookieStorageKey()+"=",o=oe.getAll(i);if(o.length===0||o.length===1)n=o[0];else{var a=oe.sortByEventTime(o)[0];o.forEach(function(){return oe.set(r.getCookieStorageKey(),null,{})}),this.saveCookie(a),n=oe.get(i)}}if(n||(n=Pe.getItem(this.storageKey)),!n)try{n=k.sessionStorage&&k.sessionStorage.getItem(this.storageKey)}catch(s){m.log.info('window.sessionStorage unavailable. Reason: "'.concat(s,'"'))}if(!n)return null;var c=n.split("."),f=null;if(c[I.USER_ID_INDEX])try{f=_e.decode(c[I.USER_ID_INDEX])}catch{f=null}return{deviceId:c[I.DEVICE_ID_INDEX],userId:f,optOut:c[I.OPT_OUT_INDEX]==="1",sessionId:parseInt(c[I.SESSION_ID_INDEX],32),lastEventTime:parseInt(c[I.LAST_EVENT_TIME_INDEX],32),eventId:parseInt(c[I.EVENT_ID_INDEX],32),identifyId:parseInt(c[I.IDENTIFY_ID_INDEX],32),sequenceNumber:parseInt(c[I.SEQUENCE_NUMBER_INDEX],32)}}},{key:"clear",value:function(){var r;if(this.storage===I.STORAGE_COOKIES&&(r=oe.get(this.getCookieStorageKey()+"="),oe.set(this.getCookieStorageKey(),null,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:0})),r||(r=Pe.getItem(this.storageKey),Pe.clear()),!r)try{r=k.sessionStorage&&k.sessionStorage.getItem(this.storageKey),k.sessionStorage.clear()}catch(n){m.log.info('window.sessionStorage unavailable. Reason: "'.concat(n,'"'))}return!!r}}]),t}(),Su=function(e,r){var n=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",i=function(p,h,C,T){return m.getQueryParam(p,h)||m.getQueryParam(C,T)},o=i(I.UTM_SOURCE,r,"utmcsr",n),a=i(I.UTM_MEDIUM,r,"utmcmd",n),c=i(I.UTM_CAMPAIGN,r,"utmccn",n),f=i(I.UTM_TERM,r,"utmctr",n),s=i(I.UTM_CONTENT,r,"utmcct",n),u={},d=function(p,h){m.isEmptyString(h)||(u[p]=h)};return d(I.UTM_SOURCE,o),d(I.UTM_MEDIUM,a),d(I.UTM_CAMPAIGN,c),d(I.UTM_TERM,f),d(I.UTM_CONTENT,s),u},Iu="$add",Tu="$append",zr="$clearAll",Ou="$prepend",xu="$set",Pu="$setOnce",Cu="$unset",Ru="$preInsert",Au="$postInsert",Nu="$remove",z=function(){this.userPropertiesOperations={},this.properties=[]};z.prototype.add=function(t,e){return N(e)==="number"||N(e)==="string"?this._addOperation(Iu,t,e):m.log.error("Unsupported type for value: "+N(e)+", expecting number or string"),this};z.prototype.append=function(t,e){return this._addOperation(Tu,t,e),this};z.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,zr)||m.log.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations[zr]="-",this)};z.prototype.prepend=function(t,e){return this._addOperation(Ou,t,e),this};z.prototype.set=function(t,e){return this._addOperation(xu,t,e),this};z.prototype.setOnce=function(t,e){return this._addOperation(Pu,t,e),this};z.prototype.unset=function(t){return this._addOperation(Cu,t,"-"),this};z.prototype.preInsert=function(t,e){return this._addOperation(Ru,t,e),this};z.prototype.postInsert=function(t,e){return this._addOperation(Au,t,e),this};z.prototype.remove=function(t,e){return this._addOperation(Nu,t,e),this};z.prototype._addOperation=function(t,e,r){if(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,zr)){m.log.error("This identify already contains a $clearAll operation, skipping operation "+t);return}if(this.properties.indexOf(e)!==-1){m.log.error('User property "'+e+'" already used in this identify, skipping operation '+t);return}Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,t)||(this.userPropertiesOperations[t]={}),this.userPropertiesOperations[t][e]=r,this.properties.push(e)};po=function(e,r,n){this.url=e,this.data=r||{},this.headers=n},Du="Cross-Origin-Resource-Policy";po.prototype.send=function(t){var e=!!k.XDomainRequest;if(e){var r=new k.XDomainRequest;r.open("POST",this.url,!0),r.onload=function(){t(200,r.responseText)},r.onerror=function(){r.responseText==="Request Entity Too Large"?t(413,r.responseText):t(500,r.responseText)},r.ontimeout=function(){},r.onprogress=function(){},r.send(Zt.stringify(this.data))}else if(typeof XMLHttpRequest<"u"){var n=new XMLHttpRequest;n.open("POST",this.url,!0),n.onreadystatechange=function(){n.readyState===4&&t(n.status,n.responseText)},Uu(n,this.headers),n.send(Zt.stringify(this.data))}else{var i=void 0;fetch(this.url,{method:"POST",headers:this.headers,body:Zt.stringify(this.data)}).then(function(o){return i=o.status,o.text()}).then(function(o){t(i,o)})}};Ce=function(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Ce.prototype.setProductId=function(e){return N(e)!=="string"?m.log.error("Unsupported type for productId: "+N(e)+", expecting string"):m.isEmptyString(e)?m.log.error("Invalid empty productId"):this._productId=e,this};Ce.prototype.setQuantity=function(e){return N(e)!=="number"?m.log.error("Unsupported type for quantity: "+N(e)+", expecting number"):this._quantity=parseInt(e),this};Ce.prototype.setPrice=function(e){return N(e)!=="number"?m.log.error("Unsupported type for price: "+N(e)+", expecting number"):this._price=e,this};Ce.prototype.setRevenueType=function(e){return N(e)!=="string"?m.log.error("Unsupported type for revenueType: "+N(e)+", expecting string"):this._revenueType=e,this};Ce.prototype.setEventProperties=function(e){return N(e)!=="object"?m.log.error("Unsupported type for eventProperties: "+N(e)+", expecting object"):this._properties=m.validateProperties(e),this};Ce.prototype._isValidRevenue=function(){return N(this._price)!=="number"?(m.log.error("Invalid revenue, need to set price field"),!1):!0};Ce.prototype._toJSONObject=function(){var e=N(this._properties)==="object"?this._properties:{};return this._productId!==null&&(e[I.REVENUE_PRODUCT_ID]=this._productId),this._quantity!==null&&(e[I.REVENUE_QUANTITY]=this._quantity),this._price!==null&&(e[I.REVENUE_PRICE]=this._price),this._revenueType!==null&&(e[I.REVENUE_REVENUE_TYPE]=this._revenueType),e};ku=function t(e){return e?(e^Math.random()*16>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t)},ju=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||""},Mu={getLanguage:ju},at={US:"US",EU:"EU"},ho=function(e){var r=I.EVENT_LOG_URL;switch(e){case at.EU:r=I.EVENT_LOG_EU_URL;break;case at.US:r=I.EVENT_LOG_URL;break}return r},Lu=function(e){var r=I.DYNAMIC_CONFIG_URL;switch(e){case at.EU:r=I.DYNAMIC_CONFIG_EU_URL;break;case at.US:r=I.DYNAMIC_CONFIG_URL;break}return r},vo="8.21.9",ze={apiEndpoint:I.EVENT_LOG_URL,batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:30*1e3,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,ingestionMetadata:{sourceName:"",sourceVersion:""},language:Mu.getLanguage(),library:{name:"amplitude-js",version:vo},logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:function(){},onExitPage:function(){},onNewSessionStart:function(){},plan:{branch:"",source:"",version:"",versionId:""},platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:30*60*1e3,storage:I.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},transport:I.TRANSPORT_HTTP,unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Cross-Origin-Resource-Policy":"cross-origin"},serverZone:at.US,useDynamicConfig:!1,serverZoneBasedApi:!1,sessionId:null,partnerId:""},Fu=function(){function t(){return Qr(this,t),t.instance||(this.ingestionEndpoint=I.EVENT_LOG_URL,t.instance=this),t.instance}return Zr(t,[{key:"refresh",value:function(r,n,i){var o="https";!n&&k.location.protocol!=="https:"&&(o="http");var a=o+"://"+Lu(r),c=this,f=!!k.XDomainRequest;if(f){var s=new k.XDomainRequest;s.open("GET",a,!0),s.onload=function(){var d=JSON.parse(s.responseText);c.ingestionEndpoint=d.ingestionEndpoint,i&&i()},s.onerror=function(){},s.ontimeout=function(){},s.onprogress=function(){},s.send()}else{var u=new XMLHttpRequest;u.open("GET",a,!0),u.onreadystatechange=function(){if(u.readyState===4&&u.status===200){var d=JSON.parse(u.responseText);c.ingestionEndpoint=d.ingestionEndpoint,i&&i()}},u.send()}}}]),t}(),Zi=new Fu,P=function(e){!Ot()&&!m.isWebWorkerEnvironment()&&m.log.warn("amplitude-js will not work in a non-browser environment. If you are planning to add Amplitude to a node environment, please use @amplitude/node"),this._instanceName=m.isEmptyString(e)?I.DEFAULT_INSTANCE:e.toLowerCase(),this._unsentEvents=[],this._unsentIdentifys=[],this.options=fe(fe({},ze),{},{headers:fe({},ze.headers),ingestionMetadata:fe({},ze.ingestionMetadata),library:fe({},ze.library),plan:fe({},ze.plan),trackingOptions:fe({},ze.trackingOptions)}),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInitCallbacks=[],this._onNewSessionStartCallbacks=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._isInitialized=!1,this._connector=null,this._userAgent=typeof navigator<"u"&&navigator&&navigator.userAgent||null,this._ua=new no.default(this._userAgent).getResult()};P.prototype.Identify=z;P.prototype.Revenue=Ce;P.prototype.init=function(e,r,n,i){var o=this;if(N(e)!=="string"||m.isEmptyString(e)){m.log.error("Invalid apiKey. Please re-initialize with a valid apiKey");return}try{this._connector=tr.getInstance(this._instanceName),qu(this.options,n),(Ot()||m.isWebWorkerEnvironment())&&k.Prototype!==void 0&&Array.prototype.toJSON&&(kr(),m.log.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==ze.cookieName&&m.log.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.serverZoneBasedApi&&(this.options.apiEndpoint=ho(this.options.serverZone)),this._refreshDynamicConfig(),this.options.apiKey=e,this._storageSuffix="_"+e+(this._instanceName===I.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=e.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=I.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage=new lo().getStorage(this.options.disableCookies),this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new Eu({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var a=!!this.cookieStorage.get(this._oldCookiename),c=!!this._metadataStorage.load();this._useOldCookie=!c&&a&&!this.options.cookieForceUpgrade;var f=c||a;if(this.options.deferInitialization&&!f){this._deferInitialization(e,r,n,i);return}this.options.domain=this.cookieStorage.options().domain,N(this.options.logLevel)==="string"&&m.setLogLevel(this.options.logLevel);var s=Wu(this);this._apiPropertiesTrackingOptions=Object.keys(s).length>0?{tracking_options:s}:{},this.options.cookieForceUpgrade&&a&&(c||Vu(this),this.cookieStorage.remove(this._oldCookiename)),en(this),this._pendingReadStorage=!0;var u=function(C){n&&n.deviceId&&!m.validateDeviceId(n.deviceId)&&(m.log.error('Invalid device ID rejected. Randomly generated UUID will be used instead of "'.concat(n.deviceId,'"')),delete n.deviceId),o.options.deviceId=o._getInitialDeviceId(n&&n.deviceId,C),o.options.userId=N(r)==="string"&&!m.isEmptyString(r)&&r||N(r)==="number"&&r.toString()||o.options.userId||null;var T=new Date().getTime(),E=!o._sessionId||!o._lastEventTime||T-o._lastEventTime>o.options.sessionTimeout||o.options.sessionId;E&&(o.options.unsetParamsReferrerOnNewSession&&o._unsetUTMParams(),o._newSession=!0,o._sessionId=o.options.sessionId||T,o.options.sessionId=void 0,o.options.saveParamsReferrerOncePerSession&&o._trackParamsAndReferrer()),o.options.saveParamsReferrerOncePerSession||o._trackParamsAndReferrer(),o.options.saveEvents&&(Ji(o._unsentEvents),Ji(o._unsentIdentifys)),o._lastEventTime=T,Le(o),o._pendingReadStorage=!1,o._sendEventsIfReady();for(var x=0;x<o._onInitCallbacks.length;x++)o._onInitCallbacks[x](o);o._onInitCallbacks=[],o._isInitialized=!0,E&&o._runNewSessionStartCallbacks()};this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map(function(h){return{event:h}}).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map(function(h){return{event:h}}).concat(this._unsentIdentifys)),n&&n.onNewSessionStart&&this.onNewSessionStart(this.options.onNewSessionStart),u(),this.runQueuedFunctions(),N(i)==="function"&&i(this);var d=this.options.onExitPage;if(N(d)==="function"&&k.addEventListener&&!this.pageHandlersAdded){this.pageHandlersAdded=!0;var l=function(){var C=o.options.transport;o.setTransport(I.TRANSPORT_BEACON),d(),o.setTransport(C)};k.addEventListener("pagehide",function(){l()},!1)}this._connector.eventBridge.setEventReceiver(function(h){o._logEvent(h.eventType,h.eventProperties,h.userProperties)});var p=this._connector.identityStore.editIdentity();this.options.deviceId&&p.setDeviceId(this.options.deviceId),this.options.userId&&p.setUserId(this.options.userId),p.commit()}catch(h){m.log.error(h),n&&N(n.onError)==="function"&&n.onError(h)}};P.prototype._runNewSessionStartCallbacks=function(){for(var t=0;t<this._onNewSessionStartCallbacks.length;t++)this._onNewSessionStartCallbacks[t](this)};P.prototype.deleteLowerLevelDomainCookies=function(){var t=m.getHost(),e=this.options.domain&&this.options.domain[0]==="."?this.options.domain.slice(1):this.options.domain;if(!(!e||!m.isWebWorkerEnvironment())&&t!==e&&new RegExp(e+"$").test(t)){for(var r=t.split("."),n=e.split("."),i=r.length;i>n.length;--i){var o=r.slice(r.length-i).join(".");oe.set(this._cookieName,null,{domain:"."+o})}oe.set(this._cookieName,null,{})}};P.prototype._getInitialDeviceId=function(t,e){if(t)return t;if(this.options.deviceIdFromUrlParam){var r=this._getDeviceIdFromUrlParam(this._getUrlParams());if(r)return r}return this.options.deviceId?this.options.deviceId:e||Jr()};Ji=function(e){for(var r=0;r<e.length;r++){var n=e[r].event.user_properties,i=e[r].event.event_properties,o=e[r].event.groups;e[r].event.user_properties=m.validateProperties(n),e[r].event.event_properties=m.validateProperties(i),e[r].event.groups=m.validateGroups(o)}};P.prototype._trackParamsAndReferrer=function(){var e,r,n,i;if(this.options.includeUtm&&(e=this._initUtmData()),this.options.includeReferrer&&(r=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(n=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(i=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent){var o=fe(fe(fe(fe({},e),r),n),i);Object.keys(o).length>0&&this.logEvent(I.ATTRIBUTION_EVENT,o)}};qu=function t(e,r){if(N(r)==="object"){var n=new Set(["headers"]),i=new Set(["eventUploadPeriodMillis"]),o=function(f){if(Object.prototype.hasOwnProperty.call(e,f)){var s=r[f],u=N(e[f]);if(!(f==="transport"&&!m.validateTransport(s))){if(f==="sessionId"&&s!==null){e[f]=m.validateSessionId(s)?s:null;return}else if(!m.validateInput(s,f+" option",u))return;u==="boolean"?e[f]=!!s:u==="string"&&!m.isEmptyString(s)||u==="number"&&(s>0||s===0&&i.has(f))||u==="function"?e[f]=s:u==="object"&&t(e[f],s)}}};for(var a in r)n.has(a)?e[a]=fe(fe({},e[a]),r[a]):Object.prototype.hasOwnProperty.call(r,a)&&o(a)}};P.prototype.runQueuedFunctions=function(){var t=this._q;this._q=[];for(var e=0;e<t.length;e++){var r=this[t[e][0]];N(r)==="function"&&r.apply(this,t[e].slice(1))}};P.prototype._apiKeySet=function(e){return m.isEmptyString(this.options.apiKey)?(m.log.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+e),!1):!0};P.prototype._loadSavedUnsentEvents=function(e){var r=this._getFromStorage(Pe,e),n=this._parseSavedUnsentEventsString(r,e);return this._setInStorage(Pe,e,JSON.stringify(n)),n};P.prototype._parseSavedUnsentEventsString=function(e,r){if(m.isEmptyString(e))return[];if(N(e)==="string")try{var n=JSON.parse(e);if(N(n)==="array")return n}catch{}return m.log.error("Unable to load "+r+" events. Restart with a new empty queue."),[]};P.prototype.isNewSession=function(){return this._newSession};P.prototype.onInit=function(e){this._isInitialized?e(this):this._onInitCallbacks.push(e)};P.prototype.onNewSessionStart=function(e){this._onNewSessionStartCallbacks.push(e)};P.prototype.getSessionId=function(){return this._sessionId};P.prototype.nextEventId=function(){return this._eventId++,this._eventId};P.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId};P.prototype.nextSequenceNumber=function(){return this._sequenceNumber++,this._sequenceNumber};P.prototype._unsentCount=function(){return this._unsentEvents.length+this._unsentIdentifys.length};P.prototype._sendEventsIfReady=function(){return this._unsentCount()===0?!1:this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold?(this.sendEvents(),!0):this.options.transport===I.TRANSPORT_BEACON?(this.sendEvents(),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(),!0)};P.prototype.clearStorage=function(){return this._metadataStorage.clear()};P.prototype._getFromStorage=function(e,r){return e.getItem(r+this._storageSuffix)};P.prototype._setInStorage=function(e,r,n){e.setItem(r+this._storageSuffix,n)};en=function(e){if(!e._useOldCookie){var r=e._metadataStorage.load();N(r)==="object"&&Yr(e,r);return}var n=e.cookieStorage.get(e._oldCookiename);if(N(n)==="object"){Yr(e,n);return}},Vu=function(e){var r=e.cookieStorage.get(e._oldCookiename);N(r)==="object"&&(Yr(e,r),Le(e))},Yr=function(e,r){r.deviceId&&(e.options.deviceId=r.deviceId),r.userId&&(e.options.userId=r.userId),r.optOut!==null&&r.optOut!==void 0&&r.optOut!==!1&&(e.options.optOut=r.optOut),r.sessionId&&(e._sessionId=parseInt(r.sessionId,10)),r.lastEventTime&&(e._lastEventTime=parseInt(r.lastEventTime,10)),r.eventId&&(e._eventId=parseInt(r.eventId,10)),r.identifyId&&(e._identifyId=parseInt(r.identifyId,10)),r.sequenceNumber&&(e._sequenceNumber=parseInt(r.sequenceNumber,10))},Le=function(e){var r={deviceId:e.options.deviceId,userId:e.options.userId,optOut:e.options.optOut,sessionId:e._sessionId,lastEventTime:e._lastEventTime,eventId:e._eventId,identifyId:e._identifyId,sequenceNumber:e._sequenceNumber};e._useOldCookie?e.cookieStorage.set(e.options.cookieName+e._storageSuffix,r):e._metadataStorage.save(r)};P.prototype._initUtmData=function(e,r){e=e||this._getUrlParams(),r=r||this.cookieStorage.get("__utmz");var n=Su(r,e);return or(this,n),n};P.prototype._unsetUTMParams=function(){var e=new z;e.unset(I.REFERRER),e.unset(I.REFERRING_DOMAIN),e.unset(I.UTM_SOURCE),e.unset(I.UTM_MEDIUM),e.unset(I.UTM_CAMPAIGN),e.unset(I.UTM_TERM),e.unset(I.UTM_CONTENT),this.identify(e)};or=function(e,r){if(!(N(r)!=="object"||Object.keys(r).length===0)){var n=new z;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n.setOnce("initial_"+i,r[i]),n.set(i,r[i]));e.identify(n)}};P.prototype._getReferrer=function(){var e=this._getReferrerFromUrlParam(this._getUrlParams());return e||(typeof document<"u"?document.referrer:"")};P.prototype._getUrlParams=function(){return k.location.search};P.prototype._saveGclid=function(e){var r=m.getQueryParam("gclid",e);if(!m.isEmptyString(r)){var n={gclid:r};return or(this,n),n}};P.prototype._saveFbclid=function(e){var r=m.getQueryParam("fbclid",e);if(!m.isEmptyString(r)){var n={fbclid:r};return or(this,n),n}};P.prototype._getDeviceIdFromUrlParam=function(e){return m.getQueryParam(I.AMP_DEVICE_ID_PARAM,e)};P.prototype._getReferrerFromUrlParam=function(e){return m.getQueryParam(I.AMP_REFERRER_PARAM,e)};P.prototype._getReferringDomain=function(e){if(m.isEmptyString(e))return null;var r=e.split("/");return r.length>=3?r[2]:null};P.prototype._saveReferrer=function(e){if(!m.isEmptyString(e)){var r={referrer:e,referring_domain:this._getReferringDomain(e)};return or(this,r),r}};P.prototype.saveEvents=function(){try{var e=JSON.stringify(this._unsentEvents.map(function(n){var i=n.event;return i}));this._setInStorage(Pe,this.options.unsentKey,e)}catch{}try{var r=JSON.stringify(this._unsentIdentifys.map(function(n){return n.event}));this._setInStorage(Pe,this.options.unsentIdentifyKey,r)}catch{}};P.prototype.setDomain=function(e){if(this._shouldDeferCall())return this._q.push(["setDomain"].concat(Array.prototype.slice.call(arguments,0)));if(m.validateInput(e,"domain","string"))try{this.cookieStorage.options({expirationDays:this.options.cookieExpiration,secure:this.options.secureCookie,domain:e,sameSite:this.options.sameSiteCookie}),this.options.domain=this.cookieStorage.options().domain,en(this),Le(this)}catch(r){m.log.error(r)}};P.prototype.setUserId=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(m.validateInput(r,"startNewSession","boolean")){if(this._shouldDeferCall())return this._q.push(["setUserId"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.userId=e!=null&&""+e||null,r&&(this.options.unsetParamsReferrerOnNewSession&&this._unsetUTMParams(),this._newSession=!0,this._sessionId=new Date().getTime(),this._runNewSessionStartCallbacks(),this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),Le(this),this._connector&&this._connector.identityStore.editIdentity().setUserId(this.options.userId).commit()}catch(n){m.log.error(n)}}};P.prototype.setGroup=function(t,e){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));if(!(!this._apiKeySet("setGroup()")||!m.validateInput(t,"groupType","string")||m.isEmptyString(t))){var r={};r[t]=e;var n=new z().set(t,e);this._logEvent(I.IDENTIFY_EVENT,null,null,n.userPropertiesOperations,r,null,null,null)}};P.prototype.setOptOut=function(e){if(this._shouldDeferCall())return this._q.push(["setOptOut"].concat(Array.prototype.slice.call(arguments,0)));if(m.validateInput(e,"enable","boolean"))try{this.options.optOut=e,Le(this)}catch(r){m.log.error(r)}};P.prototype.setSessionId=function(e){if(m.validateInput(e,"sessionId","number"))try{this._sessionId=e,Le(this)}catch(r){m.log.error(r)}};P.prototype.resetSessionId=function(){this.setSessionId(new Date().getTime())};P.prototype.regenerateDeviceId=function(){if(this._shouldDeferCall())return this._q.push(["regenerateDeviceId"].concat(Array.prototype.slice.call(arguments,0)));this.setDeviceId(Jr())};P.prototype.setDeviceId=function(e){if(this._shouldDeferCall())return this._q.push(["setDeviceId"].concat(Array.prototype.slice.call(arguments,0)));if(m.validateDeviceId(e))try{m.isEmptyString(e)||(this.options.deviceId=""+e,Le(this),this._connector&&this._connector.identityStore.editIdentity().setDeviceId(this.options.deviceId).commit())}catch(r){m.log.error(r)}};P.prototype.setTransport=function(e){if(this._shouldDeferCall())return this._q.push(["setTransport"].concat(Array.prototype.slice.call(arguments,0)));m.validateTransport(e)&&(this.options.transport=e)};P.prototype.setUserProperties=function(e){if(this._shouldDeferCall())return this._q.push(["setUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(!(!this._apiKeySet("setUserProperties()")||!m.validateInput(e,"userProperties","object"))){var r=m.truncate(m.validateProperties(e));if(Object.keys(r).length!==0){var n=new z;for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.set(i,r[i]);this.identify(n)}}};P.prototype.clearUserProperties=function(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("clearUserProperties()")){var e=new z;e.clearAll(),this.identify(e)}};tn=function(e,r){for(var n=0;n<r._q.length;n++){var i=e[r._q[n][0]];N(i)==="function"&&i.apply(e,r._q[n].slice(1))}return e};P.prototype.identify=function(t,e,r,n){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(!this._apiKeySet("identify()")){ae(e,r,0,"No request sent",{reason:"API key is not set"});return}if(N(t)==="object"&&Object.prototype.hasOwnProperty.call(t,"_q")&&(t=tn(new z,t)),t instanceof z){if(Object.keys(t.userPropertiesOperations).length>0)return this._logEvent(I.IDENTIFY_EVENT,null,null,t.userPropertiesOperations,null,null,null,e,r,n);ae(e,r,0,"No request sent",{reason:"No user property operations"})}else m.log.error("Invalid identify input type. Expected Identify object but saw "+N(t)),ae(e,r,0,"No request sent",{reason:"Invalid identify input type"})};P.prototype.groupIdentify=function(t,e,r,n,i,o){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(!this._apiKeySet("groupIdentify()")){ae(n,i,0,"No request sent",{reason:"API key is not set"});return}if(!m.validateInput(t,"group_type","string")||m.isEmptyString(t)){ae(n,i,0,"No request sent",{reason:"Invalid group type"});return}if(e==null){ae(n,i,0,"No request sent",{reason:"Invalid group name"});return}if(N(r)==="object"&&Object.prototype.hasOwnProperty.call(r,"_q")&&(r=tn(new z,r)),r instanceof z){if(Object.keys(r.userPropertiesOperations).length>0)return this._logEvent(I.GROUP_IDENTIFY_EVENT,null,null,null,bt({},t,e),r.userPropertiesOperations,null,n,i,o);ae(n,i,0,"No request sent",{reason:"No group property operations"})}else m.log.error("Invalid identify input type. Expected Identify object but saw "+N(r)),ae(n,i,0,"No request sent",{reason:"Invalid identify input type"})};P.prototype.setVersionName=function(e){if(this._shouldDeferCall())return this._q.push(["setVersionName"].concat(Array.prototype.slice.call(arguments,0)));m.validateInput(e,"versionName","string")&&(this.options.versionName=e)};P.prototype._logEvent=function(e,r,n,i,o,a,c,f,s,u){if(en(this),!e){ae(f,s,0,"No request sent",{reason:"Missing eventType"});return}if(this.options.optOut){ae(f,s,0,"No request sent",{reason:"optOut is set to true"});return}try{var d;e===I.IDENTIFY_EVENT||e===I.GROUP_IDENTIFY_EVENT?d=this.nextIdentifyId():d=this.nextEventId();var l=this.nextSequenceNumber(),p=N(c)==="number"?c:new Date().getTime();u?this._sessionId=-1:(!this._sessionId||!this._lastEventTime||p-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=p,this._runNewSessionStartCallbacks()),this._lastEventTime=p,Le(this);var h=this._ua.browser.name,C=this._ua.browser.major,T=this._ua.device.model||this._ua.os.name,E=this._ua.device.vendor;i=i||{};var x=fe({},this._apiPropertiesTrackingOptions);n=fe(fe({},n||{}),x),r=r||{},o=o||{},a=a||{};var R={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:p,event_id:d,session_id:this._sessionId||-1,event_type:e,version_name:this.options.versionName||null,platform:it(this,"platform")?this.options.platform:null,os_name:it(this,"os_name")&&h||null,os_version:it(this,"os_version")&&C||null,device_model:it(this,"device_model")&&T||null,device_manufacturer:it(this,"device_manufacturer")&&E||null,language:it(this,"language")?this.options.language:null,api_properties:n,event_properties:m.truncate(m.validateProperties(r)),user_properties:m.truncate(m.validateProperties(i)),uuid:ku(),library:this.options.library,sequence_number:l,groups:m.truncate(m.validateGroups(o)),group_properties:m.truncate(m.validateProperties(a)),user_agent:this._userAgent,partner_id:this.options.partnerId||null};return Gu(this)&&(R.plan={branch:this.options.plan.branch||void 0,source:this.options.plan.source||void 0,version:this.options.plan.version||void 0,versionId:this.options.plan.versionId||void 0}),Bu(this)&&(R.ingestion_metadata={source_name:this.options.ingestionMetadata.sourceName||void 0,source_version:this.options.ingestionMetadata.sourceVersion||void 0}),e===I.IDENTIFY_EVENT||e===I.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event:R,callback:f,errorCallback:s}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event:R,callback:f,errorCallback:s}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),e===I.IDENTIFY_EVENT&&this._connector&&this._connector.identityStore.editIdentity().updateUserProperties(m.truncate(m.validateProperties(i))).commit(),d}catch(v){m.log.error(v)}};Gu=function(e){return e.options.plan&&(e.options.plan.source||e.options.plan.branch||e.options.plan.version||e.options.plan.versionId)},Bu=function(e){return e.options.ingestionMetadata&&(e.options.ingestionMetadata.sourceName||e.options.ingestionMetadata.sourceVersion)},it=function(e,r){return!!e.options.trackingOptions[r]},Wu=function(e){for(var r=["city","country","dma","ip_address","region"],n={},i=0;i<r.length;i++){var o=r[i];it(e,o)||(n[o]=!1)}return n};P.prototype._limitEventsQueued=function(e){if(e.length>this.options.savedMaxCount){var r=e.splice(0,e.length-this.options.savedMaxCount);r.forEach(function(n){ae(n.callback,n.errorCallback,0,"No request sent",{reason:"Event dropped because options.savedMaxCount exceeded. User may be offline or have a content blocker"})})}};P.prototype.logEvent=function(e,r,n,i){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return this._shouldDeferCall()?this._q.push(["logEvent"].concat(Array.prototype.slice.call(arguments,0))):this.logEventWithTimestamp(e,r,null,n,i,o)};P.prototype.logEventWithTimestamp=function(e,r,n,i,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return this._shouldDeferCall()?this._q.push(["logEventWithTimestamp"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEvent()")?m.validateInput(e,"eventType","string")?m.isEmptyString(e)?(ae(i,o,0,"No request sent",{reason:"Missing eventType"}),-1):(m.validateInput(a,"outOfSession","boolean")||ae(i,o,0,"No request sent",{reason:"Invalid outOfSession value"}),this._logEvent(e,r,null,null,null,null,n,i,o,a)):(ae(i,o,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(ae(i,o,0,"No request sent",{reason:"API key not set"}),-1)};P.prototype.logEventWithGroups=function(t,e,r,n,i){var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return this._shouldDeferCall()?this._q.push(["logEventWithGroups"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEventWithGroups()")?m.validateInput(t,"eventType","string")?(m.validateInput(o,"outOfSession","boolean")||ae(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid outOfSession value"}),this._logEvent(t,e,null,null,r,null,null,n,i,o)):(ae(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(ae(event.callback,event.errorCallback,0,"No request sent",{reason:"API key not set"}),-1)};eo=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ae=function(e,r,n,i,o){N(e)==="function"&&e(n,i,o),N(r)==="function"&&r(n,i,o)};P.prototype.logRevenueV2=function(e){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if(N(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=tn(new Ce,e)),e instanceof Ce){if(e&&e._isValidRevenue())return this.logEvent(I.REVENUE_EVENT,e._toJSONObject())}else m.log.error("Invalid revenue input type. Expected Revenue object but saw "+N(e))};P.prototype.logRevenue=function(e,r,n){return this._shouldDeferCall()?this._q.push(["logRevenue"].concat(Array.prototype.slice.call(arguments,0))):!this._apiKeySet("logRevenue()")||!eo(e)||r!==void 0&&!eo(r)?-1:this._logEvent(I.REVENUE_EVENT,{},{productId:n,special:"revenue_amount",quantity:r||1,price:e},null,null,null,null,null)};P.prototype._logErrorsOnEvents=function(e,r,n,i){for(var o=["_unsentEvents","_unsentIdentifys"],a=0;a<o.length;a++)for(var c=o[a],f=c==="_unsentEvents"?e:r,s=0;s<this[c].length;s++){var u=this[c][s];u.event.event_id<=f&&u.errorCallback&&u.errorCallback(n,i)}};P.prototype.removeEvents=function(e,r,n,i){to(this,"_unsentEvents",e,n,i),to(this,"_unsentIdentifys",r,n,i)};to=function(e,r,n,i,o){if(!(n<0)){for(var a=[],c=0;c<e[r].length;c++){var f=e[r][c];f.event.event_id>n?a.push(f):f.callback&&f.callback(i,o)}e[r]=a}};P.prototype.sendEvents=function(){if(!this._apiKeySet("sendEvents()")){this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"});return}if(this.options.optOut){this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"});return}if(this._unsentCount()!==0){if(this.options.transport!==I.TRANSPORT_BEACON){if(this._sending)return;this._sending=!0}var e=this.options.forceHttps||k.location.protocol==="https:"?"https":"http",r=e+"://"+this.options.apiEndpoint,n=Math.min(this._unsentCount(),this.options.uploadBatchSize),i=this._mergeEventsAndIdentifys(n),o=i.maxEventId,a=i.maxIdentifyId,c=JSON.stringify(i.eventsToSend.map(function(h){var C=h.event;return C})),f=new Date().getTime(),s={client:this.options.apiKey,e:c,v:I.API_VERSION,upload_time:f,checksum:(0,ro.default)(I.API_VERSION+this.options.apiKey+c+f)};if(this.options.transport===I.TRANSPORT_BEACON&&typeof navigator<"u"){var u=navigator.sendBeacon(r,new URLSearchParams(s));u?(this.removeEvents(o,a,200,"success"),this.options.saveEvents&&this.saveEvents()):this._logErrorsOnEvents(o,a,0,"");return}var d=this;try{new po(r,s,this.options.headers).send(function(h,C){d._sending=!1;try{h===200?(d.removeEvents(o,a,h,C),d.options.saveEvents&&d.saveEvents(),d._sendEventsIfReady()):(d._logErrorsOnEvents(o,a,h,C),h===413&&(d.options.uploadBatchSize===1&&d.removeEvents(o,a,h,C),d.options.uploadBatchSize=Math.ceil(n/2),d.sendEvents()))}catch{}})}catch(h){var l=0,p="Request failed to send";m.log.error(p),d._logErrorsOnEvents(o,a,l,p),d.removeEvents(o,a,l,p,{reason:h.message})}}};P.prototype._mergeEventsAndIdentifys=function(e){for(var r=[],n=0,i=-1,o=0,a=-1;r.length<e;){var c=void 0,f=o>=this._unsentIdentifys.length,s=n>=this._unsentEvents.length;if(s&&f){m.log.error("Merging Events and Identifys, less events and identifys than expected");break}else f?(c=this._unsentEvents[n++],i=c.event.event_id):s?(c=this._unsentIdentifys[o++],a=c.event.event_id):!("sequence_number"in this._unsentEvents[n].event)||this._unsentEvents[n].event.sequence_number<this._unsentIdentifys[o].event.sequence_number?(c=this._unsentEvents[n++],i=c.event.event_id):(c=this._unsentIdentifys[o++],a=c.event.event_id);r.push(c)}return{eventsToSend:r,maxEventId:i,maxIdentifyId:a}};P.prototype.setGlobalUserProperties=function(e){this.setUserProperties(e)};P.prototype.__VERSION__=function(){return this.options.library.version};P.prototype.setLibrary=function(e,r){e!==null&&typeof e<"u"&&(this.options.library.name=e),r!==null&&typeof r<"u"&&(this.options.library.version=r)};P.prototype._shouldDeferCall=function(){return this._pendingReadStorage||this._initializationDeferred};P.prototype._deferInitialization=function(){this._initializationDeferred=!0,this._q.push(["init"].concat(Array.prototype.slice.call(arguments,0)))};P.prototype.enableTracking=function(){this._initializationDeferred=!1,Le(this),this.runQueuedFunctions()};P.prototype._refreshDynamicConfig=function(){this.options.useDynamicConfig&&Zi.refresh(this.options.serverZone,this.options.forceHttps,function(){this.options.apiEndpoint=Zi.ingestionEndpoint}.bind(this))};P.prototype.getDeviceId=function(){return this.options.deviceId};P.prototype.getUserId=function(){return this.options.userId};P.prototype.setMinTimeBetweenSessionsMillis=function(e){if(m.validateInput(e,"timeInMillis","number")){if(this._shouldDeferCall())return this._q.push(["setMinTimeBetweenSessionsMillis"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.sessionTimeout=e}catch(r){m.log.error(r)}}};P.prototype.setEventUploadThreshold=function(e){if(m.validateInput(e,"eventUploadThreshold","number")){if(this._shouldDeferCall())return this._q.push(["setEventUploadThreshold"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.eventUploadThreshold=e}catch(r){m.log.error(r)}}};P.prototype.setUseDynamicConfig=function(e){if(m.validateInput(e,"useDynamicConfig","boolean")){if(this._shouldDeferCall())return this._q.push(["setUseDynamicConfig"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.useDynamicConfig=e,this._refreshDynamicConfig()}catch(r){m.log.error(r)}}};P.prototype.setServerZone=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(e!==at.EU&&e!==at.US||!m.validateInput(r,"serverZoneBasedApi","boolean"))){if(this._shouldDeferCall())return this._q.push(["setServerZone"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.serverZone=e,this.options.serverZoneBasedApi=r,r&&(this.options.apiEndpoint=ho(this.options.serverZone))}catch(n){m.log.error(n)}}};P.prototype.setServerUrl=function(e){if(m.validateInput(e,"serverUrl","string")){if(this._shouldDeferCall())return this._q.push(["setServerUrl"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.apiEndpoint=e}catch(r){m.log.error(r)}}};B=function(){this.options=fe({},ze),this._q=[],this._instances={}};B.prototype.Identify=z;B.prototype.Revenue=Ce;B.prototype.getInstance=function(e){e=m.isEmptyString(e)?I.DEFAULT_INSTANCE:e.toLowerCase();var r=this._instances[e];return r===void 0&&(r=new P(e),this._instances[e]=r),r};B.prototype.init=function(e,r,n,i){this.getInstance().init(e,r,n,function(o){this.options=o.options,N(i)==="function"&&i(o)}.bind(this))},B.prototype.isNewSession=function(){return this.getInstance().isNewSession()},B.prototype.getSessionId=function(){return this.getInstance().getSessionId()},B.prototype.nextEventId=function(){return this.getInstance().nextEventId()},B.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},B.prototype.nextSequenceNumber=function(){return this.getInstance().nextSequenceNumber()},B.prototype.saveEvents=function(){this.getInstance().saveEvents()},B.prototype.setDomain=function(e){this.getInstance().setDomain(e)},B.prototype.setUserId=function(e){this.getInstance().setUserId(e)},B.prototype.setGroup=function(t,e){this.getInstance().setGroup(t,e)},B.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},B.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},B.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},B.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},B.prototype.clearUserProperties=function(){this.getInstance().clearUserProperties()},B.prototype.identify=function(t,e){this.getInstance().identify(t,e)},B.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},B.prototype.logEvent=function(e,r,n){return this.getInstance().logEvent(e,r,n)},B.prototype.logEventWithGroups=function(t,e,r,n){return this.getInstance().logEventWithGroups(t,e,r,n)},B.prototype.logRevenueV2=function(e){return this.getInstance().logRevenueV2(e)},B.prototype.logRevenue=function(e,r,n){return this.getInstance().logRevenue(e,r,n)},B.prototype.removeEvents=function(e,r){this.getInstance().removeEvents(e,r)},B.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},B.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)};B.prototype.__VERSION__=vo;nr=typeof k<"u"&&k.amplitude||{},st=new B;st._q=nr._q||[];for(rr in nr._iq)Object.prototype.hasOwnProperty.call(nr._iq,rr)&&(st.getInstance(rr)._q=nr._iq[rr]._q||[])});var ue,mo,yo,rn=S(()=>{"use strict";go();hi();Ar();ue={},mo=({apiKey:t,user:e})=>{if(typeof window<"u"&&e&&t){st.getInstance().init(t);let r=e.analytics_data||{};ue.userId=e._id,ue.customer=!!e.plan,ue.planType=e.plan?e.plan.level:"free",ue.signUpDate=e.createDate&&mt(yt(e.createDate),"yyyy-MM-dd"),ue.lastVisitDate=e.last_token_refresh&&mt(yt(e.last_token_refresh),"yyyy-MM-dd"),ue.totalProjects=e.created_mags_count||0,ue.publishedProjects=e.mags_count||0,ue.customDomainProjects=e.projectDomains||0,ue.betaTester=!!e.permissions?.can_use_beta_testing,ue.lifeTimeValue=r.lifeTimeValue||0,ue.numOfVisits=["profile","public","editor"].reduce((n,i)=>n+(r[`visit_${i}`]||0),0),e.plan&&(ue.planPeriod=e.plan.interval),e.stripe&&(ue.firstPaymentDate=e.stripe.subscription_start&&mt(yt(e.stripe.subscription_start),"yyyy-MM-dd"),ue.stripeId=e.stripe._id),e.stripe&&e.stripe.coupon_name&&(ue.coupon=e.stripe.coupon_name),e.job&&(ue.job=e.job.toLowerCase().includes("other")?"other":e.job.toLowerCase()),e.future_project&&(ue.project=e.future_project.toLowerCase().includes("other")?"other":e.future_project.toLowerCase()),e._id&&st.getInstance().setUserId(e._id),st.getInstance().setUserProperties(ue)}},yo=(t,e)=>{typeof window<"u"&&st.getInstance().logEvent(t,e)}});var le,At=S(()=>{"use strict";le=()=>typeof window<"u"});async function nn({partnerId:t}){if(!(!le()||_o()||!t))return new Promise((e,r)=>{window._linkedin_data_partner_ids=window._linkedin_data_partner_ids||[],window._linkedin_data_partner_ids.push(t);let n=document.getElementsByTagName("script")[0],i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src="https://snap.licdn.com/li.lms-analytics/insight.min.js",i.onload=()=>e(),i.onerror=()=>r(),n?.parentNode?.insertBefore(i,n);let o=document.createElement("img");o.alt="",o.height=1,o.width=1,o.src=`https://px.ads.linkedin.com/collect/?pid=${t}&fmt=gif`})}async function bo({partnerId:t,eventId:e}){!le()||!e||(!_o()&&t&&await nn({partnerId:t}),window?.lintrk?.("track",{conversion_id:e}))}var _o,wo=S(()=>{"use strict";At();_o=()=>!!window?.lintrk});var Eo,So=S(()=>{"use strict";(function(t){t.Registration="iGBtCP76u9QDEIu60MsD",t.FirstPurchase="IAUrCIivjtYDEIu60MsD",t.FirstPurchasePersonal="7fmQCNLswYAYEIu60MsD",t.FirstPurchaseFreelancer="REXDCIHywYAYEIu60MsD",t.FirstPurchaseStudio="86PxCICIw4AYEIu60MsD",t.FirstPurchaseBusiness="o7gMCOKNw4AYEIu60MsD"})(Eo||(Eo={}))});var on,Dt,Nt,ut,Ku,$u,Hu,Xu,zu,Yu,Qu,Zu,Ju,an=S(()=>{"use strict";on=Xt(Ei());zt();rn();wo();At();zt();So();_i();Dt=()=>{if(le())return!!window.gtag},Nt="",ut="",Ku=({GA_ID:t,GA4_ID:e,GOOGLE_ADS_ID:r,userId:n,userEmail:i})=>{let o=document.createElement("script");o.async=!0,o.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,document.head.appendChild(o);let a=document.createElement("script");a.text=`
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    ${e?`gtag('config', '${e}', { send_page_view: false, user_id: '${n||""}' });`:""}
    gtag('js', new Date());
    gtag('set', {
      'send_page_view': false,
      'custom_map': {
        'dimension2': 'userId',
        'dimension9': 'userId',
        'dimension13': 'clientId'
      }
    })
    ${n?`gtag('config', '${t}', { 'userId': '${n}'});`:`gtag('config', '${t}');`}
    ${r?`gtag('config', '${r}', { "allow_enhanced_conversions": true });`:""}
    ${r&&i?`gtag('set', 'user_data', { "email": "${i}" });`:""}
  `,document.head.appendChild(a)},$u=({userId:t,ignoreIsGAInitialized:e=!1,GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userEmail:o})=>{if(!(!le()||Dt()&&!e))return Nt=n||"",Ku({GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userId:t,userEmail:o}),{GA_ID:r,GA4_ID:n,GOOGLE_ADS_ID:i,userId:t}},Hu=()=>{let t=on.default.get("shortlink_redirect");if(!t)return{};let e=JSON.parse(atob(t));return on.default.remove("shortlink_redirect"),{campaignName:e.utm_campaign,campaignSource:e.utm_source,campaignMedium:e.utm_medium}},Xu=({campaignName:t,campaignSource:e,campaignMedium:r}={})=>{if(!le()||!Dt())return null;let n={...Hu(),campaignName:t,campaignSource:e,campaignMedium:r},i=(o,a)=>{let c={campaign:{name:o.campaignName,source:o.campaignSource,medium:o.campaignMedium},c_id:a||""};window.gtag("event","page_view",c)};return Nt?ut?i(n,ut):window.gtag("get",Nt,"client_id",o=>{ut=o,i(n,o)}):i(n),n},zu=(t,e={})=>{if(!le()||!Dt())return null;let r=e.eventCategory?e.eventCategory:t?Ii(t):void 0,n=i=>{let o={c_id:i||"",event_category:r,event_label:e.eventLabel,value:e.eventValue};for(let a in e)["eventCategory","eventLabel","eventValue"].includes(a)||(o[a]=e[a]);window.gtag("event",t,o)};return Nt?ut?n(ut):window.gtag("get",Nt,"client_id",i=>{typeof i=="string"&&(ut=i,n(ut))}):n(""),{action:t,...e}},Yu=({actionName:t,eventLabel:e,eventCategory:r})=>!le()||!Dt()?null:(window.gtag("event",t,{event_category:r,event_label:e}),{actionName:t,eventCategory:r,eventLabel:e}),Qu=({CONVERSION_ID:t,CONVERSION_LABEL:e,value:r,transaction_id:n="",...i})=>{if(!le()||!Dt())return null;let o={};return r&&(o={value:r,transaction_id:n,currency:"USD"}),o={send_to:`${t}/${e}`,...o,...i},window.gtag("event","conversion",o),{...i,CONVERSION_ID:t,CONVERSION_LABEL:e}},Zu=({location:t,role:e,withAnalytics:r=!0})=>!t||!le()?Promise.resolve():fetch(`/api/me/visit/${t}/${e||""}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({withAnalytics:r})}),Ju={init:$u,sendEvent:zu,sendConversionEvent:Qu,sendPromoActionEvent:Yu,trackPage:Xu,trackDailyVisit:Zu,initAmplitude:mo,sendAmplitudeEvent:yo,initLinkedInInsights:nn,sendEventToLinkedInInsights:bo}});var Io=Ht((ar,sn)=>{"use strict";(function(t,e){typeof ar=="object"&&typeof sn=="object"?sn.exports=e():typeof define=="function"&&define.amd?define([],e):typeof ar=="object"?ar.ReactPixel=e():t.ReactPixel=e()})(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(n,i,o){r.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:o})},r.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,i){if(1&i&&(n=r(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var a in n)r.d(o,a,function(c){return n[c]}.bind(null,a));return o},r.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(i,"a",i),i},r.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},r.p="",r(r.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(d){return function(l){if(Array.isArray(l))return i(l)}(d)||function(l){if(typeof Symbol<"u"&&Symbol.iterator in Object(l))return Array.from(l)}(d)||function(l,p){if(l){if(typeof l=="string")return i(l,p);var h=Object.prototype.toString.call(l).slice(8,-1);if(h==="Object"&&l.constructor&&(h=l.constructor.name),h==="Map"||h==="Set")return Array.from(l);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return i(l,p)}}(d)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function i(d,l){(l==null||l>d.length)&&(l=d.length);for(var p=0,h=new Array(l);p<l;p++)h[p]=d[p];return h}r.r(e);var o=!1,a=!1,c=function(){var d;if(a){for(var l=arguments.length,p=new Array(l),h=0;h<l;h++)p[h]=arguments[h];(d=console).info.apply(d,n(["[react-facebook-pixel]"].concat(p)))}},f=function(){var d;if(a){for(var l=arguments.length,p=new Array(l),h=0;h<l;h++)p[h]=arguments[h];(d=console).info.apply(d,n(["[react-facebook-pixel]"].concat(p)))}},s=function(){return o||c("Pixel not initialized before using call ReactPixel.init with required params"),o},u={autoConfig:!0,debug:!1};e.default={init:function(d){var l,p,h,C,T,E,x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:u;o=typeof window<"u"&&!!window.fbq,l=window,p=document,h="script",l.fbq||(C=l.fbq=function(){C.callMethod?C.callMethod.apply(C,arguments):C.queue.push(arguments)},l._fbq||(l._fbq=C),C.push=C,C.loaded=!0,C.version="2.0",C.queue=[],(T=p.createElement(h)).async=!0,T.src="https://connect.facebook.net/en_US/fbevents.js",(E=p.getElementsByTagName(h)[0]).parentNode.insertBefore(T,E)),d?(R.autoConfig===!1&&fbq("set","autoConfig",!1,d),fbq("init",d,x),o=!0,a=R.debug):c("Please insert pixel id for initializing")},pageView:function(){s()&&(fbq("track","PageView"),a&&f("called fbq('track', 'PageView');"))},track:function(d,l,p){s()&&(fbq("track",d,l,p),a&&(f("called fbq('track', '".concat(d,"');")),l&&f("with data",l),p&&f("with eventData",p)))},trackSingle:function(d,l,p,h){s()&&(fbq("trackSingle",d,l,p,h),a&&(f("called fbq('trackSingle', '".concat(d,"', '").concat(l,"');")),p&&f("with data",p),h&&f("with eventData",h)))},trackCustom:function(d,l,p){s()&&(fbq("trackCustom",d,l,p),a&&(f("called fbq('trackCustom', '".concat(d,"');")),l&&f("with data",l),p&&f("with eventData",p)))},trackSingleCustom:function(d,l,p,h){s()&&(fbq("trackSingle",d,l,p,h),a&&(f("called fbq('trackSingleCustom', '".concat(d,"', '").concat(l,"');")),p&&f("with data",p),h&&f("with eventData",h)))},grantConsent:function(){s()&&(fbq("consent","grant"),a&&f("called fbq('consent', 'grant');"))},revokeConsent:function(){s()&&(fbq("consent","revoke"),a&&f("called fbq('consent', 'revoke');"))},fbq:function(d){function l(){return d.apply(this,arguments)}return l.toString=function(){return d.toString()},l}(function(){if(s()){for(var d=arguments.length,l=new Array(d),p=0;p<d;p++)l[p]=arguments[p];fbq.apply(void 0,l),a&&(f("called fbq('".concat(l.slice(0,2).join("', '"),"')")),l[2]&&f("with data",l[2]))}})}}])})});var To,cf,Oo=S(()=>{"use strict";At();To=!1,cf=({id:t,eventName:e,eventParams:r={},eventIdParams:n={}})=>{if(!le())return;let i=Io();To||(i.default.init(t),To=!0),i.default.track(e,r,n)}});function xo(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function ee(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?o(u.value):i(u.value).then(c,f)}s((n=n.apply(t,e||[])).next())})}function te(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(u){s=[6,u],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function ke(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Fe(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function Ut(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var $,je=S(()=>{"use strict";$=function(){return $=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},$.apply(this,arguments)}});var Po,Co,Ro,Ao,No,Do,Uo,un=S(()=>{"use strict";Po="Event tracked successfully",Co="Unexpected error occurred",Ro="Event rejected due to exceeded retry count",Ao="Event skipped due to optOut config",No="Event rejected due to missing API key",Do="Invalid API key",Uo="Client not initialized"});var re,qe,Ye,ko=S(()=>{"use strict";(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(re||(re={}));(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE="$revenue"})(qe||(qe={}));(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(Ye||(Ye={}))});var de,jo=S(()=>{"use strict";(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(de||(de={}))});var H,Mo=S(()=>{"use strict";(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(H||(H={}))});var cn,Lo=S(()=>{"use strict";cn=null});var we=S(()=>{"use strict";ko();jo();Mo();Lo()});var Ve,sr=S(()=>{"use strict";we();Ve=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=H.Unknown),{event:t,code:e,message:r}}});var Se,ur=S(()=>{"use strict";Se=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Se)}});var Fo,qo=S(()=>{"use strict";je();sr();ur();Fo=function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,i,o;return ee(this,void 0,void 0,function(){return te(this,function(a){switch(a.label){case 0:return e.name=(n=e.name)!==null&&n!==void 0?n:Se(),e.type=(i=e.type)!==null&&i!==void 0?i:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,r,this.client)];case 1:return a.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e){var r;return ee(this,void 0,void 0,function(){var n,i;return te(this,function(o){switch(o.label){case 0:return n=this.plugins.findIndex(function(a){return a.name===e}),i=this.plugins[n],this.plugins.splice(n,1),[4,(r=i.teardown)===null||r===void 0?void 0:r.call(i)];case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var i;return(i=n.teardown)===null||i===void 0?void 0:i.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return ee(this,void 0,void 0,function(){var r,n,i,o,a,c,f,p,h,s,u,d,l,p,h,C,T,E,x,R,v,O;return te(this,function(g){switch(g.label){case 0:if(!e)return[2];r=Fe(e,1),n=r[0],i=Fe(e,2),o=i[1],a=this.plugins.filter(function(A){return A.type==="before"}),g.label=1;case 1:g.trys.push([1,6,7,8]),c=ke(a),f=c.next(),g.label=2;case 2:return f.done?[3,5]:(p=f.value,p.execute?[4,p.execute($({},n))]:[3,4]);case 3:if(h=g.sent(),h===null)return o({event:n,code:0,message:""}),[2];n=h,g.label=4;case 4:return f=c.next(),[3,2];case 5:return[3,8];case 6:return s=g.sent(),x={error:s},[3,8];case 7:try{f&&!f.done&&(R=c.return)&&R.call(c)}finally{if(x)throw x.error}return[7];case 8:u=this.plugins.filter(function(A){return A.type==="enrichment"||A.type===void 0}),g.label=9;case 9:g.trys.push([9,14,15,16]),d=ke(u),l=d.next(),g.label=10;case 10:return l.done?[3,13]:(p=l.value,p.execute?[4,p.execute($({},n))]:[3,12]);case 11:if(h=g.sent(),h===null)return o({event:n,code:0,message:""}),[2];n=h,g.label=12;case 12:return l=d.next(),[3,10];case 13:return[3,16];case 14:return C=g.sent(),v={error:C},[3,16];case 15:try{l&&!l.done&&(O=d.return)&&O.call(d)}finally{if(v)throw v.error}return[7];case 16:return T=this.plugins.filter(function(A){return A.type==="destination"}),E=T.map(function(A){var D=$({},n);return A.execute(D).catch(function(j){return Ve(D,0,String(j))})}),Promise.all(E).then(function(A){var D=Fe(A,1),j=D[0],W=j||Ve(n,100,"Event not tracked, no destination plugins on the instance");o(W)}),[2]}})})},t.prototype.flush=function(){return ee(this,void 0,void 0,function(){var e,r,n,i=this;return te(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(a){return i.apply(a)}))];case 1:return o.sent(),r=this.plugins.filter(function(a){return a.type==="destination"}),n=r.map(function(a){return a.flush&&a.flush()}),[4,Promise.all(n)];case 2:return o.sent(),[2]}})})},t}()});var fn,ct,ln,dn,Vo,Go,Bo,kt=S(()=>{"use strict";fn="-",ct="AMP",ln="".concat(ct,"_unsent"),dn="https://api2.amplitude.com/2/httpapi",Vo="https://api.eu.amplitude.com/2/httpapi",Go="https://api2.amplitude.com/batch",Bo="https://api.eu.amplitude.com/batch"});var ec,cr,pn,hn=S(()=>{"use strict";je();ec=1e3,cr=function(t){if(Object.keys(t).length>ec)return!1;for(var e in t){var r=t[e];if(!pn(e,r))return!1}return!0},pn=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var o=ke(e),a=o.next();!a.done;a=o.next()){var c=a.value;if(Array.isArray(c))return!1;if(typeof c=="object")i=i&&cr(c);else if(!["number","string"].includes(typeof c))return!1;if(!i)return!1}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return cr(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0}});var Re,vn=S(()=>{"use strict";je();we();kt();hn();Re=function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return $({},this._properties)},t.prototype.set=function(e,r){return this._safeSet(re.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet(re.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet(re.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet(re.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet(re.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet(re.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet(re.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet(re.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet(re.UNSET,e,fn),this},t.prototype.clearAll=function(){return this._properties={},this._properties[re.CLEAR_ALL]=fn,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[re.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===re.ADD?typeof n=="number":e!==re.UNSET&&e!==re.REMOVE?pn(r,n):!0},t}()});var Wo,jt,Ko,$o,Ho,gn=S(()=>{"use strict";je();we();vn();Wo=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return $($($({},n),r),e&&{event_properties:e})},jt=function(t,e){var r=$($({},e),{event_type:Ye.IDENTIFY,user_properties:t.getUserProperties()});return r},Ko=function(t,e,r,n){var i,o=$($({},n),{event_type:Ye.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[t]=e,i)});return o},$o=function(t,e,r){var n,i=new Re;i.set(t,e);var o=$($({},r),{event_type:Ye.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o},Ho=function(t,e){return $($({},e),{event_type:Ye.REVENUE,event_properties:t.getEventProperties()})}});var pe,mn=S(()=>{"use strict";pe=function(t){return{promise:t||Promise.resolve()}}});var yn,Xo=S(()=>{"use strict";je();un();qo();gn();sr();mn();yn=function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new Fo(this),this.name=e}return t.prototype._init=function(e){return ee(this,void 0,void 0,function(){return te(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),[4,this.runQueuedFunctions("q")];case 1:return r.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return ee(this,void 0,void 0,function(){var r,n,i,o,a,c,f,s;return te(this,function(u){switch(u.label){case 0:r=this[e],this[e]=[],u.label=1;case 1:u.trys.push([1,8,9,10]),n=ke(r),i=n.next(),u.label=2;case 2:return i.done?[3,7]:(o=i.value,a=o(),a&&"promise"in a?[4,a.promise]:[3,4]);case 3:return u.sent(),[3,6];case 4:return[4,a];case 5:u.sent(),u.label=6;case 6:return i=n.next(),[3,2];case 7:return[3,10];case 8:return c=u.sent(),f={error:c},[3,10];case 9:try{i&&!i.done&&(s=n.return)&&s.call(n)}finally{if(f)throw f.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:u.sent(),u.label=12;case 12:return[2]}})})},t.prototype.track=function(e,r,n){var i=Wo(e,r,n);return pe(this.dispatch(i))},t.prototype.identify=function(e,r){var n=jt(e,r);return pe(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,i){var o=Ko(e,r,n,i);return pe(this.dispatch(o))},t.prototype.setGroup=function(e,r,n){var i=$o(e,r,n);return pe(this.dispatch(i))},t.prototype.revenue=function(e,r){var n=Ho(e,r);return pe(this.dispatch(n))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),pe())},t.prototype._addPlugin=function(e){return pe(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),pe())},t.prototype._removePlugin=function(e){return pe(this.timeline.deregister(e))},t.prototype.dispatchWithCallback=function(e,r){if(!this.isReady)return r(Ve(e,0,Uo));this.process(e).then(r)},t.prototype.dispatch=function(e){return ee(this,void 0,void 0,function(){var r=this;return te(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,i))})]})})},t.prototype.process=function(e){return ee(this,void 0,void 0,function(){var i,r,n,i;return te(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Ve(e,0,Ao)]:[4,this.timeline.push(e)];case 1:return i=o.sent(),i.code===200?this.config.loggerProvider.log(i.message):i.code===100?this.config.loggerProvider.warn(i.message):this.config.loggerProvider.error(i.message),[2,i];case 2:return r=o.sent(),n=String(r),this.config.loggerProvider.error(n),i=Ve(e,0,n),[2,i];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut=!!e},t.prototype.flush=function(){return pe(this.timeline.flush())},t}()});var fr,zo=S(()=>{"use strict";je();we();hn();fr=function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setEventProperties=function(e){return cr(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?$({},this.properties):{};return e[qe.REVENUE_PRODUCT_ID]=this.productId,e[qe.REVENUE_QUANTITY]=this.quantity,e[qe.REVENUE_PRICE]=this.price,e[qe.REVENUE_TYPE]=this.revenueType,e[qe.REVENUE]=this.revenue,e},t}()});var Yo,Qo=S(()=>{"use strict";Yo=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,i,o){var a=Math.floor(o/r);return n[a]||(n[a]=[]),n[a].push(i),n},[])}});var lr,Mt,_n=S(()=>{"use strict";we();lr="Amplitude Logger ",Mt=function(){function t(){this.logLevel=de.None}return t.prototype.disable=function(){this.logLevel=de.None},t.prototype.enable=function(e){e===void 0&&(e=de.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<de.Verbose||console.log("".concat(lr,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<de.Warn||console.warn("".concat(lr,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<de.Error||console.error("".concat(lr,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<de.Debug||console.log("".concat(lr,"[Debug]: ").concat(e.join(" ")))},t}()});var dr,bn,tc,wn,En=S(()=>{"use strict";we();kt();_n();dr=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:"$default_instance",logLevel:de.Warn,loggerProvider:new Mt,offline:!1,optOut:!1,serverUrl:dn,serverZone:"US",useBatch:!1}},bn=function(){function t(e){var r,n,i,o;this._optOut=!1;var a=dr();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:a.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||a.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||a.flushQueueSize,this.instanceName=e.instanceName||a.instanceName,this.loggerProvider=e.loggerProvider||a.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:a.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:a.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:a.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||a.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:a.useBatch,this.loggerProvider.enable(this.logLevel);var c=wn(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t}(),tc=function(t,e){return t==="EU"?e?Bo:Vo:e?Go:dn},wn=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=dr().serverZone),r===void 0&&(r=dr().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:dr().serverZone;return{serverZone:n,serverUrl:tc(n,r)}}});function rc(t){return t instanceof Error?t.message:String(t)}function pr(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var Sn,Zo=S(()=>{"use strict";je();we();un();kt();Qo();sr();En();ur();Sn=function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduled=null,this.queue=[]}return t.prototype.setup=function(e){var r;return ee(this,void 0,void 0,function(){var n,i=this;return te(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(ln,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=o.sent(),n&&n.length>0&&Promise.all(n.map(function(a){return i.execute(a)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return e.insert_id||(e.insert_id=Se()),new Promise(function(n){var i={event:e,attempts:0,callback:function(o){return n(o)},timeout:0};r.addToQueue(i)})},t.prototype.getTryableList=function(e){var r=this;return e.filter(function(n){return n.attempts<r.config.flushMaxRetries?(n.attempts+=1,!0):(r.fulfillRequest([n],500,Ro),!1)})},t.prototype.scheduleTryable=function(e,r){var n=this;r===void 0&&(r=!1),e.forEach(function(i){if(r&&(n.queue=n.queue.concat(i)),i.timeout===0){n.schedule(n.config.flushIntervalMillis);return}setTimeout(function(){i.timeout=0,n.schedule(0)},i.timeout)})},t.prototype.addToQueue=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=this.getTryableList(e);this.scheduleTryable(n,!0),this.saveEvents()},t.prototype.schedule=function(e){var r=this;this.scheduled||this.config.offline||(this.scheduled=setTimeout(function(){r.flush(!0).then(function(){r.queue.length>0&&r.schedule(e)})},e))},t.prototype.flush=function(e){return e===void 0&&(e=!1),ee(this,void 0,void 0,function(){var r,n,i,o=this;return te(this,function(a){switch(a.label){case 0:return this.config.offline?(this.config.loggerProvider.debug("Skipping flush while offline."),[2]):(r=[],n=[],this.queue.forEach(function(c){return c.timeout===0?r.push(c):n.push(c)}),this.scheduled&&(clearTimeout(this.scheduled),this.scheduled=null),i=Yo(r,this.config.flushQueueSize),[4,Promise.all(i.map(function(c){return o.send(c,e)}))]);case 1:return a.sent(),this.scheduleTryable(n),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),ee(this,void 0,void 0,function(){var n,i,o,a,c;return te(this,function(f){switch(f.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,No)];n={api_key:this.config.apiKey,events:e.map(function(s){var u=s.event,d=u.extra,l=xo(u,["extra"]);return l}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString()},f.label=1;case 1:return f.trys.push([1,3,,4]),i=wn(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,n)];case 2:return o=f.sent(),o===null?(this.fulfillRequest(e,0,Co),[2]):r?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(pr(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return a=f.sent(),c=rc(a),this.config.loggerProvider.error(c),this.handleResponse({status:H.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case H.Success:{this.handleSuccessResponse(e,r);break}case H.Invalid:{this.handleInvalidResponse(e,r);break}case H.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case H.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,Po)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(Do)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var i=Ut(Ut(Ut(Ut([],Fe(Object.values(e.body.eventsWithInvalidFields)),!1),Fe(Object.values(e.body.eventsWithMissingFields)),!1),Fe(Object.values(e.body.eventsWithInvalidIdLengths)),!1),Fe(e.body.silencedEvents),!1).flat(),o=new Set(i),a=r.filter(function(f,s){if(o.has(s)){n.fulfillRequest([f],e.statusCode,e.body.error);return}return!0});a.length>0&&this.config.loggerProvider.warn(pr(e));var c=this.getTryableList(a);this.scheduleTryable(c)},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(pr(e)),this.config.flushQueueSize/=2;var n=this.getTryableList(r);this.scheduleTryable(n)},t.prototype.handleRateLimitResponse=function(e,r){var n=this,i=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),a=e.body.throttledEvents,c=new Set(i),f=new Set(o),s=new Set(a),u=r.filter(function(l,p){if(l.event.user_id&&c.has(l.event.user_id)||l.event.device_id&&f.has(l.event.device_id)){n.fulfillRequest([l],e.statusCode,e.body.error);return}return s.has(p)&&(l.timeout=n.throttleTimeout),!0});u.length>0&&this.config.loggerProvider.warn(pr(e));var d=this.getTryableList(u);this.scheduleTryable(d)},t.prototype.handleOtherResponse=function(e){var r=this,n=e.map(function(o){return o.timeout=o.attempts*r.retryTimeout,o}),i=this.getTryableList(n);this.scheduleTryable(i)},t.prototype.fulfillRequest=function(e,r,n){this.removeEvents(e),e.forEach(function(i){return i.callback(Ve(i.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(r){return r.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(r){return!e.some(function(n){return n.event.insert_id===r.event.insert_id})}),this.saveEvents()},t}()});var nc,Y,ic,Q,Z,Jo=S(()=>{"use strict";je();we();nc=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},Y=function(t){return function(){var e=$({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}},ic=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=ke(e.split(".")),o=i.next();!o.done;o=i.next()){var a=o.value;if(a in t)t=t[a];else return}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},Q=function(t,e){return function(){var r,n,i={};try{for(var o=ke(e),a=o.next();!a.done;a=o.next()){var c=a.value;i[c]=ic(t,c)}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},Z=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=r(),f=c.logger,s=c.logLevel;if(s&&s<de.Debug||!s||!f)return t.apply(i,o);var u={type:"invoke public method",name:e,args:o,stacktrace:nc(1),time:{start:new Date().toISOString()},states:{}};n&&u.states&&(u.states.before=n());var d=t.apply(i,o);return d&&d.promise?d.promise.then(function(){n&&u.states&&(u.states.after=n()),u.time&&(u.time.end=new Date().toISOString()),f.debug(JSON.stringify(u,null,2))}):(n&&u.states&&(u.states.after=n()),u.time&&(u.time.end=new Date().toISOString()),f.debug(JSON.stringify(u,null,2))),d}}});var hr,ea=S(()=>{"use strict";je();hr=function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return ee(this,void 0,void 0,function(){return te(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return ee(this,void 0,void 0,function(){return te(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return ee(this,void 0,void 0,function(){var r;return te(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return ee(this,void 0,void 0,function(){return te(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return ee(this,void 0,void 0,function(){return te(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return ee(this,void 0,void 0,function(){return te(this,function(e){return this.memoryStorage.clear(),[2]})})},t}()});var ft,ta=S(()=>{"use strict";we();ft=function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,a,c,f,s,u,d,l,p,h,C,T,E,x,R,v,O,g,A;if(typeof e!="object")return null;var D=e.code||0,j=this.buildStatus(D);switch(j){case H.Success:return{status:j,statusCode:D,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case H.Invalid:return{status:j,statusCode:D,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(a=e.missing_field)!==null&&a!==void 0?a:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(f=e.events_with_missing_fields)!==null&&f!==void 0?f:{},eventsWithInvalidIdLengths:(s=e.events_with_invalid_id_lengths)!==null&&s!==void 0?s:{},epsThreshold:(u=e.eps_threshold)!==null&&u!==void 0?u:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(l=e.silenced_devices)!==null&&l!==void 0?l:[],silencedEvents:(p=e.silenced_events)!==null&&p!==void 0?p:[],throttledDevices:(h=e.throttled_devices)!==null&&h!==void 0?h:{},throttledEvents:(C=e.throttled_events)!==null&&C!==void 0?C:[]}};case H.PayloadTooLarge:return{status:j,statusCode:D,body:{error:(T=e.error)!==null&&T!==void 0?T:""}};case H.RateLimit:return{status:j,statusCode:D,body:{error:(E=e.error)!==null&&E!==void 0?E:"",epsThreshold:(x=e.eps_threshold)!==null&&x!==void 0?x:0,throttledDevices:(R=e.throttled_devices)!==null&&R!==void 0?R:{},throttledUsers:(v=e.throttled_users)!==null&&v!==void 0?v:{},exceededDailyQuotaDevices:(O=e.exceeded_daily_quota_devices)!==null&&O!==void 0?O:{},exceededDailyQuotaUsers:(g=e.exceeded_daily_quota_users)!==null&&g!==void 0?g:{},throttledEvents:(A=e.throttled_events)!==null&&A!==void 0?A:[]}};case H.Timeout:default:return{status:j,statusCode:D}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?H.Success:e===429?H.RateLimit:e===413?H.PayloadTooLarge:e===408?H.Timeout:e>=400&&e<500?H.Invalid:e>=500?H.Failed:H.Unknown},t}()});var Ie=S(()=>{"use strict";Xo();vn();zo();Zo();En();_n();kt();mn();Jo();ur();ea();ta();gn()});function Te(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");In(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function q(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?o(u.value):i(u.value).then(c,f)}s((n=n.apply(t,e||[])).next())})}function V(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(u){s=[6,u],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function ra(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}var In,ce,Ee=S(()=>{"use strict";In=function(t,e){return In=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},In(t,e)};ce=function(){return ce=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ce.apply(this,arguments)}});function na(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function On(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function he(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?o(u.value):i(u.value).then(c,f)}s((n=n.apply(t,e||[])).next())})}function ve(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(u){s=[6,u],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function vr(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}var Tn,me,Qe=S(()=>{"use strict";Tn=function(t,e){return Tn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Tn(t,e)};me=function(){return me=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},me.apply(this,arguments)}});var ge,gr=S(()=>{"use strict";ge=function(){if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof window<"u")return window}});var Ze,ia,xn=S(()=>{"use strict";gr();Ze=function(){var t,e=ge();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var a=o.split("=",2),c=ia(a[0]),f=ia(a[1]);return f&&(i[c]=f),i},{});return n},ia=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}}});var oa,aa,sa,ua,ca,fa,Pn,Cn,Rn,An,Nn,Dn,Un,kn,jn,Mn,Ln,Ge,Lt=S(()=>{"use strict";oa="utm_campaign",aa="utm_content",sa="utm_id",ua="utm_medium",ca="utm_source",fa="utm_term",Pn="dclid",Cn="fbclid",Rn="gbraid",An="gclid",Nn="ko_click_id",Dn="li_fat_id",Un="msclkid",kn="rtd_cid",jn="ttclid",Mn="twclid",Ln="wbraid",Ge={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rtd_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0}});var Ft,Fn=S(()=>{"use strict";Qe();xn();Lt();Ft=function(){function t(){}return t.prototype.parse=function(){return he(this,void 0,void 0,function(){return ve(this,function(e){return[2,me(me(me(me({},Ge),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=Ze(),r=e[oa],n=e[aa],i=e[sa],o=e[ua],a=e[ca],c=e[fa];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:a,utm_term:c}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=Ze();return e={},e[Pn]=r[Pn],e[Cn]=r[Cn],e[Rn]=r[Rn],e[An]=r[An],e[Nn]=r[Nn],e[Dn]=r[Dn],e[Un]=r[Un],e[kn]=r[kn],e[jn]=r[jn],e[Mn]=r[Mn],e[Ln]=r[Ln],e},t}()});var mr,qn,la=S(()=>{"use strict";Ie();mr=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[ct,e,t.substring(0,r)].filter(Boolean).join("_")},qn=function(t){return"".concat(ct.toLowerCase(),"_").concat(t.substring(0,6))}});var da,oc,pa,ac,ha,va,ga=S(()=>{"use strict";Qe();Ie();Lt();da=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},oc=function(t){return Object.values(t).every(function(e){return!e})},pa=function(t,e,r,n){n===void 0&&(n=!0);var i=t.referrer,o=t.referring_domain,a=On(t,["referrer","referring_domain"]),c=e||{},f=c.referrer,s=c.referring_domain,u=On(c,["referrer","referring_domain"]);if(ac(r.excludeReferrers,t.referring_domain)||!n&&oc(t)&&e)return!1;var d=JSON.stringify(a)!==JSON.stringify(u),l=da(o||"")!==da(s||"");return!e||d||l},ac=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})},ha=function(t,e){var r=me(me({},Ge),t),n=Object.entries(r).reduce(function(i,o){var a,c=vr(o,2),f=c[0],s=c[1];return i.setOnce("initial_".concat(f),(a=s??e.initialEmptyValue)!==null&&a!==void 0?a:"EMPTY"),s?i.set(f,s):i.unset(f)},new Re);return jt(n)},va=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]}});var ma,ya=S(()=>{"use strict";Ie();ma=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[ct,e,t.substring(0,r)].filter(Boolean).join("_")}});var qt,Vn=S(()=>{"use strict";qt=function(t,e){e===void 0&&(e=Date.now());var r=Date.now(),n=r-e;return n>t}});var Gn,_a=S(()=>{"use strict";Qe();ga();ya();Fn();Lt();Vn();Gn=function(){function t(e,r){var n;this.shouldTrackNewCampaign=!1,this.options=me({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:va((n=r.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=r.cookieStorage,this.storageKey=ma(r.apiKey,"MKTG"),this.currentCampaign=Ge,this.sessionTimeout=r.sessionTimeout,this.lastEventTime=r.lastEventTime,r.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return he(this,void 0,void 0,function(){var e,r;return ve(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return r=vr.apply(void 0,[n.sent(),2]),this.currentCampaign=r[0],this.previousCampaign=r[1],e=this.lastEventTime?qt(this.sessionTimeout,this.lastEventTime):!0,pa(this.currentCampaign,this.previousCampaign,this.options,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return he(this,void 0,void 0,function(){return ve(this,function(e){switch(e.label){case 0:return[4,Promise.all([new Ft().parse(),this.storage.get(this.storageKey)])];case 1:return[2,e.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var r=ha(this.currentCampaign,this.options);return e&&(r.event_id=e),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t}()});var Vt,ba=S(()=>{"use strict";Qe();gr();Vt=function(){function t(e){this.options=me({},e)}return t.prototype.isEnabled=function(){return he(this,void 0,void 0,function(){var e,r,n,i;return ve(this,function(o){switch(o.label){case 0:if(!ge())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return o.sent(),[4,e.get(r)];case 3:return n=o.sent(),[2,n===t.testValue];case 4:return i=o.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return he(this,void 0,void 0,function(){var r;return ve(this,function(n){switch(n.label){case 0:return[4,this.getRaw(e)];case 1:if(r=n.sent(),!r)return[2,void 0];try{try{r=decodeURIComponent(atob(r))}catch{}return[2,JSON.parse(r)]}catch{return[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return he(this,void 0,void 0,function(){var i,o,a;return ve(this,function(c){return i=ge(),o=(n=(r=i?.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],a=o.find(function(f){return f.indexOf(e+"=")===0}),a?[2,a.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return he(this,void 0,void 0,function(){var i,o,a,c,f,s;return ve(this,function(u){try{i=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,o=r!==null?i:-1,a=void 0,o&&(c=new Date,c.setTime(c.getTime()+o*24*60*60*1e3),a=c),f="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),a&&(f+="; expires=".concat(a.toUTCString())),f+="; path=/",this.options.domain&&(f+="; domain=".concat(this.options.domain)),this.options.secure&&(f+="; Secure"),this.options.sameSite&&(f+="; SameSite=".concat(this.options.sameSite)),s=ge(),s&&(s.document.cookie=f)}catch{}return[2]})})},t.prototype.remove=function(e){return he(this,void 0,void 0,function(){return ve(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return he(this,void 0,void 0,function(){return ve(this,function(e){return[2]})})},t}()});var Bn,wa=S(()=>{"use strict";Qe();Ie();Bn=function(t){na(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return he(this,void 0,void 0,function(){var i,o,a;return ve(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=c.sent(),[4,o.text()];case 2:return a=c.sent(),[2,this.buildResponse(a?JSON.parse(a):{code:o.status})]}})})},e}(ft)});var Je,Wn,Kn,$n=S(()=>{"use strict";Gr();Je=function(t){return t===void 0&&(t="$default_instance"),tr.getInstance(t)},Wn=function(t,e){Je(e).identityStore.editIdentity().setUserId(t).commit()},Kn=function(t,e){Je(e).identityStore.editIdentity().setDeviceId(t).commit()}});var Hn,Ea=S(()=>{"use strict";Qe();$n();Hn=function(){function t(){this.name="identity",this.type="before",this.identityStore=Je().identityStore}return t.prototype.execute=function(e){return he(this,void 0,void 0,function(){var r;return ve(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return he(this,void 0,void 0,function(){return ve(this,function(r){return e.instanceName&&(this.identityStore=Je(e.instanceName).identityStore),[2]})})},t}()});var Xn,Sa=S(()=>{"use strict";Xn=function(){var t,e,r,n;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:i)!==null&&n!==void 0?n:""}});var Gt,yr,zn,Yn,_r,br,Qn,Zn,Ia=S(()=>{"use strict";Qe();Gt=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},yr=function(t){return Gt(t,"attribution")},zn=function(t){return Gt(t,"fileDownloads")},Yn=function(t){return Gt(t,"formInteractions")},_r=function(t){return Gt(t,"pageViews")},br=function(t){return Gt(t,"sessions")},Qn=function(t){var e=function(){return!1},r=void 0,n,i=t.pageCounter,o=_r(t.defaultTracking);return o&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n,pageCounter:i}},Zn=function(t){return yr(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?me({},t.defaultTracking.attribution):{}}});var Ae=S(()=>{"use strict";Fn();_a();Lt();xn();Vn();la();ba();wa();$n();Ea();Sa();gr();Ia()});var wr,Er,Ta=S(()=>{"use strict";wr=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.args,a=n.resolve,c=t&&t[i];if(typeof c=="function"){var f=c.apply(t,o);typeof a=="function"&&a(f?.promise)}}return t},Er=function(t){var e=t;return e&&e._q!==void 0}});var Oa,xa=S(()=>{"use strict";Oa="2.8.1"});var sc,uc,Pa,Ca=S(()=>{"use strict";Ee();Ie();Ae();xa();sc="Web",uc="$remote",Pa=function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="amplitude-ts/".concat(Oa),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return q(this,void 0,void 0,function(){var i,o,a,c;return V(this,function(f){return i=new Date().getTime(),o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,a=(n=e.event_id)!==null&&n!==void 0?n:o+1,this.config.lastEventId=a,e.time||(this.config.lastEventTime=i),c=ce(ce(ce(ce(ce(ce(ce(ce({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:sc}),this.config.trackingOptions.language&&{language:Xn()}),this.config.trackingOptions.ipAddress&&{ip:uc}),{insert_id:Se(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:a,library:this.library,user_agent:this.userAgent}),[2,c]})})},t}()});var Sr,Jn=S(()=>{"use strict";Ee();Sr=function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return q(this,void 0,void 0,function(){var e,r,n,i,o;return V(this,function(a){switch(a.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",a.label=1;case 1:return a.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return a.sent(),[4,r.get(n)];case 3:return i=a.sent(),[2,i===e];case 4:return o=a.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return a.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return q(this,void 0,void 0,function(){var r,n;return V(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=i.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n=i.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return q(this,void 0,void 0,function(){return V(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return q(this,void 0,void 0,function(){return V(this,function(i){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return q(this,void 0,void 0,function(){return V(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return q(this,void 0,void 0,function(){return V(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t}()});var Ir,ei,Ra=S(()=>{"use strict";Ee();Ae();Jn();Ir=1e3,ei=function(t){Te(e,t);function e(r){var n=this,i;return n=t.call(this,(i=ge())===null||i===void 0?void 0:i.localStorage)||this,n.loggerProvider=r?.loggerProvider,n}return e.prototype.set=function(r,n){var i;return q(this,void 0,void 0,function(){var o;return V(this,function(a){switch(a.label){case 0:return Array.isArray(n)&&n.length>Ir?(o=n.length-Ir,[4,t.prototype.set.call(this,r,n.slice(0,Ir))]):[3,2];case 1:return a.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(o," events because the queue length exceeded ").concat(Ir,".")),[3,4];case 2:return[4,t.prototype.set.call(this,r,n)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},e}(Sr)});var Aa,Na=S(()=>{"use strict";Ee();Ae();Jn();Aa=function(t){Te(e,t);function e(){var r;return t.call(this,(r=ge())===null||r===void 0?void 0:r.sessionStorage)||this}return e}(Sr)});var Da,Ua=S(()=>{"use strict";Ee();Ie();Da=function(t){Te(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return q(this,void 0,void 0,function(){var i=this;return V(this,function(o){return[2,new Promise(function(a,c){typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var f=new XMLHttpRequest;f.open("POST",r,!0),f.onreadystatechange=function(){if(f.readyState===i.state.done){var s=f.responseText,u=s?JSON.parse(s):{code:f.status},d=i.buildResponse(u);a(d)}},f.setRequestHeader("Content-Type","application/json"),f.setRequestHeader("Accept","*/*"),f.send(JSON.stringify(n))})]})})},e}(ft)});var ka,ja=S(()=>{"use strict";Ee();Ae();Ie();ka=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return q(this,void 0,void 0,function(){var i=this;return V(this,function(o){return[2,new Promise(function(a,c){var f=ge();if(!f?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var s=JSON.stringify(n),u=f.navigator.sendBeacon(r,JSON.stringify(n));return a(u?i.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:s.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(d){c(d)}})]})})},e}(ft)});var Ma,ti,cc,La=S(()=>{"use strict";Ee();Ae();Ma=function(t,e,r){return r===void 0&&(r=!0),q(void 0,void 0,void 0,function(){var n,i,o,a,c,f,s,u,d;return V(this,function(l){switch(l.label){case 0:return n=qn(t),[4,e.getRaw(n)];case 1:return i=l.sent(),i?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:l.sent(),l.label=3;case 3:return o=ra(i.split("."),6),a=o[0],c=o[1],f=o[2],s=o[3],u=o[4],d=o[5],[2,{deviceId:a,userId:cc(c),sessionId:ti(s),lastEventId:ti(d),lastEventTime:ti(u),optOut:!!f}]}})})},ti=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},cc=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}}});var Oe,cp,ri,Fa,qa,ni,ii,Va,Ga,Ba,Wa,Ka,Tr,Or,xr,Bt,$a,Wt=S(()=>{"use strict";Oe="[Amplitude]",cp="".concat(Oe," Page Viewed"),ri="".concat(Oe," Form Started"),Fa="".concat(Oe," Form Submitted"),qa="".concat(Oe," File Downloaded"),ni="session_start",ii="session_end",Va="".concat(Oe," File Extension"),Ga="".concat(Oe," File Name"),Ba="".concat(Oe," Link ID"),Wa="".concat(Oe," Link Text"),Ka="".concat(Oe," Link URL"),Tr="".concat(Oe," Form ID"),Or="".concat(Oe," Form Name"),xr="".concat(Oe," Form Destination"),Bt="cookie",$a="US"});var fc,Ha,lc,oi,dc,Xa=S(()=>{"use strict";Ee();we();Ie();Ae();Ra();Na();Ua();ja();La();Wt();fc=function(t){Te(e,t);function e(r,n,i,o,a,c,f,s,u,d,l,p,h,C,T,E,x,R,v,O,g,A,D,j,W,y,_,w,b,Ne,We){i===void 0&&(i=new hr),o===void 0&&(o={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),f===void 0&&(f=1e3),s===void 0&&(s=5),u===void 0&&(u=30),d===void 0&&(d=Bt),T===void 0&&(T=new Mt),E===void 0&&(E=de.Warn),R===void 0&&(R=!1),v===void 0&&(v=!1),A===void 0&&(A=""),D===void 0&&(D=$a),W===void 0&&(W=30*60*1e3),y===void 0&&(y=new ei({loggerProvider:T})),_===void 0&&(_={ipAddress:!0,language:!0,platform:!0}),w===void 0&&(w="fetch"),b===void 0&&(b=!1);var U=t.call(this,{apiKey:r,storageProvider:y,transportProvider:oi(w)})||this;return U.apiKey=r,U.appVersion=n,U.cookieOptions=o,U.defaultTracking=a,U.flushIntervalMillis=f,U.flushMaxRetries=s,U.flushQueueSize=u,U.identityStorage=d,U.ingestionMetadata=l,U.instanceName=p,U.loggerProvider=T,U.logLevel=E,U.minIdLength=x,U.offline=R,U.partnerId=O,U.plan=g,U.serverUrl=A,U.serverZone=D,U.sessionTimeout=W,U.storageProvider=y,U.trackingOptions=_,U.transport=w,U.useBatch=b,U._optOut=!1,U._cookieStorage=i,U.deviceId=c,U.lastEventId=h,U.lastEventTime=C,U.optOut=v,U.sessionId=j,U.pageCounter=We,U.userId=Ne,U.loggerProvider.enable(U.logLevel),U}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(r){this._pageCounter!==r&&(this._pageCounter=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter};this.cookieStorage.set(mr(this.apiKey),r)},e}(bn),Ha=function(t,e,r){return e===void 0&&(e={}),q(void 0,void 0,void 0,function(){var n,i,o,a,c,f,s,u,d,l,p,h,C,T,E,x,R,v,O,g,A,D,j,W,y,_,w,b,Ne,We,U,et,pt,Ke,tt,ht,$e,rt,nt,vt,Et;return V(this,function(xe){switch(xe.label){case 0:return n=e.identityStorage||Bt,R={},n===Bt?[3,1]:(o="",[3,5]);case 1:return(O=(v=e.cookieOptions)===null||v===void 0?void 0:v.domain)!==null&&O!==void 0?(a=O,[3,4]):[3,2];case 2:return[4,dc()];case 3:a=xe.sent(),xe.label=4;case 4:o=a,xe.label=5;case 5:return i=ce.apply(void 0,[(R.domain=o,R.expiration=365,R.sameSite="Lax",R.secure=!1,R.upgrade=!0,R),e.cookieOptions]),c=lc(e.identityStorage,i),[4,Ma(t,c,(A=(g=e.cookieOptions)===null||g===void 0?void 0:g.upgrade)!==null&&A!==void 0?A:!0)];case 6:return f=xe.sent(),[4,c.get(mr(t))];case 7:return s=xe.sent(),u=Ze(),d=(_=(y=(W=(j=(D=e.deviceId)!==null&&D!==void 0?D:u.ampDeviceId)!==null&&j!==void 0?j:u.deviceId)!==null&&W!==void 0?W:s?.deviceId)!==null&&y!==void 0?y:f.deviceId)!==null&&_!==void 0?_:Se(),l=(w=s?.lastEventId)!==null&&w!==void 0?w:f.lastEventId,p=(b=s?.lastEventTime)!==null&&b!==void 0?b:f.lastEventTime,h=(We=(Ne=e.optOut)!==null&&Ne!==void 0?Ne:s?.optOut)!==null&&We!==void 0?We:f.optOut,C=(U=s?.sessionId)!==null&&U!==void 0?U:f.sessionId,T=(pt=(et=e.userId)!==null&&et!==void 0?et:s?.userId)!==null&&pt!==void 0?pt:f.userId,r.previousSessionDeviceId=(Ke=s?.deviceId)!==null&&Ke!==void 0?Ke:f.deviceId,r.previousSessionUserId=(tt=s?.userId)!==null&&tt!==void 0?tt:f.userId,E={ipAddress:($e=(ht=e.trackingOptions)===null||ht===void 0?void 0:ht.ipAddress)!==null&&$e!==void 0?$e:!0,language:(nt=(rt=e.trackingOptions)===null||rt===void 0?void 0:rt.language)!==null&&nt!==void 0?nt:!0,platform:(Et=(vt=e.trackingOptions)===null||vt===void 0?void 0:vt.platform)!==null&&Et!==void 0?Et:!0},x=s?.pageCounter,[2,new fc(t,e.appVersion,c,i,e.defaultTracking,d,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,l,p,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,h,e.partnerId,e.plan,e.serverUrl,e.serverZone,C,e.sessionTimeout,e.storageProvider,E,e.transport,e.useBatch,T,x)]}})})},lc=function(t,e){switch(t===void 0&&(t=Bt),e===void 0&&(e={}),t){case"localStorage":return new ei;case"sessionStorage":return new Aa;case"none":return new hr;case"cookie":default:return new Vt(ce(ce({},e),{expirationDays:e.expiration}))}},oi=function(t){return t==="xhr"?new Da:t==="beacon"?new ka:new Bn},dc=function(t){return q(void 0,void 0,void 0,function(){var e,r,n,i,o,o,a,c,f,s;return V(this,function(u){switch(u.label){case 0:return[4,new Vt().isEnabled()];case 1:if(!u.sent()||!t&&(typeof location>"u"||!location.hostname))return[2,""];for(e=t??location.hostname,r=e.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,u.label=2;case 2:return o<n.length?(a=n[o],c={domain:"."+a},f=new Vt(c),[4,f.set(i,1)]):[3,7];case 3:return u.sent(),[4,f.get(i)];case 4:return s=u.sent(),s?[4,f.remove(i)]:[3,6];case 5:return u.sent(),[2,"."+a];case 6:return o++,[3,2];case 7:return[2,""]}})})}});function lt(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function c(u){try{s(n.next(u))}catch(d){a(d)}}function f(u){try{s(n.throw(u))}catch(d){a(d)}}function s(u){u.done?o(u.value):i(u.value).then(c,f)}s((n=n.apply(t,e||[])).next())})}function dt(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(s){return function(u){return f([s,u])}}function f(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=s[0]&2?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[s[0]&2,o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(s[0]===6||s[0]===2)){r=0;continue}if(s[0]===3&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(s[0]===6&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(u){s=[6,u],i=0}finally{n=o=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function Pr(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function ai(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}var Be,za=S(()=>{"use strict";Be=function(){return Be=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Be.apply(this,arguments)}});var Ya,Qa=S(()=>{"use strict";Ya=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e}});var pc,si,hc,vc,gc,Za=S(()=>{"use strict";za();Ae();we();Ae();Qa();pc="[Amplitude] Page Viewed",si=function(t){t===void 0&&(t={});var e,r=ge(),n=void 0,i,o,a=t.trackOn,c=t.trackHistoryChanges,f=t.eventType,s=f===void 0?pc:f,u=function(){return lt(void 0,void 0,void 0,function(){var T,E;return dt(this,function(x){switch(x.label){case 0:return E={event_type:s},T=[{}],[4,hc()];case 1:return[2,(E.event_properties=Be.apply(void 0,[Be.apply(void 0,T.concat([x.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":typeof location<"u"&&location.href||"","[Amplitude] Page Path":typeof location<"u"&&location.pathname||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":typeof location<"u"&&location.href.split("?")[0]||""}]),E)]}})})},d=function(){return typeof a>"u"||typeof a=="function"&&a()},l=typeof location<"u"?location.href:null,p=function(){return lt(void 0,void 0,void 0,function(){var T,E,x,R,v;return dt(this,function(O){switch(O.label){case 0:return T=location.href,E=gc(c,T,l||"")&&d(),l=T,E?(n?.log("Tracking page view event"),e!=null?[3,1]:(x=void 0,[3,3])):[3,4];case 1:return v=(R=e).track,[4,u()];case 2:x=v.apply(R,[O.sent()]),O.label=3;case 3:O.label=4;case 4:return[2]}})})},h=function(){p()},C={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(T,E){return lt(void 0,void 0,void 0,function(){var x,R;return dt(this,function(v){switch(v.label){case 0:return e=E,o=T,n=T.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),r&&(r.addEventListener("popstate",h),i=r.history.pushState,r.history.pushState=new Proxy(r.history.pushState,{apply:function(O,g,A){var D=Pr(A,3),j=D[0],W=D[1],y=D[2];O.apply(g,[j,W,y]),p()}})),d()?(n.log("Tracking page view event"),R=(x=e).track,[4,u()]):[3,2];case 1:R.apply(x,[v.sent()]),v.label=2;case 2:return[2]}})})},execute:function(T){return lt(void 0,void 0,void 0,function(){var E;return dt(this,function(x){switch(x.label){case 0:return a==="attribution"&&vc(T)?(n?.log("Enriching campaign event to page view event with campaign parameters"),[4,u()]):[3,2];case 1:E=x.sent(),T.event_type=E.event_type,T.event_properties=Be(Be({},T.event_properties),E.event_properties),x.label=2;case 2:return o&&T.event_type===s&&(o.pageCounter=o.pageCounter?o.pageCounter+1:1,T.event_properties=Be(Be({},T.event_properties),{"[Amplitude] Page Counter":o.pageCounter})),[2,T]}})})},teardown:function(){return lt(void 0,void 0,void 0,function(){return dt(this,function(T){return r&&(r.removeEventListener("popstate",h),i&&(r.history.pushState=i)),[2]})})}};return C},hc=function(){return lt(void 0,void 0,void 0,function(){var t;return dt(this,function(e){switch(e.label){case 0:return t=Ya,[4,new Ft().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},vc=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[re.SET]||{},n=e[re.UNSET]||{},i=ai(ai([],Pr(Object.keys(r)),!1),Pr(Object.keys(n)),!1);return Object.keys(Ge).every(function(o){return i.includes(o)})}return!1},gc=function(t,e,r){switch(t){case"pathOnly":return e.split("?")[0]!==r.split("?")[0];default:return e!==r}}});var Ja=S(()=>{"use strict";Za()});var es,wt,ts=S(()=>{"use strict";Ee();Wt();es=function(){var t,e=[],r=function(s,u,d){s.addEventListener(u,d),e.push({element:s,type:u,handler:d})},n=function(){e.forEach(function(s){var u=s.element,d=s.type,l=s.handler;u?.removeEventListener(d,l)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",o="enrichment",a=function(s,u){return q(void 0,void 0,void 0,function(){return V(this,function(d){return window.addEventListener("load",function(){if(!u){s.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var l=function(h){var C=!1;r(h,"change",function(){var T;C||u.track(ri,(T={},T[Tr]=wt(h.id),T[Or]=wt(h.name),T[xr]=h.action,T)),C=!0}),r(h,"submit",function(){var T,E;C||u.track(ri,(T={},T[Tr]=wt(h.id),T[Or]=wt(h.name),T[xr]=h.action,T)),u.track(Fa,(E={},E[Tr]=wt(h.id),E[Or]=wt(h.name),E[xr]=h.action,E)),C=!1})},p=Array.from(document.getElementsByTagName("form"));p.forEach(l),typeof MutationObserver<"u"&&(t=new MutationObserver(function(h){h.forEach(function(C){C.addedNodes.forEach(function(T){T.nodeName==="FORM"&&l(T),"querySelectorAll"in T&&typeof T.querySelectorAll=="function"&&Array.from(T.querySelectorAll("form")).map(l)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},c=function(s){return q(void 0,void 0,void 0,function(){return V(this,function(u){return[2,s]})})},f=function(){return q(void 0,void 0,void 0,function(){return V(this,function(s){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:c,teardown:f}},wt=function(t){if(typeof t=="string")return t}});var rs,ns=S(()=>{"use strict";Ee();Wt();rs=function(){var t,e=[],r=function(s,u,d){s.addEventListener(u,d),e.push({element:s,type:u,handler:d})},n=function(){e.forEach(function(s){var u=s.element,d=s.type,l=s.handler;u?.removeEventListener(d,l)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",o="enrichment",a=function(s,u){return q(void 0,void 0,void 0,function(){return V(this,function(d){return window.addEventListener("load",function(){if(!u){s.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var l=function(C){var T;try{T=new URL(C.href,window.location.href)}catch{return}var E=p.exec(T.href),x=E?.[1];x&&r(C,"click",function(){var R;x&&u.track(qa,(R={},R[Va]=x,R[Ga]=T.pathname,R[Ba]=C.id,R[Wa]=C.text,R[Ka]=C.href,R))})},p=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$/,h=Array.from(document.getElementsByTagName("a"));h.forEach(l),typeof MutationObserver<"u"&&(t=new MutationObserver(function(C){C.forEach(function(T){T.addedNodes.forEach(function(E){E.nodeName==="A"&&l(E),"querySelectorAll"in E&&typeof E.querySelectorAll=="function"&&Array.from(E.querySelectorAll("a")).map(l)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}}),[2]})})},c=function(s){return q(void 0,void 0,void 0,function(){return V(this,function(u){return[2,s]})})},f=function(){return q(void 0,void 0,void 0,function(){return V(this,function(s){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:a,execute:c,teardown:f}}});var is,os,as=S(()=>{"use strict";is=!1,os=function(t){if(!(is||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),is=!0}}});var ss,us=S(()=>{"use strict";Ee();Ae();ss=function(){var t="@amplitude/plugin-network-checker-browser",e="before",r=ge(),n=[],i=function(f,s){r&&(r.addEventListener(f,s),n.push({type:f,handler:s}))},o=function(){n.forEach(function(f){var s=f.type,u=f.handler;r&&r.removeEventListener(s,u)}),n=[]},a=function(f,s){return q(void 0,void 0,void 0,function(){return V(this,function(u){return f.offline=!navigator.onLine,i("online",function(){f.loggerProvider.debug("Network connectivity changed to online."),f.offline=!1,setTimeout(function(){s.flush()},f.flushIntervalMillis)}),i("offline",function(){f.loggerProvider.debug("Network connectivity changed to offline."),f.offline=!0}),[2]})})},c=function(){return q(void 0,void 0,void 0,function(){return V(this,function(f){return o(),[2]})})};return{name:t,type:e,setup:a,teardown:c}}});var cs,fs=S(()=>{"use strict";Ee();Ie();Ae();we();Ta();Ca();Xa();Ja();ts();ns();Wt();as();us();cs=function(t){Te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i){r===void 0&&(r="");var o,a;return arguments.length>2?(o=n,a=i):typeof n=="string"?(o=n,a=void 0):(o=n?.userId,a=n),pe(this._init(ce(ce({},a),{userId:o,apiKey:r})))},e.prototype._init=function(r){var n,i,o;return q(this,void 0,void 0,function(){var a,c,f,s,u,d=this;return V(this,function(l){switch(l.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Ha(r.apiKey,r,this)]);case 1:return a=l.sent(),[4,t.prototype._init.call(this,a)];case 2:return l.sent(),yr(this.config.defaultTracking)?(c=Zn(this.config),this.webAttribution=new Gn(c,this.config),[4,this.webAttribution.init()]):[3,4];case 3:l.sent(),l.label=4;case 4:return f=Ze(),s=Number.isNaN(Number(f.ampSessionId))?void 0:Number(f.ampSessionId),this.setSessionId((o=(i=(n=r.sessionId)!==null&&n!==void 0?n:s)!==null&&i!==void 0?i:this.config.sessionId)!==null&&o!==void 0?o:Date.now()),u=Je(r.instanceName),u.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===cn?[3,6]:[4,this.add(ss()).promise];case 5:l.sent(),l.label=6;case 6:return[4,this.add(new Sn).promise];case 7:return l.sent(),[4,this.add(new Pa).promise];case 8:return l.sent(),[4,this.add(new Hn).promise];case 9:return l.sent(),os(this.config),zn(this.config.defaultTracking)?[4,this.add(rs()).promise]:[3,11];case 10:l.sent(),l.label=11;case 11:return Yn(this.config.defaultTracking)?[4,this.add(es()).promise]:[3,13];case 12:l.sent(),l.label=13;case 13:return _r(this.config.defaultTracking)?[4,this.add(si(Qn(this.config))).promise]:[3,15];case 14:l.sent(),l.label=15;case 15:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 16:return l.sent(),u.eventBridge.setEventReceiver(function(p){d.track(p.eventType,p.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}(r!==this.config.userId||r===void 0)&&(this.config.userId=r,Wn(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.deviceId=r,Kn(r,this.config.instanceName)},e.prototype.reset=function(){this.setDeviceId(Se()),this.setUserId(void 0)},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,r)),pe(Promise.resolve());if(r===this.config.sessionId)return pe(Promise.resolve());var o=this.getSessionId(),a=this.config.lastEventTime,c=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,this.config.pageCounter=0,br(this.config.defaultTracking)&&(o&&a&&i.push(this.track(ii,void 0,{device_id:this.previousSessionDeviceId,event_id:++c,session_id:o,time:a+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var f=this.trackCampaignEventIfNeeded(++c,i);return br(this.config.defaultTracking)&&i.push(this.track(ni,void 0,{event_id:f?++c:c,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,pe(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=oi(r)},e.prototype.identify=function(r,n){if(Er(r)){var i=r._q;r._q=[],r=wr(new Re,i)}return n?.user_id&&this.setUserId(n.user_id),n?.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,i,o){if(Er(i)){var a=i._q;i._q=[],i=wr(new Re,a)}return t.prototype.groupIdentify.call(this,r,n,i,o)},e.prototype.revenue=function(r,n){if(Er(r)){var i=r._q;r._q=[],r=wr(new fr,i)}return t.prototype.revenue.call(this,r,n)},e.prototype.trackCampaignEventIfNeeded=function(r,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(r);return n?n.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(r){return q(this,void 0,void 0,function(){var n,i,o;return V(this,function(a){return n=Date.now(),i=qt(this.config.sessionTimeout,this.config.lastEventTime),o=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),r.event_type!==ni&&r.event_type!==ii&&(!r.session_id||r.session_id===this.getSessionId())&&(i||o?(this.setSessionId(n),o&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),[2,t.prototype.process.call(this,r)]})})},e}(yn)});var mc,ne,ls=S(()=>{"use strict";Ie();fs();mc=function(){var t=new cs;return{init:Z(t.init.bind(t),"init",Y(t),Q(t,["config"])),add:Z(t.add.bind(t),"add",Y(t),Q(t,["config.apiKey","timeline.plugins"])),remove:Z(t.remove.bind(t),"remove",Y(t),Q(t,["config.apiKey","timeline.plugins"])),track:Z(t.track.bind(t),"track",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),logEvent:Z(t.logEvent.bind(t),"logEvent",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),identify:Z(t.identify.bind(t),"identify",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),groupIdentify:Z(t.groupIdentify.bind(t),"groupIdentify",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),setGroup:Z(t.setGroup.bind(t),"setGroup",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),revenue:Z(t.revenue.bind(t),"revenue",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),flush:Z(t.flush.bind(t),"flush",Y(t),Q(t,["config.apiKey","timeline.queue.length"])),getUserId:Z(t.getUserId.bind(t),"getUserId",Y(t),Q(t,["config","config.userId"])),setUserId:Z(t.setUserId.bind(t),"setUserId",Y(t),Q(t,["config","config.userId"])),getDeviceId:Z(t.getDeviceId.bind(t),"getDeviceId",Y(t),Q(t,["config","config.deviceId"])),setDeviceId:Z(t.setDeviceId.bind(t),"setDeviceId",Y(t),Q(t,["config","config.deviceId"])),reset:Z(t.reset.bind(t),"reset",Y(t),Q(t,["config","config.userId","config.deviceId"])),getSessionId:Z(t.getSessionId.bind(t),"getSessionId",Y(t),Q(t,["config"])),setSessionId:Z(t.setSessionId.bind(t),"setSessionId",Y(t),Q(t,["config"])),extendSession:Z(t.extendSession.bind(t),"extendSession",Y(t),Q(t,["config"])),setOptOut:Z(t.setOptOut.bind(t),"setOptOut",Y(t),Q(t,["config"])),setTransport:Z(t.setTransport.bind(t),"setTransport",Y(t),Q(t,["config"]))}},ne=mc()});var yc,ah,sh,uh,ch,fh,lh,ds,ps,dh,ph,hh,vh,gh,mh,yh,_h,bh,hs,vs,gs=S(()=>{"use strict";ls();Ie();yc=ne.add,ah=ne.extendSession,sh=ne.flush,uh=ne.getDeviceId,ch=ne.getSessionId,fh=ne.getUserId,lh=ne.groupIdentify,ds=ne.identify,ps=ne.init,dh=ne.logEvent,ph=ne.remove,hh=ne.reset,vh=ne.revenue,gh=ne.setDeviceId,mh=ne.setGroup,yh=ne.setOptOut,_h=ne.setSessionId,bh=ne.setTransport,hs=ne.setUserId,vs=ne.track});function Oh({apiKey:t,user:e,config:r}){if(!le()||!t)return;let n=e?._id;ps(t,n,r),e&&(hs(n),_c(bc(e)))}function xh(t,e,r){!le()||!t||vs(t,e,r)}function _c(t){if(!le()||!t)return;let e=new Re;for(let[r,n]of Object.entries(t))e.set(r,n);ds(e)}function bc(t){return{userId:t._id,customer:!!t.plan,coupon:t.stripe?.coupon_name,planType:t.plan?.level||"free",planPeriod:t.plan?.interval,totalProjects:t.created_mags_count||0,publishedProjects:t.mags_count||0,customDomainProjects:t.projectDomains||0,betaTester:!!t.permissions?.can_use_beta_testing,lifeTimeValue:t.analytics_data?.lifeTimeValue||0,numOfVisits:["profile","public","editor"].reduce((e,r)=>e+(t.analytics_data?.[`visit_${r}`]||0),0),job:t.job?.toLowerCase().includes("other")?"other":t.job?.toLowerCase(),project:t.future_project?.toLowerCase().includes("other")?"other":t.future_project?.toLowerCase(),signUpDate:ui(t.createDate),lastVisitDate:ui(t.last_token_refresh),firstPaymentDate:ui(t.stripe?.subscription_start)}}function ui(t){return t?mt(yt(t),"yyyy-MM-dd"):""}var ms=S(()=>{"use strict";gs();hi();At()});var ys,_s=S(()=>{"use strict";(function(t){t.TemplatePreview="template preview",t.TemplatesPage="templates page",t.Profile="profile",t.Help="help",t.Editor="editor",t.EditorHelp="editor help",t.EditorPages="editor pages"})(ys||(ys={}))});var wc,bs=S(()=>{"use strict";wc=Xt(Is())});var Ec=S(()=>{"use strict";an();an();zt();Ar();_s();rn();bs();Oo();ms()});export{Ti as a,Ts as b,vi as c,gi as d,yi as e,Ju as f,ys as g,cf as h,Oh as i,xh as j,Ec as k};
